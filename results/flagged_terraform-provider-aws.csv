,Issue ID,Issue Body,Candidate String,Repolink
0,33718,"### Description

Add BedRock as a new Terraform Resource / Data Source so users with IaC requirements in their production environments can effectively start using the service.

### Requested Resource(s) and/or Data Source(s)

Resources:
- aws_bedrock_model_customization_job

Data Sources:
- aws_bedrock_model_customization_job

### Potential Terraform Configuration

```terraform
resource ""aws_bedrock_model_customization_job"" ""example"" {
  base_model_identifier = ""asdf""
  client_request_token  = ""c9a0b34f-877c-4cee-9fa6-e7d08d04f4fd""
  kms_key_id            = ""arn:aws:kms:...""
  model_name            = ""Custom Model""
  role_arn              = ""arn:aws:iam:...""
  job_name              = ""example""

  model_tags {
    ""tag1"" = ""value1""
    ""tag2"" = ""value2""
  }

  hyper_parameters {
    ""param1"" = ""pvalue2""
  }

  job_tags {
    ""tag1"" = ""value1""
    ""tag2"" = ""value2""
  }

  output_data_config = {
    s3_uri = ""s3://...""
  }

  training_data_config = {
    s3_uri = ""s3://...""
  }

  validation_data_config = {
    s3_uri = ""s3://...""
  }

  vpc_config = {
    security_group_ids = [
      ""sg-123"",
      ""sg-456"",
    ]

    subnet_ids = [
      ""x"",
      ""y"",
    ]
  }
}
```


### References

https://docs.aws.amazon.com/bedrock/latest/APIReference/API_CreateModelCustomizationJob.html
https://docs.aws.amazon.com/service-authorization/latest/reference/list_amazonbedrock.html

### Would you like to implement a fix?

No",c9a0b34f-877c-4cee-9fa6-e7d08d04f4fd,https://github.com/hashicorp/terraform-provider-aws
1,33718,"### Description

Add BedRock as a new Terraform Resource / Data Source so users with IaC requirements in their production environments can effectively start using the service.

### Requested Resource(s) and/or Data Source(s)

Resources:
- aws_bedrock_model_customization_job

Data Sources:
- aws_bedrock_model_customization_job

### Potential Terraform Configuration

```terraform
resource ""aws_bedrock_model_customization_job"" ""example"" {
  base_model_identifier = ""asdf""
  client_request_token  = ""c9a0b34f-877c-4cee-9fa6-e7d08d04f4fd""
  kms_key_id            = ""arn:aws:kms:...""
  model_name            = ""Custom Model""
  role_arn              = ""arn:aws:iam:...""
  job_name              = ""example""

  model_tags {
    ""tag1"" = ""value1""
    ""tag2"" = ""value2""
  }

  hyper_parameters {
    ""param1"" = ""pvalue2""
  }

  job_tags {
    ""tag1"" = ""value1""
    ""tag2"" = ""value2""
  }

  output_data_config = {
    s3_uri = ""s3://...""
  }

  training_data_config = {
    s3_uri = ""s3://...""
  }

  validation_data_config = {
    s3_uri = ""s3://...""
  }

  vpc_config = {
    security_group_ids = [
      ""sg-123"",
      ""sg-456"",
    ]

    subnet_ids = [
      ""x"",
      ""y"",
    ]
  }
}
```


### References

https://docs.aws.amazon.com/bedrock/latest/APIReference/API_CreateModelCustomizationJob.html
https://docs.aws.amazon.com/service-authorization/latest/reference/list_amazonbedrock.html

### Would you like to implement a fix?

No",9fa6-e7d08d04f4fd,https://github.com/hashicorp/terraform-provider-aws
2,31537,"### Terraform Core Version

1.3.7

### AWS Provider Version

4.37.0 or 4.67.0

### Affected Resource(s)

Context:
Used aws_appsync_graphql_api and aws_appsync_api_key to setup the appsync and api key for the 1st time successfully. After manually deleting the AppSync Service and run the same TF scripts again, it keeps showing error in the plan stage.

The error is: `error getting Appsync API Key ""4oi7mwwf6barbfpt35zsxplnwq:da2-5aqaharf6jh6hlloapk25etb34"": NotFoundException: GraphQL API 4oi7mwwf6barbfpt35zsxplnwq not found.`

The issue remains regardless of commenting out the aws_appsync_api_key or adding dependency in aws_appsync_api_key on aws_appsync_graphql_api. 

This issue occurs even when changing the authentication method to AWS_IAM in aws_appsync_graphql_api.

### Expected Behavior

AppSync should be created without an API key if aws_appsync_api_key  is not given.

### Actual Behavior

Giving the same error in the plan stage, can't setup App Sync

### Relevant Error/Panic Output Snippet

_No response_

### Terraform Configuration Files

```terraform
resource ""aws_iam_role_policy_attachment"" ""aws_appsync_push_to_cloudwatch_logs"" {
  role       = aws_iam_role.appsync_access_aws_services.name
  policy_arn = ""arn:aws:iam::aws:policy/service-role/AWSAppSyncPushToCloudWatchLogs""
}

resource ""aws_appsync_graphql_api"" ""zero_zero_one"" {
  authentication_type = ""API_KEY""
  name                = ""appsync001""

#   schema = <<EOF
# schmea {
#   query: Query
# }

# type Query {
#   test: Int
# }
# EOF

  log_config {
    cloudwatch_logs_role_arn = aws_iam_role.appsync_access_aws_services.arn
    field_log_level          = ""ALL""
  }

  tags = local.tags
}

//Setup An API Key for AppSync
resource ""aws_appsync_api_key"" ""zero_zero_one"" {
  api_id  = aws_appsync_graphql_api.zero_zero_one.id
  expires = ""2024-05-21T00:00:00Z""
}
```

### Steps to Reproduce

See context

### Debug Output

_No response_

### Panic Output

_No response_

### Important Factoids

_No response_

### References

_No response_

### Would you like to implement a fix?

None",5aqaharf6jh6hlloapk25etb34,https://github.com/hashicorp/terraform-provider-aws
3,31537,"### Terraform Core Version

1.3.7

### AWS Provider Version

4.37.0 or 4.67.0

### Affected Resource(s)

Context:
Used aws_appsync_graphql_api and aws_appsync_api_key to setup the appsync and api key for the 1st time successfully. After manually deleting the AppSync Service and run the same TF scripts again, it keeps showing error in the plan stage.

The error is: `error getting Appsync API Key ""4oi7mwwf6barbfpt35zsxplnwq:da2-5aqaharf6jh6hlloapk25etb34"": NotFoundException: GraphQL API 4oi7mwwf6barbfpt35zsxplnwq not found.`

The issue remains regardless of commenting out the aws_appsync_api_key or adding dependency in aws_appsync_api_key on aws_appsync_graphql_api. 

This issue occurs even when changing the authentication method to AWS_IAM in aws_appsync_graphql_api.

### Expected Behavior

AppSync should be created without an API key if aws_appsync_api_key  is not given.

### Actual Behavior

Giving the same error in the plan stage, can't setup App Sync

### Relevant Error/Panic Output Snippet

_No response_

### Terraform Configuration Files

```terraform
resource ""aws_iam_role_policy_attachment"" ""aws_appsync_push_to_cloudwatch_logs"" {
  role       = aws_iam_role.appsync_access_aws_services.name
  policy_arn = ""arn:aws:iam::aws:policy/service-role/AWSAppSyncPushToCloudWatchLogs""
}

resource ""aws_appsync_graphql_api"" ""zero_zero_one"" {
  authentication_type = ""API_KEY""
  name                = ""appsync001""

#   schema = <<EOF
# schmea {
#   query: Query
# }

# type Query {
#   test: Int
# }
# EOF

  log_config {
    cloudwatch_logs_role_arn = aws_iam_role.appsync_access_aws_services.arn
    field_log_level          = ""ALL""
  }

  tags = local.tags
}

//Setup An API Key for AppSync
resource ""aws_appsync_api_key"" ""zero_zero_one"" {
  api_id  = aws_appsync_graphql_api.zero_zero_one.id
  expires = ""2024-05-21T00:00:00Z""
}
```

### Steps to Reproduce

See context

### Debug Output

_No response_

### Panic Output

_No response_

### Important Factoids

_No response_

### References

_No response_

### Would you like to implement a fix?

None",aws_appsync_api_key,https://github.com/hashicorp/terraform-provider-aws
4,27422,"### Terraform Core Version

1.3.2

### AWS Provider Version

4.33.0,4.35.0

### Affected Resource(s)

aws_kms_key

### Expected Behavior

Terraform should wait for the policy to fully apply and not time out.

### Actual Behavior

Terraform is not waiting long enough for the KMS key policy to propagate and is timing out. Generally there is no change in the policy just order of the accounts so normally it shouldn't even show difference and need to apply changes.

### Relevant Error/Panic Output Snippet

_No response_

### Terraform Configuration Files

```terraform
resource ""aws_kms_key"" ""imwildcardcert"" {
  customer_master_key_spec = ""SYMMETRIC_DEFAULT""
  is_enabled   = ""true""
  key_usage    = ""ENCRYPT_DECRYPT""
  multi_region = ""true""
  policy       = <<POLICY
{
 .......
}
POLICY

  tags = {
    Name = ""aws-*-kms-z-imwildcardcert-z""
  }
}
```

### Steps to Reproduce

terraform plan and you see it is trying to add and remove same account . So i guess issue is in order of account on an existing KMS key.
terraform apply

### Debug Output

```
-----------------------------------------------------
2022-10-24T11:41:49.794+0300 [DEBUG] [aws-sdk-go] {}
╷
│ Error: error waiting for KMS Key (mrk-3b113360d5d541f484250ed15ebfc6e3) policy propagation: timeout while waiting for state to become 'TRUE' (last state: 'FALSE', timeout: 5m0s)
│
│   with module.kms.aws_kms_key.imwildcardcert,
│   on modules\kms\main.tf line 134, in resource ""aws_kms_key"" ""imwildcardcert"":
│  134: resource ""aws_kms_key"" ""imwildcardcert"" {
│
╵
╷
│ Error: error waiting for KMS Key (mrk-32e567e825584bd1a3850d0cff40cd6b) policy propagation: timeout while waiting for state to become 'TRUE' (last state: 'FALSE', timeout: 5m0s)
│
│   with module.kms.aws_kms_key.pdqsvc,
│   on modules\kms\main.tf line 240, in resource ""aws_kms_key"" ""pdqsvc"":
│  240: resource ""aws_kms_key"" ""pdqsvc"" {
│

.....
2022-10-24T11:41:50.866+0300 [DEBUG] [aws-sdk-go] {}
2022-10-24T11:41:50.867+0300 [DEBUG] provider.stdio: received EOF, stopping recv loop: err=""rpc error: code = Unavailable desc = error reading from server: EOF""
2022-10-24T11:41:50.919+0300 [DEBUG] provider: plugin process exited: path=.terraform/providers/registry.terraform.io/hashicorp/aws/4.35.0/windows_amd64/terraform-provider-aws_v4.35.0_x5.exe pid=27240
2022-10-24T11:41:50.920+0300 [DEBUG] provider: plugin exited
```

### Panic Output

N/A

### Important Factoids

Another strange thing is that we don't have changes in the policy. Terraform just see the list order differently and is trying to remove and add one and same accounts. It shouldn't do it 

 ```
  jsonencode(
          ~ {
              ~ Statement = [
                  ~ {
                      ~ Principal = {
                          ~ AWS = [
                              **+ ""arn:aws:iam::372240753xxx:root"",**
                               - ""arn:aws:iam::552537787yyy:root"",
                                **""arn:aws:iam::372240753xxx:root"",**
                              + ""arn:aws:iam::552537787yyy:root"",

                            ]
                        }
                        # (5 unchanged elements hidden)
                    },
                ]
                # (1 unchanged element hidden)
            }
        )
```


### References

From what I can see this is a similar to the following issue: https://github.com/hashicorp/terraform-provider-aws/issues/23592
The terraform code from which error is coming is here:
https://github.com/hashicorp/terraform-provider-aws/blob/040f37e8d6a1b13fe796c5cdbfebbebb833ae90a/aws/internal/service/kms/waiter/waiter.go#L96-L122
Latest: https://github.com/hashicorp/terraform-provider-aws/blob/main/internal/service/kms/wait.go


### Would you like to implement a fix?

_No response_",32e567e825584bd1a3850d0cff40cd6b,https://github.com/hashicorp/terraform-provider-aws
5,27422,"### Terraform Core Version

1.3.2

### AWS Provider Version

4.33.0,4.35.0

### Affected Resource(s)

aws_kms_key

### Expected Behavior

Terraform should wait for the policy to fully apply and not time out.

### Actual Behavior

Terraform is not waiting long enough for the KMS key policy to propagate and is timing out. Generally there is no change in the policy just order of the accounts so normally it shouldn't even show difference and need to apply changes.

### Relevant Error/Panic Output Snippet

_No response_

### Terraform Configuration Files

```terraform
resource ""aws_kms_key"" ""imwildcardcert"" {
  customer_master_key_spec = ""SYMMETRIC_DEFAULT""
  is_enabled   = ""true""
  key_usage    = ""ENCRYPT_DECRYPT""
  multi_region = ""true""
  policy       = <<POLICY
{
 .......
}
POLICY

  tags = {
    Name = ""aws-*-kms-z-imwildcardcert-z""
  }
}
```

### Steps to Reproduce

terraform plan and you see it is trying to add and remove same account . So i guess issue is in order of account on an existing KMS key.
terraform apply

### Debug Output

```
-----------------------------------------------------
2022-10-24T11:41:49.794+0300 [DEBUG] [aws-sdk-go] {}
╷
│ Error: error waiting for KMS Key (mrk-3b113360d5d541f484250ed15ebfc6e3) policy propagation: timeout while waiting for state to become 'TRUE' (last state: 'FALSE', timeout: 5m0s)
│
│   with module.kms.aws_kms_key.imwildcardcert,
│   on modules\kms\main.tf line 134, in resource ""aws_kms_key"" ""imwildcardcert"":
│  134: resource ""aws_kms_key"" ""imwildcardcert"" {
│
╵
╷
│ Error: error waiting for KMS Key (mrk-32e567e825584bd1a3850d0cff40cd6b) policy propagation: timeout while waiting for state to become 'TRUE' (last state: 'FALSE', timeout: 5m0s)
│
│   with module.kms.aws_kms_key.pdqsvc,
│   on modules\kms\main.tf line 240, in resource ""aws_kms_key"" ""pdqsvc"":
│  240: resource ""aws_kms_key"" ""pdqsvc"" {
│

.....
2022-10-24T11:41:50.866+0300 [DEBUG] [aws-sdk-go] {}
2022-10-24T11:41:50.867+0300 [DEBUG] provider.stdio: received EOF, stopping recv loop: err=""rpc error: code = Unavailable desc = error reading from server: EOF""
2022-10-24T11:41:50.919+0300 [DEBUG] provider: plugin process exited: path=.terraform/providers/registry.terraform.io/hashicorp/aws/4.35.0/windows_amd64/terraform-provider-aws_v4.35.0_x5.exe pid=27240
2022-10-24T11:41:50.920+0300 [DEBUG] provider: plugin exited
```

### Panic Output

N/A

### Important Factoids

Another strange thing is that we don't have changes in the policy. Terraform just see the list order differently and is trying to remove and add one and same accounts. It shouldn't do it 

 ```
  jsonencode(
          ~ {
              ~ Statement = [
                  ~ {
                      ~ Principal = {
                          ~ AWS = [
                              **+ ""arn:aws:iam::372240753xxx:root"",**
                               - ""arn:aws:iam::552537787yyy:root"",
                                **""arn:aws:iam::372240753xxx:root"",**
                              + ""arn:aws:iam::552537787yyy:root"",

                            ]
                        }
                        # (5 unchanged elements hidden)
                    },
                ]
                # (1 unchanged element hidden)
            }
        )
```


### References

From what I can see this is a similar to the following issue: https://github.com/hashicorp/terraform-provider-aws/issues/23592
The terraform code from which error is coming is here:
https://github.com/hashicorp/terraform-provider-aws/blob/040f37e8d6a1b13fe796c5cdbfebbebb833ae90a/aws/internal/service/kms/waiter/waiter.go#L96-L122
Latest: https://github.com/hashicorp/terraform-provider-aws/blob/main/internal/service/kms/wait.go


### Would you like to implement a fix?

_No response_",3b113360d5d541f484250ed15ebfc6e3,https://github.com/hashicorp/terraform-provider-aws
6,27422,"### Terraform Core Version

1.3.2

### AWS Provider Version

4.33.0,4.35.0

### Affected Resource(s)

aws_kms_key

### Expected Behavior

Terraform should wait for the policy to fully apply and not time out.

### Actual Behavior

Terraform is not waiting long enough for the KMS key policy to propagate and is timing out. Generally there is no change in the policy just order of the accounts so normally it shouldn't even show difference and need to apply changes.

### Relevant Error/Panic Output Snippet

_No response_

### Terraform Configuration Files

```terraform
resource ""aws_kms_key"" ""imwildcardcert"" {
  customer_master_key_spec = ""SYMMETRIC_DEFAULT""
  is_enabled   = ""true""
  key_usage    = ""ENCRYPT_DECRYPT""
  multi_region = ""true""
  policy       = <<POLICY
{
 .......
}
POLICY

  tags = {
    Name = ""aws-*-kms-z-imwildcardcert-z""
  }
}
```

### Steps to Reproduce

terraform plan and you see it is trying to add and remove same account . So i guess issue is in order of account on an existing KMS key.
terraform apply

### Debug Output

```
-----------------------------------------------------
2022-10-24T11:41:49.794+0300 [DEBUG] [aws-sdk-go] {}
╷
│ Error: error waiting for KMS Key (mrk-3b113360d5d541f484250ed15ebfc6e3) policy propagation: timeout while waiting for state to become 'TRUE' (last state: 'FALSE', timeout: 5m0s)
│
│   with module.kms.aws_kms_key.imwildcardcert,
│   on modules\kms\main.tf line 134, in resource ""aws_kms_key"" ""imwildcardcert"":
│  134: resource ""aws_kms_key"" ""imwildcardcert"" {
│
╵
╷
│ Error: error waiting for KMS Key (mrk-32e567e825584bd1a3850d0cff40cd6b) policy propagation: timeout while waiting for state to become 'TRUE' (last state: 'FALSE', timeout: 5m0s)
│
│   with module.kms.aws_kms_key.pdqsvc,
│   on modules\kms\main.tf line 240, in resource ""aws_kms_key"" ""pdqsvc"":
│  240: resource ""aws_kms_key"" ""pdqsvc"" {
│

.....
2022-10-24T11:41:50.866+0300 [DEBUG] [aws-sdk-go] {}
2022-10-24T11:41:50.867+0300 [DEBUG] provider.stdio: received EOF, stopping recv loop: err=""rpc error: code = Unavailable desc = error reading from server: EOF""
2022-10-24T11:41:50.919+0300 [DEBUG] provider: plugin process exited: path=.terraform/providers/registry.terraform.io/hashicorp/aws/4.35.0/windows_amd64/terraform-provider-aws_v4.35.0_x5.exe pid=27240
2022-10-24T11:41:50.920+0300 [DEBUG] provider: plugin exited
```

### Panic Output

N/A

### Important Factoids

Another strange thing is that we don't have changes in the policy. Terraform just see the list order differently and is trying to remove and add one and same accounts. It shouldn't do it 

 ```
  jsonencode(
          ~ {
              ~ Statement = [
                  ~ {
                      ~ Principal = {
                          ~ AWS = [
                              **+ ""arn:aws:iam::372240753xxx:root"",**
                               - ""arn:aws:iam::552537787yyy:root"",
                                **""arn:aws:iam::372240753xxx:root"",**
                              + ""arn:aws:iam::552537787yyy:root"",

                            ]
                        }
                        # (5 unchanged elements hidden)
                    },
                ]
                # (1 unchanged element hidden)
            }
        )
```


### References

From what I can see this is a similar to the following issue: https://github.com/hashicorp/terraform-provider-aws/issues/23592
The terraform code from which error is coming is here:
https://github.com/hashicorp/terraform-provider-aws/blob/040f37e8d6a1b13fe796c5cdbfebbebb833ae90a/aws/internal/service/kms/waiter/waiter.go#L96-L122
Latest: https://github.com/hashicorp/terraform-provider-aws/blob/main/internal/service/kms/wait.go


### Would you like to implement a fix?

_No response_",10-24T11:41:+0300,https://github.com/hashicorp/terraform-provider-aws
7,27422,"### Terraform Core Version

1.3.2

### AWS Provider Version

4.33.0,4.35.0

### Affected Resource(s)

aws_kms_key

### Expected Behavior

Terraform should wait for the policy to fully apply and not time out.

### Actual Behavior

Terraform is not waiting long enough for the KMS key policy to propagate and is timing out. Generally there is no change in the policy just order of the accounts so normally it shouldn't even show difference and need to apply changes.

### Relevant Error/Panic Output Snippet

_No response_

### Terraform Configuration Files

```terraform
resource ""aws_kms_key"" ""imwildcardcert"" {
  customer_master_key_spec = ""SYMMETRIC_DEFAULT""
  is_enabled   = ""true""
  key_usage    = ""ENCRYPT_DECRYPT""
  multi_region = ""true""
  policy       = <<POLICY
{
 .......
}
POLICY

  tags = {
    Name = ""aws-*-kms-z-imwildcardcert-z""
  }
}
```

### Steps to Reproduce

terraform plan and you see it is trying to add and remove same account . So i guess issue is in order of account on an existing KMS key.
terraform apply

### Debug Output

```
-----------------------------------------------------
2022-10-24T11:41:49.794+0300 [DEBUG] [aws-sdk-go] {}
╷
│ Error: error waiting for KMS Key (mrk-3b113360d5d541f484250ed15ebfc6e3) policy propagation: timeout while waiting for state to become 'TRUE' (last state: 'FALSE', timeout: 5m0s)
│
│   with module.kms.aws_kms_key.imwildcardcert,
│   on modules\kms\main.tf line 134, in resource ""aws_kms_key"" ""imwildcardcert"":
│  134: resource ""aws_kms_key"" ""imwildcardcert"" {
│
╵
╷
│ Error: error waiting for KMS Key (mrk-32e567e825584bd1a3850d0cff40cd6b) policy propagation: timeout while waiting for state to become 'TRUE' (last state: 'FALSE', timeout: 5m0s)
│
│   with module.kms.aws_kms_key.pdqsvc,
│   on modules\kms\main.tf line 240, in resource ""aws_kms_key"" ""pdqsvc"":
│  240: resource ""aws_kms_key"" ""pdqsvc"" {
│

.....
2022-10-24T11:41:50.866+0300 [DEBUG] [aws-sdk-go] {}
2022-10-24T11:41:50.867+0300 [DEBUG] provider.stdio: received EOF, stopping recv loop: err=""rpc error: code = Unavailable desc = error reading from server: EOF""
2022-10-24T11:41:50.919+0300 [DEBUG] provider: plugin process exited: path=.terraform/providers/registry.terraform.io/hashicorp/aws/4.35.0/windows_amd64/terraform-provider-aws_v4.35.0_x5.exe pid=27240
2022-10-24T11:41:50.920+0300 [DEBUG] provider: plugin exited
```

### Panic Output

N/A

### Important Factoids

Another strange thing is that we don't have changes in the policy. Terraform just see the list order differently and is trying to remove and add one and same accounts. It shouldn't do it 

 ```
  jsonencode(
          ~ {
              ~ Statement = [
                  ~ {
                      ~ Principal = {
                          ~ AWS = [
                              **+ ""arn:aws:iam::372240753xxx:root"",**
                               - ""arn:aws:iam::552537787yyy:root"",
                                **""arn:aws:iam::372240753xxx:root"",**
                              + ""arn:aws:iam::552537787yyy:root"",

                            ]
                        }
                        # (5 unchanged elements hidden)
                    },
                ]
                # (1 unchanged element hidden)
            }
        )
```


### References

From what I can see this is a similar to the following issue: https://github.com/hashicorp/terraform-provider-aws/issues/23592
The terraform code from which error is coming is here:
https://github.com/hashicorp/terraform-provider-aws/blob/040f37e8d6a1b13fe796c5cdbfebbebb833ae90a/aws/internal/service/kms/waiter/waiter.go#L96-L122
Latest: https://github.com/hashicorp/terraform-provider-aws/blob/main/internal/service/kms/wait.go


### Would you like to implement a fix?

_No response_",customer_master_key_spec,https://github.com/hashicorp/terraform-provider-aws
8,26202,"Hi i get this error when i run terraform plan:
Error: error configuring Terraform AWS Provider: error validating provider credentials: error calling sts:GetCallerIdentity: operation error STS: GetCallerIdentity, https response error StatusCode: 400, RequestID: 73390445-95df-48e8-b897-1e06913a4946, api error IncompleteSignature: '/20220809/us-east-1/sts/aws4_request' not a valid key=value pair (missing equal-sign) in Authorization header: 'AWS4-HMAC-SHA256 Credential=SAKIA5GT5RFZMSQI2BR6V /20220809/us-east-1/sts/aws4_request, SignedHeaders=amz-sdk-invocation-id;amz-sdk-request;content-length;content-type;host;x-amz-date, Signature=a0011c33fdf04a7739ed5ed4421c3ea2ba6ad3f3365cde8d07e7c5c319ed5d3e'.

What am i doing wrong ?",a0011c33fdf04a7739ed5ed4421c3ea2ba6ad3f3365cde8d07e7c5c319ed5d3e,https://github.com/hashicorp/terraform-provider-aws
9,26202,"Hi i get this error when i run terraform plan:
Error: error configuring Terraform AWS Provider: error validating provider credentials: error calling sts:GetCallerIdentity: operation error STS: GetCallerIdentity, https response error StatusCode: 400, RequestID: 73390445-95df-48e8-b897-1e06913a4946, api error IncompleteSignature: '/20220809/us-east-1/sts/aws4_request' not a valid key=value pair (missing equal-sign) in Authorization header: 'AWS4-HMAC-SHA256 Credential=SAKIA5GT5RFZMSQI2BR6V /20220809/us-east-1/sts/aws4_request, SignedHeaders=amz-sdk-invocation-id;amz-sdk-request;content-length;content-type;host;x-amz-date, Signature=a0011c33fdf04a7739ed5ed4421c3ea2ba6ad3f3365cde8d07e7c5c319ed5d3e'.

What am i doing wrong ?",SignedHeaders=amz-sdk-invocation-id;amz-sdk-request;content-,https://github.com/hashicorp/terraform-provider-aws
10,26202,"Hi i get this error when i run terraform plan:
Error: error configuring Terraform AWS Provider: error validating provider credentials: error calling sts:GetCallerIdentity: operation error STS: GetCallerIdentity, https response error StatusCode: 400, RequestID: 73390445-95df-48e8-b897-1e06913a4946, api error IncompleteSignature: '/20220809/us-east-1/sts/aws4_request' not a valid key=value pair (missing equal-sign) in Authorization header: 'AWS4-HMAC-SHA256 Credential=SAKIA5GT5RFZMSQI2BR6V /20220809/us-east-1/sts/aws4_request, SignedHeaders=amz-sdk-invocation-id;amz-sdk-request;content-length;content-type;host;x-amz-date, Signature=a0011c33fdf04a7739ed5ed4421c3ea2ba6ad3f3365cde8d07e7c5c319ed5d3e'.

What am i doing wrong ?",GetCallerIdentity,https://github.com/hashicorp/terraform-provider-aws
11,26202,"Hi i get this error when i run terraform plan:
Error: error configuring Terraform AWS Provider: error validating provider credentials: error calling sts:GetCallerIdentity: operation error STS: GetCallerIdentity, https response error StatusCode: 400, RequestID: 73390445-95df-48e8-b897-1e06913a4946, api error IncompleteSignature: '/20220809/us-east-1/sts/aws4_request' not a valid key=value pair (missing equal-sign) in Authorization header: 'AWS4-HMAC-SHA256 Credential=SAKIA5GT5RFZMSQI2BR6V /20220809/us-east-1/sts/aws4_request, SignedHeaders=amz-sdk-invocation-id;amz-sdk-request;content-length;content-type;host;x-amz-date, Signature=a0011c33fdf04a7739ed5ed4421c3ea2ba6ad3f3365cde8d07e7c5c319ed5d3e'.

What am i doing wrong ?",0011c33fdf04a7739ed5ed4421c3ea2ba6ad3f3365,https://github.com/hashicorp/terraform-provider-aws
12,19045,"I have created a EKS cluster for gitlab runners, when I execute the terraform operations the Container Pod ( Kubernetes Excutor) assumes Worker Node Role. AS per documentation of EKS and also Terraform 
[terraformdocs](https://registry.terraform.io/providers/hashicorp/aws/latest/docs#codebuild-ecs-and-eks-roles)


The terraform init fails with below error ---

Initializing the backend...
2021/04/20 11:30:35 [INFO] Successfully derived credentials from session
2021/04/20 11:30:35 [INFO] AWS Auth provider used: ""EC2RoleProvider""
2021/04/20 11:30:35 [DEBUG] Trying to get account information via sts:GetCallerIdentity
2021/04/20 11:30:35 [DEBUG] [aws-sdk-go] DEBUG: Request sts/GetCallerIdentity Details:
---[ REQUEST POST-SIGN ]-----------------------------
POST / HTTP/1.1
Host: sts.amazonaws.com
User-Agent: aws-sdk-go/1.37.0 (go1.15.6; linux; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.14.7
Content-Length: 43
Authorization: AWS4-HMAC-SHA256 Credential=ASIAV6U7E6GGBJ4F6ZZ5/20210420/us-east-1/sts/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-security-token, Signature=e614da49f0338e1e9045f09d1cd050d0ed2313acc689f4c8baf0f352f051f0fb
Content-Type: application/x-www-form-urlencoded; charset=utf-8
X-Amz-Date: 20210420T113035Z
X-Amz-Security-Token: xxxxxxxxxx
HTTP/1.1 200 OK
Connection: close
Content-Length: 462
Content-Type: text/xml
Date: Tue, 20 Apr 2021 11:30:34 GMT
X-Amzn-Requestid: 50c57d8f-66c4-4807-9eb9-4ba240f3fbdd
-----------------------------------------------------
2021/04/20 11:30:35 [DEBUG] [aws-sdk-go] <GetCallerIdentityResponse xmlns=""https://sts.amazonaws.com/doc/2011-06-15/"">
<GetCallerIdentityResult>
<Arn>arn:aws:sts::xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx:assumed-role/dev-eks-node-role/i-9hjh76fffa85ccf9bfa252</Arn>
<UserId>xhjhkjhfhfhghjkljlk:i-08cda85ccf9bfa252</UserId>
<Account>11111111111111</Account>
</GetCallerIdentityResult>
<ResponseMetadata>
<RequestId>50c57d8f-gh909uhj-4807-9eb9-4ba240f3fbdd</RequestId>
</ResponseMetadata>
</GetCallerIdentityResponse>
2021/04/20 11:30:35 [DEBUG] checking for provisioner in "".""
2021/04/20 11:30:35 [DEBUG] checking for provisioner in ""/bin""
2021/04/20 11:30:35 [INFO] Failed to read plugin lock file .terraform/plugins/linux_amd64/lock.json: open .terraform/plugins/linux_amd64/lock.json: no such file or directory

Here as we can see the Runner makes call for Identity and gets eks-node role i.e worker node Role, instead of the Pod Role.
The AWS team has verified all the IAM role and eks cluster settings, its now terraform issue thats giving wrong output.

I have tried all suggestions from blogs but not able to get pass this worker node Role. I do not want the worker node role to come in picture, but Pod Role should be used. The Pod has AWS_ROLE_ARN set correctly.

Please assist asap",e614da49f0338e1e9045f09d1cd050d0ed2313acc689f4c8baf0f352f051f0fb,https://github.com/hashicorp/terraform-provider-aws
13,19045,"I have created a EKS cluster for gitlab runners, when I execute the terraform operations the Container Pod ( Kubernetes Excutor) assumes Worker Node Role. AS per documentation of EKS and also Terraform 
[terraformdocs](https://registry.terraform.io/providers/hashicorp/aws/latest/docs#codebuild-ecs-and-eks-roles)


The terraform init fails with below error ---

Initializing the backend...
2021/04/20 11:30:35 [INFO] Successfully derived credentials from session
2021/04/20 11:30:35 [INFO] AWS Auth provider used: ""EC2RoleProvider""
2021/04/20 11:30:35 [DEBUG] Trying to get account information via sts:GetCallerIdentity
2021/04/20 11:30:35 [DEBUG] [aws-sdk-go] DEBUG: Request sts/GetCallerIdentity Details:
---[ REQUEST POST-SIGN ]-----------------------------
POST / HTTP/1.1
Host: sts.amazonaws.com
User-Agent: aws-sdk-go/1.37.0 (go1.15.6; linux; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.14.7
Content-Length: 43
Authorization: AWS4-HMAC-SHA256 Credential=ASIAV6U7E6GGBJ4F6ZZ5/20210420/us-east-1/sts/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-security-token, Signature=e614da49f0338e1e9045f09d1cd050d0ed2313acc689f4c8baf0f352f051f0fb
Content-Type: application/x-www-form-urlencoded; charset=utf-8
X-Amz-Date: 20210420T113035Z
X-Amz-Security-Token: xxxxxxxxxx
HTTP/1.1 200 OK
Connection: close
Content-Length: 462
Content-Type: text/xml
Date: Tue, 20 Apr 2021 11:30:34 GMT
X-Amzn-Requestid: 50c57d8f-66c4-4807-9eb9-4ba240f3fbdd
-----------------------------------------------------
2021/04/20 11:30:35 [DEBUG] [aws-sdk-go] <GetCallerIdentityResponse xmlns=""https://sts.amazonaws.com/doc/2011-06-15/"">
<GetCallerIdentityResult>
<Arn>arn:aws:sts::xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx:assumed-role/dev-eks-node-role/i-9hjh76fffa85ccf9bfa252</Arn>
<UserId>xhjhkjhfhfhghjkljlk:i-08cda85ccf9bfa252</UserId>
<Account>11111111111111</Account>
</GetCallerIdentityResult>
<ResponseMetadata>
<RequestId>50c57d8f-gh909uhj-4807-9eb9-4ba240f3fbdd</RequestId>
</ResponseMetadata>
</GetCallerIdentityResponse>
2021/04/20 11:30:35 [DEBUG] checking for provisioner in "".""
2021/04/20 11:30:35 [DEBUG] checking for provisioner in ""/bin""
2021/04/20 11:30:35 [INFO] Failed to read plugin lock file .terraform/plugins/linux_amd64/lock.json: open .terraform/plugins/linux_amd64/lock.json: no such file or directory

Here as we can see the Runner makes call for Identity and gets eks-node role i.e worker node Role, instead of the Pod Role.
The AWS team has verified all the IAM role and eks cluster settings, its now terraform issue thats giving wrong output.

I have tried all suggestions from blogs but not able to get pass this worker node Role. I do not want the worker node role to come in picture, but Pod Role should be used. The Pod has AWS_ROLE_ARN set correctly.

Please assist asap",ASIAV6U7E6GGBJ4F6ZZ5,https://github.com/hashicorp/terraform-provider-aws
14,19045,"I have created a EKS cluster for gitlab runners, when I execute the terraform operations the Container Pod ( Kubernetes Excutor) assumes Worker Node Role. AS per documentation of EKS and also Terraform 
[terraformdocs](https://registry.terraform.io/providers/hashicorp/aws/latest/docs#codebuild-ecs-and-eks-roles)


The terraform init fails with below error ---

Initializing the backend...
2021/04/20 11:30:35 [INFO] Successfully derived credentials from session
2021/04/20 11:30:35 [INFO] AWS Auth provider used: ""EC2RoleProvider""
2021/04/20 11:30:35 [DEBUG] Trying to get account information via sts:GetCallerIdentity
2021/04/20 11:30:35 [DEBUG] [aws-sdk-go] DEBUG: Request sts/GetCallerIdentity Details:
---[ REQUEST POST-SIGN ]-----------------------------
POST / HTTP/1.1
Host: sts.amazonaws.com
User-Agent: aws-sdk-go/1.37.0 (go1.15.6; linux; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.14.7
Content-Length: 43
Authorization: AWS4-HMAC-SHA256 Credential=ASIAV6U7E6GGBJ4F6ZZ5/20210420/us-east-1/sts/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-security-token, Signature=e614da49f0338e1e9045f09d1cd050d0ed2313acc689f4c8baf0f352f051f0fb
Content-Type: application/x-www-form-urlencoded; charset=utf-8
X-Amz-Date: 20210420T113035Z
X-Amz-Security-Token: xxxxxxxxxx
HTTP/1.1 200 OK
Connection: close
Content-Length: 462
Content-Type: text/xml
Date: Tue, 20 Apr 2021 11:30:34 GMT
X-Amzn-Requestid: 50c57d8f-66c4-4807-9eb9-4ba240f3fbdd
-----------------------------------------------------
2021/04/20 11:30:35 [DEBUG] [aws-sdk-go] <GetCallerIdentityResponse xmlns=""https://sts.amazonaws.com/doc/2011-06-15/"">
<GetCallerIdentityResult>
<Arn>arn:aws:sts::xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx:assumed-role/dev-eks-node-role/i-9hjh76fffa85ccf9bfa252</Arn>
<UserId>xhjhkjhfhfhghjkljlk:i-08cda85ccf9bfa252</UserId>
<Account>11111111111111</Account>
</GetCallerIdentityResult>
<ResponseMetadata>
<RequestId>50c57d8f-gh909uhj-4807-9eb9-4ba240f3fbdd</RequestId>
</ResponseMetadata>
</GetCallerIdentityResponse>
2021/04/20 11:30:35 [DEBUG] checking for provisioner in "".""
2021/04/20 11:30:35 [DEBUG] checking for provisioner in ""/bin""
2021/04/20 11:30:35 [INFO] Failed to read plugin lock file .terraform/plugins/linux_amd64/lock.json: open .terraform/plugins/linux_amd64/lock.json: no such file or directory

Here as we can see the Runner makes call for Identity and gets eks-node role i.e worker node Role, instead of the Pod Role.
The AWS team has verified all the IAM role and eks cluster settings, its now terraform issue thats giving wrong output.

I have tried all suggestions from blogs but not able to get pass this worker node Role. I do not want the worker node role to come in picture, but Pod Role should be used. The Pod has AWS_ROLE_ARN set correctly.

Please assist asap",SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-,https://github.com/hashicorp/terraform-provider-aws
15,10110,"<!--- Please keep this note for the community --->

### Community Note

* Please vote on this issue by adding a 👍 [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request
* Please do not leave ""+1"" or ""me too"" comments, they generate extra noise for issue followers and do not help prioritize the request
* If you are interested in working on this issue or have submitted a pull request, please leave a comment

<!--- Thank you for keeping this note for the community --->

### Description

Here is an example of a shared credentials file configuration that is supported by the [awscli](https://docs.aws.amazon.com/en_pv/cli/latest/userguide/cli-configure-role.html)
```
# ~/.aws/credentials

[bastion] # these are fake credentials
aws_access_key_id = ASIA554SXDVIHKO5ACW2
aws_secret_access_key = VLJQKLEqs37HCDG4HgSDrxl1vLNrk9Is8gm0VNfA

[dev-spectator]
role_arn = arn:aws:iam::12345678901:role/spectator
source_profile = bastion
```

This works by caching credentials in the `~/.aws/cli/cache` directory. The awscli can read from this cache but **terraform cannot**.

you will get the following error:

```
Error initializing session: SharedConfigAssumeRoleError: failed to load assume role for arn:aws:iam::12345678901:role/spectator, source profile has no shared credentials
```

### Work around

In order to support terraform, you will need something like:

```
# ~/.aws/credentials

[bastion] # these are fake credentials
aws_access_key_id = ASIA554SXDVIHKO5ACW2
aws_secret_access_key = VLJQKLEqs37HCDG4HgSDrxl1vLNrk9Is8gm0VNfA

[dev-spectator] # these are also fake credentials
role_arn = arn:aws:iam::12345678901:role/spectator
source_profile = bastion
aws_access_key_id = ASIA554SXXVIYYQRGGER
aws_secret_access_key = aw5/hbwzGP31s2lfC3ZQshKE+AZdlOYkqBUI4otp
aws_session_token = FQoGZXIvYXdHEY4aDDDbLp6g5sfNojzC6CKwAV+yefPfFg7y0xADMDECoddpj9WecBEReMtXkRjCVZfbSa1604EIK2q0zshlsP0PtF0e5wBZFDuZHTI464EpSQEXkJajksWeMMOe7PSzyJOX5Zqp8ve4ItHoE70tGxIVQjA06NbvodNjjOO/gsbDAcKHW1rx9wnq3RJ+dQbqqNq01R1vrDvTjxDNTrZr2wYI2qYrd9REP+mc44EeIO+3r0iuiwxRCL1UzS/4nG4IRYG2KMeo9esF
```

### References

<!---
Information about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests

Are there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation? For example:

* https://aws.amazon.com/about-aws/whats-new/2018/04/introducing-amazon-ec2-fleet/
--->

* https://github.com/gruntwork-io/terragrunt/issues/527
",yefPfFg7y0xADMDECoddpj9WecBEReMtXkRjCVZfbSa1604EIK2q0zshlsP0PtF0e5wBZFDuZ,https://github.com/hashicorp/terraform-provider-aws
16,10110,"<!--- Please keep this note for the community --->

### Community Note

* Please vote on this issue by adding a 👍 [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request
* Please do not leave ""+1"" or ""me too"" comments, they generate extra noise for issue followers and do not help prioritize the request
* If you are interested in working on this issue or have submitted a pull request, please leave a comment

<!--- Thank you for keeping this note for the community --->

### Description

Here is an example of a shared credentials file configuration that is supported by the [awscli](https://docs.aws.amazon.com/en_pv/cli/latest/userguide/cli-configure-role.html)
```
# ~/.aws/credentials

[bastion] # these are fake credentials
aws_access_key_id = ASIA554SXDVIHKO5ACW2
aws_secret_access_key = VLJQKLEqs37HCDG4HgSDrxl1vLNrk9Is8gm0VNfA

[dev-spectator]
role_arn = arn:aws:iam::12345678901:role/spectator
source_profile = bastion
```

This works by caching credentials in the `~/.aws/cli/cache` directory. The awscli can read from this cache but **terraform cannot**.

you will get the following error:

```
Error initializing session: SharedConfigAssumeRoleError: failed to load assume role for arn:aws:iam::12345678901:role/spectator, source profile has no shared credentials
```

### Work around

In order to support terraform, you will need something like:

```
# ~/.aws/credentials

[bastion] # these are fake credentials
aws_access_key_id = ASIA554SXDVIHKO5ACW2
aws_secret_access_key = VLJQKLEqs37HCDG4HgSDrxl1vLNrk9Is8gm0VNfA

[dev-spectator] # these are also fake credentials
role_arn = arn:aws:iam::12345678901:role/spectator
source_profile = bastion
aws_access_key_id = ASIA554SXXVIYYQRGGER
aws_secret_access_key = aw5/hbwzGP31s2lfC3ZQshKE+AZdlOYkqBUI4otp
aws_session_token = FQoGZXIvYXdHEY4aDDDbLp6g5sfNojzC6CKwAV+yefPfFg7y0xADMDECoddpj9WecBEReMtXkRjCVZfbSa1604EIK2q0zshlsP0PtF0e5wBZFDuZHTI464EpSQEXkJajksWeMMOe7PSzyJOX5Zqp8ve4ItHoE70tGxIVQjA06NbvodNjjOO/gsbDAcKHW1rx9wnq3RJ+dQbqqNq01R1vrDvTjxDNTrZr2wYI2qYrd9REP+mc44EeIO+3r0iuiwxRCL1UzS/4nG4IRYG2KMeo9esF
```

### References

<!---
Information about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests

Are there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation? For example:

* https://aws.amazon.com/about-aws/whats-new/2018/04/introducing-amazon-ec2-fleet/
--->

* https://github.com/gruntwork-io/terragrunt/issues/527
",yefPfFg7y0xADMDECoddpj9WecBEReMtXkRjCVZfbSa1604EIK2q0zshlsP0PtF0e5wBZFDuZHTI464EpSQEXkJajksWeMMOe7PSzyJOX5Zqp8ve4ItHoE70tGxIVQjA06NbvodNjjOO,https://github.com/hashicorp/terraform-provider-aws
17,10110,"<!--- Please keep this note for the community --->

### Community Note

* Please vote on this issue by adding a 👍 [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request
* Please do not leave ""+1"" or ""me too"" comments, they generate extra noise for issue followers and do not help prioritize the request
* If you are interested in working on this issue or have submitted a pull request, please leave a comment

<!--- Thank you for keeping this note for the community --->

### Description

Here is an example of a shared credentials file configuration that is supported by the [awscli](https://docs.aws.amazon.com/en_pv/cli/latest/userguide/cli-configure-role.html)
```
# ~/.aws/credentials

[bastion] # these are fake credentials
aws_access_key_id = ASIA554SXDVIHKO5ACW2
aws_secret_access_key = VLJQKLEqs37HCDG4HgSDrxl1vLNrk9Is8gm0VNfA

[dev-spectator]
role_arn = arn:aws:iam::12345678901:role/spectator
source_profile = bastion
```

This works by caching credentials in the `~/.aws/cli/cache` directory. The awscli can read from this cache but **terraform cannot**.

you will get the following error:

```
Error initializing session: SharedConfigAssumeRoleError: failed to load assume role for arn:aws:iam::12345678901:role/spectator, source profile has no shared credentials
```

### Work around

In order to support terraform, you will need something like:

```
# ~/.aws/credentials

[bastion] # these are fake credentials
aws_access_key_id = ASIA554SXDVIHKO5ACW2
aws_secret_access_key = VLJQKLEqs37HCDG4HgSDrxl1vLNrk9Is8gm0VNfA

[dev-spectator] # these are also fake credentials
role_arn = arn:aws:iam::12345678901:role/spectator
source_profile = bastion
aws_access_key_id = ASIA554SXXVIYYQRGGER
aws_secret_access_key = aw5/hbwzGP31s2lfC3ZQshKE+AZdlOYkqBUI4otp
aws_session_token = FQoGZXIvYXdHEY4aDDDbLp6g5sfNojzC6CKwAV+yefPfFg7y0xADMDECoddpj9WecBEReMtXkRjCVZfbSa1604EIK2q0zshlsP0PtF0e5wBZFDuZHTI464EpSQEXkJajksWeMMOe7PSzyJOX5Zqp8ve4ItHoE70tGxIVQjA06NbvodNjjOO/gsbDAcKHW1rx9wnq3RJ+dQbqqNq01R1vrDvTjxDNTrZr2wYI2qYrd9REP+mc44EeIO+3r0iuiwxRCL1UzS/4nG4IRYG2KMeo9esF
```

### References

<!---
Information about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests

Are there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation? For example:

* https://aws.amazon.com/about-aws/whats-new/2018/04/introducing-amazon-ec2-fleet/
--->

* https://github.com/gruntwork-io/terragrunt/issues/527
",ASIA554SXDVIHKO5ACW2,https://github.com/hashicorp/terraform-provider-aws
18,10110,"<!--- Please keep this note for the community --->

### Community Note

* Please vote on this issue by adding a 👍 [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request
* Please do not leave ""+1"" or ""me too"" comments, they generate extra noise for issue followers and do not help prioritize the request
* If you are interested in working on this issue or have submitted a pull request, please leave a comment

<!--- Thank you for keeping this note for the community --->

### Description

Here is an example of a shared credentials file configuration that is supported by the [awscli](https://docs.aws.amazon.com/en_pv/cli/latest/userguide/cli-configure-role.html)
```
# ~/.aws/credentials

[bastion] # these are fake credentials
aws_access_key_id = ASIA554SXDVIHKO5ACW2
aws_secret_access_key = VLJQKLEqs37HCDG4HgSDrxl1vLNrk9Is8gm0VNfA

[dev-spectator]
role_arn = arn:aws:iam::12345678901:role/spectator
source_profile = bastion
```

This works by caching credentials in the `~/.aws/cli/cache` directory. The awscli can read from this cache but **terraform cannot**.

you will get the following error:

```
Error initializing session: SharedConfigAssumeRoleError: failed to load assume role for arn:aws:iam::12345678901:role/spectator, source profile has no shared credentials
```

### Work around

In order to support terraform, you will need something like:

```
# ~/.aws/credentials

[bastion] # these are fake credentials
aws_access_key_id = ASIA554SXDVIHKO5ACW2
aws_secret_access_key = VLJQKLEqs37HCDG4HgSDrxl1vLNrk9Is8gm0VNfA

[dev-spectator] # these are also fake credentials
role_arn = arn:aws:iam::12345678901:role/spectator
source_profile = bastion
aws_access_key_id = ASIA554SXXVIYYQRGGER
aws_secret_access_key = aw5/hbwzGP31s2lfC3ZQshKE+AZdlOYkqBUI4otp
aws_session_token = FQoGZXIvYXdHEY4aDDDbLp6g5sfNojzC6CKwAV+yefPfFg7y0xADMDECoddpj9WecBEReMtXkRjCVZfbSa1604EIK2q0zshlsP0PtF0e5wBZFDuZHTI464EpSQEXkJajksWeMMOe7PSzyJOX5Zqp8ve4ItHoE70tGxIVQjA06NbvodNjjOO/gsbDAcKHW1rx9wnq3RJ+dQbqqNq01R1vrDvTjxDNTrZr2wYI2qYrd9REP+mc44EeIO+3r0iuiwxRCL1UzS/4nG4IRYG2KMeo9esF
```

### References

<!---
Information about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests

Are there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation? For example:

* https://aws.amazon.com/about-aws/whats-new/2018/04/introducing-amazon-ec2-fleet/
--->

* https://github.com/gruntwork-io/terragrunt/issues/527
",ASIA554SXXVIYYQRGGER,https://github.com/hashicorp/terraform-provider-aws
19,10110,"<!--- Please keep this note for the community --->

### Community Note

* Please vote on this issue by adding a 👍 [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request
* Please do not leave ""+1"" or ""me too"" comments, they generate extra noise for issue followers and do not help prioritize the request
* If you are interested in working on this issue or have submitted a pull request, please leave a comment

<!--- Thank you for keeping this note for the community --->

### Description

Here is an example of a shared credentials file configuration that is supported by the [awscli](https://docs.aws.amazon.com/en_pv/cli/latest/userguide/cli-configure-role.html)
```
# ~/.aws/credentials

[bastion] # these are fake credentials
aws_access_key_id = ASIA554SXDVIHKO5ACW2
aws_secret_access_key = VLJQKLEqs37HCDG4HgSDrxl1vLNrk9Is8gm0VNfA

[dev-spectator]
role_arn = arn:aws:iam::12345678901:role/spectator
source_profile = bastion
```

This works by caching credentials in the `~/.aws/cli/cache` directory. The awscli can read from this cache but **terraform cannot**.

you will get the following error:

```
Error initializing session: SharedConfigAssumeRoleError: failed to load assume role for arn:aws:iam::12345678901:role/spectator, source profile has no shared credentials
```

### Work around

In order to support terraform, you will need something like:

```
# ~/.aws/credentials

[bastion] # these are fake credentials
aws_access_key_id = ASIA554SXDVIHKO5ACW2
aws_secret_access_key = VLJQKLEqs37HCDG4HgSDrxl1vLNrk9Is8gm0VNfA

[dev-spectator] # these are also fake credentials
role_arn = arn:aws:iam::12345678901:role/spectator
source_profile = bastion
aws_access_key_id = ASIA554SXXVIYYQRGGER
aws_secret_access_key = aw5/hbwzGP31s2lfC3ZQshKE+AZdlOYkqBUI4otp
aws_session_token = FQoGZXIvYXdHEY4aDDDbLp6g5sfNojzC6CKwAV+yefPfFg7y0xADMDECoddpj9WecBEReMtXkRjCVZfbSa1604EIK2q0zshlsP0PtF0e5wBZFDuZHTI464EpSQEXkJajksWeMMOe7PSzyJOX5Zqp8ve4ItHoE70tGxIVQjA06NbvodNjjOO/gsbDAcKHW1rx9wnq3RJ+dQbqqNq01R1vrDvTjxDNTrZr2wYI2qYrd9REP+mc44EeIO+3r0iuiwxRCL1UzS/4nG4IRYG2KMeo9esF
```

### References

<!---
Information about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests

Are there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation? For example:

* https://aws.amazon.com/about-aws/whats-new/2018/04/introducing-amazon-ec2-fleet/
--->

* https://github.com/gruntwork-io/terragrunt/issues/527
",VLJQKLEqs37HCDG4HgSDrxl1vLNrk9Is8gm0VNfA,https://github.com/hashicorp/terraform-provider-aws
20,10110,"<!--- Please keep this note for the community --->

### Community Note

* Please vote on this issue by adding a 👍 [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request
* Please do not leave ""+1"" or ""me too"" comments, they generate extra noise for issue followers and do not help prioritize the request
* If you are interested in working on this issue or have submitted a pull request, please leave a comment

<!--- Thank you for keeping this note for the community --->

### Description

Here is an example of a shared credentials file configuration that is supported by the [awscli](https://docs.aws.amazon.com/en_pv/cli/latest/userguide/cli-configure-role.html)
```
# ~/.aws/credentials

[bastion] # these are fake credentials
aws_access_key_id = ASIA554SXDVIHKO5ACW2
aws_secret_access_key = VLJQKLEqs37HCDG4HgSDrxl1vLNrk9Is8gm0VNfA

[dev-spectator]
role_arn = arn:aws:iam::12345678901:role/spectator
source_profile = bastion
```

This works by caching credentials in the `~/.aws/cli/cache` directory. The awscli can read from this cache but **terraform cannot**.

you will get the following error:

```
Error initializing session: SharedConfigAssumeRoleError: failed to load assume role for arn:aws:iam::12345678901:role/spectator, source profile has no shared credentials
```

### Work around

In order to support terraform, you will need something like:

```
# ~/.aws/credentials

[bastion] # these are fake credentials
aws_access_key_id = ASIA554SXDVIHKO5ACW2
aws_secret_access_key = VLJQKLEqs37HCDG4HgSDrxl1vLNrk9Is8gm0VNfA

[dev-spectator] # these are also fake credentials
role_arn = arn:aws:iam::12345678901:role/spectator
source_profile = bastion
aws_access_key_id = ASIA554SXXVIYYQRGGER
aws_secret_access_key = aw5/hbwzGP31s2lfC3ZQshKE+AZdlOYkqBUI4otp
aws_session_token = FQoGZXIvYXdHEY4aDDDbLp6g5sfNojzC6CKwAV+yefPfFg7y0xADMDECoddpj9WecBEReMtXkRjCVZfbSa1604EIK2q0zshlsP0PtF0e5wBZFDuZHTI464EpSQEXkJajksWeMMOe7PSzyJOX5Zqp8ve4ItHoE70tGxIVQjA06NbvodNjjOO/gsbDAcKHW1rx9wnq3RJ+dQbqqNq01R1vrDvTjxDNTrZr2wYI2qYrd9REP+mc44EeIO+3r0iuiwxRCL1UzS/4nG4IRYG2KMeo9esF
```

### References

<!---
Information about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests

Are there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation? For example:

* https://aws.amazon.com/about-aws/whats-new/2018/04/introducing-amazon-ec2-fleet/
--->

* https://github.com/gruntwork-io/terragrunt/issues/527
",FQoGZXIvYXdHEY4aDDDbLp6g5sfNojzC6CKwAV+,https://github.com/hashicorp/terraform-provider-aws
21,10110,"<!--- Please keep this note for the community --->

### Community Note

* Please vote on this issue by adding a 👍 [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request
* Please do not leave ""+1"" or ""me too"" comments, they generate extra noise for issue followers and do not help prioritize the request
* If you are interested in working on this issue or have submitted a pull request, please leave a comment

<!--- Thank you for keeping this note for the community --->

### Description

Here is an example of a shared credentials file configuration that is supported by the [awscli](https://docs.aws.amazon.com/en_pv/cli/latest/userguide/cli-configure-role.html)
```
# ~/.aws/credentials

[bastion] # these are fake credentials
aws_access_key_id = ASIA554SXDVIHKO5ACW2
aws_secret_access_key = VLJQKLEqs37HCDG4HgSDrxl1vLNrk9Is8gm0VNfA

[dev-spectator]
role_arn = arn:aws:iam::12345678901:role/spectator
source_profile = bastion
```

This works by caching credentials in the `~/.aws/cli/cache` directory. The awscli can read from this cache but **terraform cannot**.

you will get the following error:

```
Error initializing session: SharedConfigAssumeRoleError: failed to load assume role for arn:aws:iam::12345678901:role/spectator, source profile has no shared credentials
```

### Work around

In order to support terraform, you will need something like:

```
# ~/.aws/credentials

[bastion] # these are fake credentials
aws_access_key_id = ASIA554SXDVIHKO5ACW2
aws_secret_access_key = VLJQKLEqs37HCDG4HgSDrxl1vLNrk9Is8gm0VNfA

[dev-spectator] # these are also fake credentials
role_arn = arn:aws:iam::12345678901:role/spectator
source_profile = bastion
aws_access_key_id = ASIA554SXXVIYYQRGGER
aws_secret_access_key = aw5/hbwzGP31s2lfC3ZQshKE+AZdlOYkqBUI4otp
aws_session_token = FQoGZXIvYXdHEY4aDDDbLp6g5sfNojzC6CKwAV+yefPfFg7y0xADMDECoddpj9WecBEReMtXkRjCVZfbSa1604EIK2q0zshlsP0PtF0e5wBZFDuZHTI464EpSQEXkJajksWeMMOe7PSzyJOX5Zqp8ve4ItHoE70tGxIVQjA06NbvodNjjOO/gsbDAcKHW1rx9wnq3RJ+dQbqqNq01R1vrDvTjxDNTrZr2wYI2qYrd9REP+mc44EeIO+3r0iuiwxRCL1UzS/4nG4IRYG2KMeo9esF
```

### References

<!---
Information about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests

Are there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation? For example:

* https://aws.amazon.com/about-aws/whats-new/2018/04/introducing-amazon-ec2-fleet/
--->

* https://github.com/gruntwork-io/terragrunt/issues/527
",aws_secret_access_key,https://github.com/hashicorp/terraform-provider-aws
22,10110,"<!--- Please keep this note for the community --->

### Community Note

* Please vote on this issue by adding a 👍 [reaction](https://blog.github.com/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/) to the original issue to help the community and maintainers prioritize this request
* Please do not leave ""+1"" or ""me too"" comments, they generate extra noise for issue followers and do not help prioritize the request
* If you are interested in working on this issue or have submitted a pull request, please leave a comment

<!--- Thank you for keeping this note for the community --->

### Description

Here is an example of a shared credentials file configuration that is supported by the [awscli](https://docs.aws.amazon.com/en_pv/cli/latest/userguide/cli-configure-role.html)
```
# ~/.aws/credentials

[bastion] # these are fake credentials
aws_access_key_id = ASIA554SXDVIHKO5ACW2
aws_secret_access_key = VLJQKLEqs37HCDG4HgSDrxl1vLNrk9Is8gm0VNfA

[dev-spectator]
role_arn = arn:aws:iam::12345678901:role/spectator
source_profile = bastion
```

This works by caching credentials in the `~/.aws/cli/cache` directory. The awscli can read from this cache but **terraform cannot**.

you will get the following error:

```
Error initializing session: SharedConfigAssumeRoleError: failed to load assume role for arn:aws:iam::12345678901:role/spectator, source profile has no shared credentials
```

### Work around

In order to support terraform, you will need something like:

```
# ~/.aws/credentials

[bastion] # these are fake credentials
aws_access_key_id = ASIA554SXDVIHKO5ACW2
aws_secret_access_key = VLJQKLEqs37HCDG4HgSDrxl1vLNrk9Is8gm0VNfA

[dev-spectator] # these are also fake credentials
role_arn = arn:aws:iam::12345678901:role/spectator
source_profile = bastion
aws_access_key_id = ASIA554SXXVIYYQRGGER
aws_secret_access_key = aw5/hbwzGP31s2lfC3ZQshKE+AZdlOYkqBUI4otp
aws_session_token = FQoGZXIvYXdHEY4aDDDbLp6g5sfNojzC6CKwAV+yefPfFg7y0xADMDECoddpj9WecBEReMtXkRjCVZfbSa1604EIK2q0zshlsP0PtF0e5wBZFDuZHTI464EpSQEXkJajksWeMMOe7PSzyJOX5Zqp8ve4ItHoE70tGxIVQjA06NbvodNjjOO/gsbDAcKHW1rx9wnq3RJ+dQbqqNq01R1vrDvTjxDNTrZr2wYI2qYrd9REP+mc44EeIO+3r0iuiwxRCL1UzS/4nG4IRYG2KMeo9esF
```

### References

<!---
Information about referencing Github Issues: https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests

Are there any other GitHub issues (open or closed) or pull requests that should be linked here? Vendor blog posts or documentation? For example:

* https://aws.amazon.com/about-aws/whats-new/2018/04/introducing-amazon-ec2-fleet/
--->

* https://github.com/gruntwork-io/terragrunt/issues/527
",12345678901:role,https://github.com/hashicorp/terraform-provider-aws
23,4359,"# Terraform Version

Terraform v0.11.6
provider.aws v1.16.0

# Affected Resource(s)
aws_instance_ec2
# Terraform Configuration Files
module ""docdb"" {
  source = ""../../../../../../tradeshift-puppet/terraform/modules/aws/instances-cn/riak""
  environment = ""${var.pull_request}""
  stackname = ""${var.stackname}""
  role = ""docdb""
  owner = ""${var.owner}""
  decomission_date = ""${var.decomission_date}""
  instance_type = ""t2.large""
  instance_ami = ""${module.regional-common.base_ami_1604}""
  instance_key_name = ""${module.regional-common.key_name}""
  disable_api_termination = false
  ebs_volume_size = ""100""
  ebs_delete_on_termination = ""false""
  ebs_optimized = false
  vpc_security_groups = ""${data.terraform_remote_state.security_groups.stack_it_run_access_sg_id}""
  vpc_subnets = ""${data.terraform_remote_state.vpc.private_subnets}""
  postfix = "".${var.stackname}""
  dns_region_name = ""${module.regional-common.region_dns}""
  disk_encryption_key = ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx""
  count = ""1""
  cert_name = ""${module.environment-common.cert_name}""
}

# Debug Output
```
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 200 OK
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: text/xml;charset=UTF-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:36 GMT
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Vary: Accept-Encoding
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <DescribeInstanceAttributeResponse xmlns=""http://ec2.amazonaws.com/doc/2016-11-15/"">
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <requestId>35e6cd4e-cb70-4016-a250-53f0880cc9be</requestId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <instanceId>i-022a9894321a6d374</instanceId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:         <value>I2Nsb3VkLWNvbmZpZwptb3VudHM6CiAtIFtlcGhlbWVyYWwwLCBudWxsXQoKcHJlc2VydmVfaG9zdG5hbWU6IHRydWUKbWFuYWdlX2V0Y19ob3N0czogZmFsc2UKCmJvb3RjbWQ6CiAtICJlY2hvIHBheSA+IC9ldGMvdHJhZGVzaGlmdC9zdGFja25hbWUiCiAtICJlY2hvIGRvY2RiLSRJTlNUQU5DRV9JRCA+IC9ldGMvaG9zdG5hbWU7IGhvc3RuYW1lIC1GIC9ldGMvaG9zdG5hbWUiCiAtICJzZWQgLWkgLWUgJy9eMTI3LjAuMC4xL2QnIC9ldGMvaG9zdHM7IGVjaG8gMTI3LjAuMC4xIGRvY2RiLSRJTlNUQU5DRV9JRC5jbi1ub3J0aHdlc3QtMS50ZXN0LmJ3dHNpLmNuIGRvY2RiLSRJTlNUQU5DRV9JRCBsb2NhbGhvc3QgPj4gL2V0Yy9ob3N0cyIKICMgRGlzayBlbmNyeXB0aW9uIGtleSBmb3IgZXBoZW1lcmFsIGRpc2sgZHJpdmVzLCBzYXZlZCB0byByYW0gZHJpdmUKICMgVGhlIHNlZCBwYXJ0IHJlbW92ZXMgdGhlIChzdGRpbik9IG91dHB1dCBmcm9tIG9wZW5zc2wgZGdzdAogLSAiZWNobyAkSU5TVEFOQ0VfSUQgfCBvcGVuc3NsIGRnc3QgLXNoYTI1NiAtaG1hYyAnZHI2OVpVR1ZtMEVwMUVvL3hCb09UY2VmdUtWeCcgfCBzZWQgJ3MvXi4qPSAvLycgPiAvZGV2L3NobS9lbmNyeXB0ZWQtZGlzay5sdWtzLmtleSAmJiBjaG1vZCA0MDAgL2Rldi9zaG0vZW5jcnlwdGVkLWRpc2subHVrcy5rZXkiCgojIERvbid0IG92ZXJyaWRlIG91ciBhcHQgcmVwb3NpdG9yeSBsaXN0IG9uIGZpcnN0IGJvb3QKYXB0X3ByZXNlcnZlX3NvdXJjZXNfbGlzdDogdHJ1ZQoKIyBEb24ndCBwcmludCB0aGUgbmV3IHNzaCBrZXlzIG9uIHRoZSBjb25zb2xlCm5vX3NzaF9maW5nZXJwcmludHM6IHRydWUKCndyaXRlX2ZpbGVzOgogLSBwYXRoOiAvZXRjL3B1cHBldGxhYnMvcHVwcGV0L3B1cHBldC5jb25mCiAgIG93bmVyOiByb290OnJvb3QKICAgcGVybWlzc2lvbnM6ICcwNDQ0JwogICBjb250ZW50OiB8CiAgICAgW21haW5dCiAgICAgY2VydG5hbWUgPSBiYXNlLnRlc3RpbmcuYnd0c2kuY24KICAgICBlbnZpcm9ubWVudCA9IGNoaW5hcGF5CiAgICAgW2FnZW50XQogICAgIHJ1bmludGVydmFsID0gMTAweQogICAgIHNlcnZlciA9IHB1cHBldC5id3RzaS5jbgogICAgIG5vZGVfbmFtZSA9IGZhY3RlcgogICAgIG5vZGVfbmFtZV9mYWN0ID0gZnFkbgogICAgIHNwbGF5ID0gdHJ1ZQogICAgIHNwbGF5bGltaXQgPSA1bQo=</value>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     </userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: </DescribeInstanceAttributeResponse>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] DEBUG: Request ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ REQUEST POST-SIGN ]-----------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: POST / HTTP/1.1
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Host: ec2.cn-northwest-1.amazonaws.com.cn
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: User-Agent: aws-sdk-go/1.13.32 (go1.9.2; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.7
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Length: 95
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/ec2/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-security-token, Signature=60ac431f06b221bf7fe6d53ee72de1babb1aad5a5a4d17917e4d2f78a7533fef
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: application/x-www-form-urlencoded; charset=utf-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Date: 20180426T110036Z
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Accept-Encoding: gzip
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Action=DescribeInstanceCreditSpecifications&InstanceId.1=i-022a9894321a6d374&Version=2016-11-15
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Response ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 400 Bad Request
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:37 GMT
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <Response><Errors><Error><Code>UnsupportedOperation</Code><Message>The functionality you requested is not available in this region.</Message></Error></Errors><RequestID>53ace3cc-2597-49a0-99b2-3b9f1cb8567d</RequestID></Response>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Validate Response ec2/DescribeInstanceCreditSpecifications failed, not retrying, error UnsupportedOperation: The functionality you requested is not available in this region.
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalApplyPost, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalSequence, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [DEBUG] Uploading remote state to S3: {
  Body: buffer(0xc4203e17d0),
  Bucket: ""bwts-terraform-bucket-chinapay"",
  ContentLength: 20792,
  ContentType: ""application/json"",
  Key: ""cn-northwest-1/riak/terraform.tfstate"",
  ServerSideEncryption: ""AES256""
}
2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Request s3/PutObject Details:
---[ REQUEST POST-SIGN ]-----------------------------
PUT /cn-northwest-1/riak/terraform.tfstate HTTP/1.1
Host: bwts-terraform-bucket-chinapay.s3.cn-northwest-1.amazonaws.com.cn
User-Agent: aws-sdk-go/1.12.75 (go1.10.1; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.6
Content-Length: 20792
Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/s3/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-content-sha256;x-amz-date;x-amz-security-token;x-amz-server-side-encryption, Signature=8aa16110ae06a99b503e1f0546a4d6cf208fdf658ca29420baa2d649cec043e2
Content-Type: application/json
X-Amz-Content-Sha256: 04110e3e4cd97aa3e89cfe2f03487922bfd6b6346ec6dfe3fbe8fad9755e18c2
X-Amz-Date: 20180426T110037Z
X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
X-Amz-Server-Side-Encryption: AES256
Accept-Encoding: gzip

{
    ""version"": 3,
    ""terraform_version"": ""0.11.6"",
    ""serial"": 1,
    ""lineage"": ""b9c3c084-789e-7472-0b18-8698b4afc854"",
    ""modules"": [
        {
            ""path"": [
                ""root""
            ],
            ""outputs"": {},
            ""resources"": {
                ""data.terraform_remote_state.security_groups"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""bastion_host"": ""sg-e29feb8b"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/dev-stack-sgs/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""external_lb_sg_id"": ""sg-a55027cc"",
                            ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                            ""rundeck"": ""sg-b39eeada"",
                            ""stack_it_run_access_sg_id"": ""sg-9d5f28f4"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                },
                ""data.terraform_remote_state.vpc"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/vpc/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                            ""private_subnets"": ""subnet-454c962c,subnet-9722ddec"",
                            ""public_subnets"": ""subnet-5e4d9737,subnet-9022ddeb"",
                            ""vpc_cidr"": ""192.168.0.0/19"",
                            ""vpc_id"": ""vpc-34c61f5d"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""docdb""
            ],
            ""outputs"": {},
            ""resources"": {
                ""aws_instance.riak"": {
                    ""type"": ""aws_instance"",
                    ""depends_on"": [
                        ""data.template_file.cloud-init-riak""
                    ],
                    ""primary"": {
                        ""id"": ""i-022a9894321a6d374"",
                        ""attributes"": {
                            ""ami"": ""ami-6ec1d50c"",
                            ""associate_public_ip_address"": ""false"",
                            ""availability_zone"": ""cn-northwest-1a"",
                            ""disable_api_termination"": ""false"",
                            ""ebs_block_device.#"": ""4"",
                            ""ebs_block_device.3965576335.delete_on_termination"": ""false"",
                            ""ebs_block_device.3965576335.device_name"": ""/dev/xvdd"",
                            ""ebs_block_device.3965576335.encrypted"": ""false"",
                            ""ebs_block_device.3965576335.iops"": ""300"",
                            ""ebs_block_device.3965576335.snapshot_id"": """",
                            ""ebs_block_device.3965576335.volume_id"": ""vol-09cde364159031c5d"",
                            ""ebs_block_device.3965576335.volume_size"": ""100"",
                            ""ebs_block_device.3965576335.volume_type"": ""gp2"",
                            ""ebs_block_device.3986656952.delete_on_termination"": ""false"",
                            ""ebs_block_device.3986656952.device_name"": ""/dev/xvde"",
                            ""ebs_block_device.3986656952.encrypted"": ""false"",
                            ""ebs_block_device.3986656952.iops"": ""300"",
                            ""ebs_block_device.3986656952.snapshot_id"": """",
                            ""ebs_block_device.3986656952.volume_id"": ""vol-09c14e768bdd6dd4b"",
                            ""ebs_block_device.3986656952.volume_size"": ""100"",
                            ""ebs_block_device.3986656952.volume_type"": ""gp2"",
                            ""ebs_block_device.3994770134.delete_on_termination"": ""false"",
                            ""ebs_block_device.3994770134.device_name"": ""/dev/xvdg"",
                            ""ebs_block_device.3994770134.encrypted"": ""false"",
                            ""ebs_block_device.3994770134.iops"": ""300"",
                            ""ebs_block_device.3994770134.snapshot_id"": """",
                            ""ebs_block_device.3994770134.volume_id"": ""vol-0e1b3ff63114f3003"",
                            ""ebs_block_device.3994770134.volume_size"": ""100"",
                            ""ebs_block_device.3994770134.volume_type"": ""gp2"",
                            ""ebs_block_device.4023988449.delete_on_termination"": ""false"",
                            ""ebs_block_device.4023988449.device_name"": ""/dev/xvdf"",
                            ""ebs_block_device.4023988449.encrypted"": ""false"",
                            ""ebs_block_device.4023988449.iops"": ""300"",
                            ""ebs_block_device.4023988449.snapshot_id"": """",
                            ""ebs_block_device.4023988449.volume_id"": ""vol-015467a2fec64cfdd"",
                            ""ebs_block_device.4023988449.volume_size"": ""100"",
                            ""ebs_block_device.4023988449.volume_type"": ""gp2"",
                            ""ebs_optimized"": ""false"",
                            ""ephemeral_block_device.#"": ""0"",
                            ""get_password_data"": ""false"",
                            ""iam_instance_profile"": """",
                            ""id"": ""i-022a9894321a6d374"",
                            ""instance_state"": ""running"",
                            ""instance_type"": ""t2.large"",
                            ""ipv6_addresses.#"": ""0"",
                            ""key_name"": ""pay_china"",
                            ""monitoring"": ""false"",
                            ""network_interface.#"": ""0"",
                            ""network_interface_id"": ""eni-fd55c3a4"",
                            ""placement_group"": """",
                            ""primary_network_interface_id"": ""eni-fd55c3a4"",
                            ""private_dns"": ""ip-192-168-14-135.cn-northwest-1.compute.internal"",
                            ""private_ip"": ""192.168.14.135"",
                            ""public_dns"": """",
                            ""public_ip"": """",
                            ""root_block_device.#"": ""1"",
                            ""root_block_device.0.delete_on_termination"": ""true"",
                            ""root_block_device.0.iops"": ""100"",
                            ""root_block_device.0.volume_id"": ""vol-0884c92d17ea04d83"",
                            ""root_block_device.0.volume_size"": ""20"",
                            ""root_block_device.0.volume_type"": ""gp2"",
                            ""security_groups.#"": ""0"",
                            ""source_dest_check"": ""true"",
                            ""subnet_id"": ""subnet-454c962c"",
                            ""tags.%"": ""9"",
                            ""tags.Decomission_Date"": ""never"",
                            ""tags.Environment"": ""chinapay"",
                            ""tags.Name"": ""docdb.pay.cn-northwest-1.test.bwtsi.cn"",
                            ""tags.Owner"": ""operations"",
                            ""tags.Purpose"": ""Riak instance"",
                            ""tags.Role"": ""docdb"",
                            ""tags.Stackname"": ""pay"",
                            ""tags.Started_By"": ""operations"",
                            ""tags.Warning"": ""Managed by terraform, do not edit"",
                            ""tenancy"": ""default"",
                            ""user_data"": ""f35050bdeefa2a2d9f354c0e699a5f2d7c393365"",
                            ""volume_tags.%"": ""0"",
                            ""vpc_security_group_ids.#"": ""1"",
                            ""vpc_security_group_ids.2301982502"": ""sg-9d5f28f4""
                        },
                        ""meta"": {
                            ""e2bfb730-ecaa-11e6-8f88-34363bc7c4c0"": {
                                ""create"": 600000000000,
                                ""delete"": 1200000000000,
                                ""update"": 600000000000
                            },
                            ""schema_version"": ""1""
                        },
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.aws""
                },
                ""data.template_file.cloud-init-riak"": {
                    ""type"": ""template_file"",
                    ""depends_on"": [],
                    ""primary"": {
                        ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                        ""attributes"": {
                            ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                            ""rendered"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo pay \u003e /etc/tradeshift/stackname\""\n - \""echo docdb-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 docdb-$INSTANCE_ID.cn-northwest-1.test.bwtsi.cn docdb-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac 'dr69ZUGVm0Ep1Eo/xBoOTcefuKVx' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = base.testing.bwtsi.cn\n     environment = chinapay\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""template"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo ${STACK_NAME} \u003e /etc/tradeshift/stackname\""\n - \""echo ${HOSTNAME}-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 ${HOSTNAME}-$INSTANCE_ID.${REGION_DNS} ${HOSTNAME}-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac '${DISK_ENCRYPTION_KEY}' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = ${CERT_NAME}\n     environment = ${ENVIRONMENT}\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""vars.%"": ""6"",
                            ""vars.CERT_NAME"": ""base.testing.bwtsi.cn"",
                            ""vars.DISK_ENCRYPTION_KEY"": ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx"",
                            ""vars.ENVIRONMENT"": ""chinapay"",
                            ""vars.HOSTNAME"": ""docdb"",
                            ""vars.REGION_DNS"": ""cn-northwest-1.test.bwtsi.cn"",
                            ""vars.STACK_NAME"": ""pay""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.template""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""environment-common""
            ],
            ""outputs"": {
                ""cert_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""base.testing.bwtsi.cn""
                },
                ""domain_name_search"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test.bwtsi.cn""
                },
                ""environment_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""chinapay""
                },
                ""environment_shortname"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                },
                ""security_group_name_postfix"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": "".chinapay""
                },
                ""site"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""global-common""
            ],
            ""outputs"": {
                ""all_cidr_eu_west_1"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16,172.25.128.0/21,172.25.120.0/21,172.25.112.0/21,172.31.248.0/21,172.31.240.0/21,172.21.0.0/19,172.19.0.0/19,172.22.0.0/19,172.18.0.0/19""
                },
                ""base_tradeshift_net_account_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""694518486591""
                },
                ""gcsops_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.17.22.143/32""
                },
                ""gcsops_cn_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""54.223.95.7/32,54.223.198.170/32,54.223.211.136/32,52.80.34.103/32""
                },
                ""office_ips"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,178.49.148.100/32,87.243.3.34/32,109.166.189.50/32,78.40.84.83/32,4.53.137.82/32,173.247.199.142/32,58.211.225.90/32,202.181.248.19/32,109.70.48.99/32""
                },
                ""prod_base_tradeshift_net_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""prod.base.tradeshift.net""
                },
                ""prod_base_tradeshift_net_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16""
                },
                ""prod_base_tradeshift_net_vpc_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""vpc-264c9042""
                },
                ""prod_ts_sv_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.50.175.210/32,52.30.44.136/32,52.50.189.21/32""
                },
                ""test_bwtsi_cn_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/19""
                },
                ""test_bwtsi_cn_vpc_private_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.12.0/22,192.168.16.0/22""
                },
                ""test_bwtsi_cn_vpc_public_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/22,192.168.4.0/22""
                },
                ""tradeshift_com_public_zone_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""Z2OX0I8SM94425""
                },
                ""translation_service_clients"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,4.53.137.82/32,173.247.199.142/32,130.185.137.106/32,202.181.248.19/32,52.17.87.187/32,52.30.44.136/32,52.30.58.232/32,52.31.203.95/32,52.49.119.80/32,52.49.49.111/32,52.49.5.171/32,52.50.108.6/32,52.50.175.210/32,52.50.189.21/32,52.50.255.154/32,52.50.91.189/32,54.195.199.108/32,54.78.39.106/32,58.211.225.90/32,89.150.143.118/32,54.222.150.122/32,54.222.194.56/32,109.70.48.99/32""
                },
                ""truebn_org_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""34.253.176.198/32,34.241.59.39/32""
                },
                ""userdata_path"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/modules/eff596488a3055adf7024741dffb9ca1/..""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""regional-common""
            ],
            ""outputs"": {
                ""availability_zones"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1a,cn-northwest-1b""
                },
                ""backend_region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""base_ami_1604"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-6ec1d50c""
                },
                ""base_ami_1604_zfs"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-edf8ec8f""
                },
                ""chinapay_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""key_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""pay_china""
                },
                ""region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""region_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""region_env"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        }
    ]
}

-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go] DEBUG: Response s3/PutObject Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 200 OK
Connection: close
Content-Length: 0
Date: Thu, 26 Apr 2018 11:00:39 GMT
Etag: ""807c608ab629b9b73914da058c923c20""
Server: AmazonS3
X-Amz-Id-2: 5Af+DuU/y0Ngtkb6wCq1R0Oz+ZrOYi4apbPsCZTSlwhSqnqBNB64rFL4HfBG6WB9GETdRmQyKnw=
X-Amz-Request-Id: 7984823D8787C039
X-Amz-Server-Side-Encryption: AES256


-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go]
2018/04/26 19:00:38 [DEBUG] plugin: waiting for all plugin processes to complete...

Error: Error applying plan:

1 error(s) occurred:

* module.docdb.aws_instance.riak: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d

2018-04-26T19:00:38.547+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:38 [ERR] plugin: plugin server: accept unix /var/folders/k0/hk5r4k696x901sk4mh_vwcg40000gn/T/plugin243311916: use of closed network connection
Terraform does not automatically rollback in the face of errors.
Instead, your Terraform state file has been partially updated with
any resources that successfully completed. Please address the error
above and apply again to incrementally change your infrastructure.


2018-04-26T19:00:38.550+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-template_v1.0.0_x4
2018-04-26T19:00:38.551+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-aws_v1.16.0_x4
2018-04-26T19:00:38.555+0800 [DEBUG] plugin: plugin process exited: path=/usr/local/bin/terraform-provider-alicloud

```
# Expected Behavior
can create aws instance in China AWS
# Actual Behavior
I can create aws instance in China AWS with provider.aws v1.15.0
but I can't create aws instance with provider.aws v1.16.0",b9c3c084-789e-7472-0b18-8698b4afc854,https://github.com/hashicorp/terraform-provider-aws
24,4359,"# Terraform Version

Terraform v0.11.6
provider.aws v1.16.0

# Affected Resource(s)
aws_instance_ec2
# Terraform Configuration Files
module ""docdb"" {
  source = ""../../../../../../tradeshift-puppet/terraform/modules/aws/instances-cn/riak""
  environment = ""${var.pull_request}""
  stackname = ""${var.stackname}""
  role = ""docdb""
  owner = ""${var.owner}""
  decomission_date = ""${var.decomission_date}""
  instance_type = ""t2.large""
  instance_ami = ""${module.regional-common.base_ami_1604}""
  instance_key_name = ""${module.regional-common.key_name}""
  disable_api_termination = false
  ebs_volume_size = ""100""
  ebs_delete_on_termination = ""false""
  ebs_optimized = false
  vpc_security_groups = ""${data.terraform_remote_state.security_groups.stack_it_run_access_sg_id}""
  vpc_subnets = ""${data.terraform_remote_state.vpc.private_subnets}""
  postfix = "".${var.stackname}""
  dns_region_name = ""${module.regional-common.region_dns}""
  disk_encryption_key = ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx""
  count = ""1""
  cert_name = ""${module.environment-common.cert_name}""
}

# Debug Output
```
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 200 OK
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: text/xml;charset=UTF-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:36 GMT
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Vary: Accept-Encoding
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <DescribeInstanceAttributeResponse xmlns=""http://ec2.amazonaws.com/doc/2016-11-15/"">
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <requestId>35e6cd4e-cb70-4016-a250-53f0880cc9be</requestId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <instanceId>i-022a9894321a6d374</instanceId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:         <value>I2Nsb3VkLWNvbmZpZwptb3VudHM6CiAtIFtlcGhlbWVyYWwwLCBudWxsXQoKcHJlc2VydmVfaG9zdG5hbWU6IHRydWUKbWFuYWdlX2V0Y19ob3N0czogZmFsc2UKCmJvb3RjbWQ6CiAtICJlY2hvIHBheSA+IC9ldGMvdHJhZGVzaGlmdC9zdGFja25hbWUiCiAtICJlY2hvIGRvY2RiLSRJTlNUQU5DRV9JRCA+IC9ldGMvaG9zdG5hbWU7IGhvc3RuYW1lIC1GIC9ldGMvaG9zdG5hbWUiCiAtICJzZWQgLWkgLWUgJy9eMTI3LjAuMC4xL2QnIC9ldGMvaG9zdHM7IGVjaG8gMTI3LjAuMC4xIGRvY2RiLSRJTlNUQU5DRV9JRC5jbi1ub3J0aHdlc3QtMS50ZXN0LmJ3dHNpLmNuIGRvY2RiLSRJTlNUQU5DRV9JRCBsb2NhbGhvc3QgPj4gL2V0Yy9ob3N0cyIKICMgRGlzayBlbmNyeXB0aW9uIGtleSBmb3IgZXBoZW1lcmFsIGRpc2sgZHJpdmVzLCBzYXZlZCB0byByYW0gZHJpdmUKICMgVGhlIHNlZCBwYXJ0IHJlbW92ZXMgdGhlIChzdGRpbik9IG91dHB1dCBmcm9tIG9wZW5zc2wgZGdzdAogLSAiZWNobyAkSU5TVEFOQ0VfSUQgfCBvcGVuc3NsIGRnc3QgLXNoYTI1NiAtaG1hYyAnZHI2OVpVR1ZtMEVwMUVvL3hCb09UY2VmdUtWeCcgfCBzZWQgJ3MvXi4qPSAvLycgPiAvZGV2L3NobS9lbmNyeXB0ZWQtZGlzay5sdWtzLmtleSAmJiBjaG1vZCA0MDAgL2Rldi9zaG0vZW5jcnlwdGVkLWRpc2subHVrcy5rZXkiCgojIERvbid0IG92ZXJyaWRlIG91ciBhcHQgcmVwb3NpdG9yeSBsaXN0IG9uIGZpcnN0IGJvb3QKYXB0X3ByZXNlcnZlX3NvdXJjZXNfbGlzdDogdHJ1ZQoKIyBEb24ndCBwcmludCB0aGUgbmV3IHNzaCBrZXlzIG9uIHRoZSBjb25zb2xlCm5vX3NzaF9maW5nZXJwcmludHM6IHRydWUKCndyaXRlX2ZpbGVzOgogLSBwYXRoOiAvZXRjL3B1cHBldGxhYnMvcHVwcGV0L3B1cHBldC5jb25mCiAgIG93bmVyOiByb290OnJvb3QKICAgcGVybWlzc2lvbnM6ICcwNDQ0JwogICBjb250ZW50OiB8CiAgICAgW21haW5dCiAgICAgY2VydG5hbWUgPSBiYXNlLnRlc3RpbmcuYnd0c2kuY24KICAgICBlbnZpcm9ubWVudCA9IGNoaW5hcGF5CiAgICAgW2FnZW50XQogICAgIHJ1bmludGVydmFsID0gMTAweQogICAgIHNlcnZlciA9IHB1cHBldC5id3RzaS5jbgogICAgIG5vZGVfbmFtZSA9IGZhY3RlcgogICAgIG5vZGVfbmFtZV9mYWN0ID0gZnFkbgogICAgIHNwbGF5ID0gdHJ1ZQogICAgIHNwbGF5bGltaXQgPSA1bQo=</value>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     </userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: </DescribeInstanceAttributeResponse>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] DEBUG: Request ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ REQUEST POST-SIGN ]-----------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: POST / HTTP/1.1
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Host: ec2.cn-northwest-1.amazonaws.com.cn
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: User-Agent: aws-sdk-go/1.13.32 (go1.9.2; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.7
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Length: 95
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/ec2/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-security-token, Signature=60ac431f06b221bf7fe6d53ee72de1babb1aad5a5a4d17917e4d2f78a7533fef
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: application/x-www-form-urlencoded; charset=utf-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Date: 20180426T110036Z
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Accept-Encoding: gzip
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Action=DescribeInstanceCreditSpecifications&InstanceId.1=i-022a9894321a6d374&Version=2016-11-15
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Response ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 400 Bad Request
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:37 GMT
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <Response><Errors><Error><Code>UnsupportedOperation</Code><Message>The functionality you requested is not available in this region.</Message></Error></Errors><RequestID>53ace3cc-2597-49a0-99b2-3b9f1cb8567d</RequestID></Response>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Validate Response ec2/DescribeInstanceCreditSpecifications failed, not retrying, error UnsupportedOperation: The functionality you requested is not available in this region.
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalApplyPost, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalSequence, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [DEBUG] Uploading remote state to S3: {
  Body: buffer(0xc4203e17d0),
  Bucket: ""bwts-terraform-bucket-chinapay"",
  ContentLength: 20792,
  ContentType: ""application/json"",
  Key: ""cn-northwest-1/riak/terraform.tfstate"",
  ServerSideEncryption: ""AES256""
}
2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Request s3/PutObject Details:
---[ REQUEST POST-SIGN ]-----------------------------
PUT /cn-northwest-1/riak/terraform.tfstate HTTP/1.1
Host: bwts-terraform-bucket-chinapay.s3.cn-northwest-1.amazonaws.com.cn
User-Agent: aws-sdk-go/1.12.75 (go1.10.1; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.6
Content-Length: 20792
Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/s3/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-content-sha256;x-amz-date;x-amz-security-token;x-amz-server-side-encryption, Signature=8aa16110ae06a99b503e1f0546a4d6cf208fdf658ca29420baa2d649cec043e2
Content-Type: application/json
X-Amz-Content-Sha256: 04110e3e4cd97aa3e89cfe2f03487922bfd6b6346ec6dfe3fbe8fad9755e18c2
X-Amz-Date: 20180426T110037Z
X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
X-Amz-Server-Side-Encryption: AES256
Accept-Encoding: gzip

{
    ""version"": 3,
    ""terraform_version"": ""0.11.6"",
    ""serial"": 1,
    ""lineage"": ""b9c3c084-789e-7472-0b18-8698b4afc854"",
    ""modules"": [
        {
            ""path"": [
                ""root""
            ],
            ""outputs"": {},
            ""resources"": {
                ""data.terraform_remote_state.security_groups"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""bastion_host"": ""sg-e29feb8b"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/dev-stack-sgs/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""external_lb_sg_id"": ""sg-a55027cc"",
                            ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                            ""rundeck"": ""sg-b39eeada"",
                            ""stack_it_run_access_sg_id"": ""sg-9d5f28f4"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                },
                ""data.terraform_remote_state.vpc"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/vpc/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                            ""private_subnets"": ""subnet-454c962c,subnet-9722ddec"",
                            ""public_subnets"": ""subnet-5e4d9737,subnet-9022ddeb"",
                            ""vpc_cidr"": ""192.168.0.0/19"",
                            ""vpc_id"": ""vpc-34c61f5d"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""docdb""
            ],
            ""outputs"": {},
            ""resources"": {
                ""aws_instance.riak"": {
                    ""type"": ""aws_instance"",
                    ""depends_on"": [
                        ""data.template_file.cloud-init-riak""
                    ],
                    ""primary"": {
                        ""id"": ""i-022a9894321a6d374"",
                        ""attributes"": {
                            ""ami"": ""ami-6ec1d50c"",
                            ""associate_public_ip_address"": ""false"",
                            ""availability_zone"": ""cn-northwest-1a"",
                            ""disable_api_termination"": ""false"",
                            ""ebs_block_device.#"": ""4"",
                            ""ebs_block_device.3965576335.delete_on_termination"": ""false"",
                            ""ebs_block_device.3965576335.device_name"": ""/dev/xvdd"",
                            ""ebs_block_device.3965576335.encrypted"": ""false"",
                            ""ebs_block_device.3965576335.iops"": ""300"",
                            ""ebs_block_device.3965576335.snapshot_id"": """",
                            ""ebs_block_device.3965576335.volume_id"": ""vol-09cde364159031c5d"",
                            ""ebs_block_device.3965576335.volume_size"": ""100"",
                            ""ebs_block_device.3965576335.volume_type"": ""gp2"",
                            ""ebs_block_device.3986656952.delete_on_termination"": ""false"",
                            ""ebs_block_device.3986656952.device_name"": ""/dev/xvde"",
                            ""ebs_block_device.3986656952.encrypted"": ""false"",
                            ""ebs_block_device.3986656952.iops"": ""300"",
                            ""ebs_block_device.3986656952.snapshot_id"": """",
                            ""ebs_block_device.3986656952.volume_id"": ""vol-09c14e768bdd6dd4b"",
                            ""ebs_block_device.3986656952.volume_size"": ""100"",
                            ""ebs_block_device.3986656952.volume_type"": ""gp2"",
                            ""ebs_block_device.3994770134.delete_on_termination"": ""false"",
                            ""ebs_block_device.3994770134.device_name"": ""/dev/xvdg"",
                            ""ebs_block_device.3994770134.encrypted"": ""false"",
                            ""ebs_block_device.3994770134.iops"": ""300"",
                            ""ebs_block_device.3994770134.snapshot_id"": """",
                            ""ebs_block_device.3994770134.volume_id"": ""vol-0e1b3ff63114f3003"",
                            ""ebs_block_device.3994770134.volume_size"": ""100"",
                            ""ebs_block_device.3994770134.volume_type"": ""gp2"",
                            ""ebs_block_device.4023988449.delete_on_termination"": ""false"",
                            ""ebs_block_device.4023988449.device_name"": ""/dev/xvdf"",
                            ""ebs_block_device.4023988449.encrypted"": ""false"",
                            ""ebs_block_device.4023988449.iops"": ""300"",
                            ""ebs_block_device.4023988449.snapshot_id"": """",
                            ""ebs_block_device.4023988449.volume_id"": ""vol-015467a2fec64cfdd"",
                            ""ebs_block_device.4023988449.volume_size"": ""100"",
                            ""ebs_block_device.4023988449.volume_type"": ""gp2"",
                            ""ebs_optimized"": ""false"",
                            ""ephemeral_block_device.#"": ""0"",
                            ""get_password_data"": ""false"",
                            ""iam_instance_profile"": """",
                            ""id"": ""i-022a9894321a6d374"",
                            ""instance_state"": ""running"",
                            ""instance_type"": ""t2.large"",
                            ""ipv6_addresses.#"": ""0"",
                            ""key_name"": ""pay_china"",
                            ""monitoring"": ""false"",
                            ""network_interface.#"": ""0"",
                            ""network_interface_id"": ""eni-fd55c3a4"",
                            ""placement_group"": """",
                            ""primary_network_interface_id"": ""eni-fd55c3a4"",
                            ""private_dns"": ""ip-192-168-14-135.cn-northwest-1.compute.internal"",
                            ""private_ip"": ""192.168.14.135"",
                            ""public_dns"": """",
                            ""public_ip"": """",
                            ""root_block_device.#"": ""1"",
                            ""root_block_device.0.delete_on_termination"": ""true"",
                            ""root_block_device.0.iops"": ""100"",
                            ""root_block_device.0.volume_id"": ""vol-0884c92d17ea04d83"",
                            ""root_block_device.0.volume_size"": ""20"",
                            ""root_block_device.0.volume_type"": ""gp2"",
                            ""security_groups.#"": ""0"",
                            ""source_dest_check"": ""true"",
                            ""subnet_id"": ""subnet-454c962c"",
                            ""tags.%"": ""9"",
                            ""tags.Decomission_Date"": ""never"",
                            ""tags.Environment"": ""chinapay"",
                            ""tags.Name"": ""docdb.pay.cn-northwest-1.test.bwtsi.cn"",
                            ""tags.Owner"": ""operations"",
                            ""tags.Purpose"": ""Riak instance"",
                            ""tags.Role"": ""docdb"",
                            ""tags.Stackname"": ""pay"",
                            ""tags.Started_By"": ""operations"",
                            ""tags.Warning"": ""Managed by terraform, do not edit"",
                            ""tenancy"": ""default"",
                            ""user_data"": ""f35050bdeefa2a2d9f354c0e699a5f2d7c393365"",
                            ""volume_tags.%"": ""0"",
                            ""vpc_security_group_ids.#"": ""1"",
                            ""vpc_security_group_ids.2301982502"": ""sg-9d5f28f4""
                        },
                        ""meta"": {
                            ""e2bfb730-ecaa-11e6-8f88-34363bc7c4c0"": {
                                ""create"": 600000000000,
                                ""delete"": 1200000000000,
                                ""update"": 600000000000
                            },
                            ""schema_version"": ""1""
                        },
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.aws""
                },
                ""data.template_file.cloud-init-riak"": {
                    ""type"": ""template_file"",
                    ""depends_on"": [],
                    ""primary"": {
                        ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                        ""attributes"": {
                            ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                            ""rendered"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo pay \u003e /etc/tradeshift/stackname\""\n - \""echo docdb-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 docdb-$INSTANCE_ID.cn-northwest-1.test.bwtsi.cn docdb-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac 'dr69ZUGVm0Ep1Eo/xBoOTcefuKVx' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = base.testing.bwtsi.cn\n     environment = chinapay\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""template"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo ${STACK_NAME} \u003e /etc/tradeshift/stackname\""\n - \""echo ${HOSTNAME}-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 ${HOSTNAME}-$INSTANCE_ID.${REGION_DNS} ${HOSTNAME}-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac '${DISK_ENCRYPTION_KEY}' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = ${CERT_NAME}\n     environment = ${ENVIRONMENT}\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""vars.%"": ""6"",
                            ""vars.CERT_NAME"": ""base.testing.bwtsi.cn"",
                            ""vars.DISK_ENCRYPTION_KEY"": ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx"",
                            ""vars.ENVIRONMENT"": ""chinapay"",
                            ""vars.HOSTNAME"": ""docdb"",
                            ""vars.REGION_DNS"": ""cn-northwest-1.test.bwtsi.cn"",
                            ""vars.STACK_NAME"": ""pay""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.template""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""environment-common""
            ],
            ""outputs"": {
                ""cert_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""base.testing.bwtsi.cn""
                },
                ""domain_name_search"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test.bwtsi.cn""
                },
                ""environment_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""chinapay""
                },
                ""environment_shortname"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                },
                ""security_group_name_postfix"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": "".chinapay""
                },
                ""site"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""global-common""
            ],
            ""outputs"": {
                ""all_cidr_eu_west_1"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16,172.25.128.0/21,172.25.120.0/21,172.25.112.0/21,172.31.248.0/21,172.31.240.0/21,172.21.0.0/19,172.19.0.0/19,172.22.0.0/19,172.18.0.0/19""
                },
                ""base_tradeshift_net_account_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""694518486591""
                },
                ""gcsops_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.17.22.143/32""
                },
                ""gcsops_cn_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""54.223.95.7/32,54.223.198.170/32,54.223.211.136/32,52.80.34.103/32""
                },
                ""office_ips"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,178.49.148.100/32,87.243.3.34/32,109.166.189.50/32,78.40.84.83/32,4.53.137.82/32,173.247.199.142/32,58.211.225.90/32,202.181.248.19/32,109.70.48.99/32""
                },
                ""prod_base_tradeshift_net_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""prod.base.tradeshift.net""
                },
                ""prod_base_tradeshift_net_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16""
                },
                ""prod_base_tradeshift_net_vpc_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""vpc-264c9042""
                },
                ""prod_ts_sv_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.50.175.210/32,52.30.44.136/32,52.50.189.21/32""
                },
                ""test_bwtsi_cn_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/19""
                },
                ""test_bwtsi_cn_vpc_private_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.12.0/22,192.168.16.0/22""
                },
                ""test_bwtsi_cn_vpc_public_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/22,192.168.4.0/22""
                },
                ""tradeshift_com_public_zone_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""Z2OX0I8SM94425""
                },
                ""translation_service_clients"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,4.53.137.82/32,173.247.199.142/32,130.185.137.106/32,202.181.248.19/32,52.17.87.187/32,52.30.44.136/32,52.30.58.232/32,52.31.203.95/32,52.49.119.80/32,52.49.49.111/32,52.49.5.171/32,52.50.108.6/32,52.50.175.210/32,52.50.189.21/32,52.50.255.154/32,52.50.91.189/32,54.195.199.108/32,54.78.39.106/32,58.211.225.90/32,89.150.143.118/32,54.222.150.122/32,54.222.194.56/32,109.70.48.99/32""
                },
                ""truebn_org_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""34.253.176.198/32,34.241.59.39/32""
                },
                ""userdata_path"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/modules/eff596488a3055adf7024741dffb9ca1/..""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""regional-common""
            ],
            ""outputs"": {
                ""availability_zones"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1a,cn-northwest-1b""
                },
                ""backend_region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""base_ami_1604"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-6ec1d50c""
                },
                ""base_ami_1604_zfs"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-edf8ec8f""
                },
                ""chinapay_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""key_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""pay_china""
                },
                ""region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""region_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""region_env"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        }
    ]
}

-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go] DEBUG: Response s3/PutObject Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 200 OK
Connection: close
Content-Length: 0
Date: Thu, 26 Apr 2018 11:00:39 GMT
Etag: ""807c608ab629b9b73914da058c923c20""
Server: AmazonS3
X-Amz-Id-2: 5Af+DuU/y0Ngtkb6wCq1R0Oz+ZrOYi4apbPsCZTSlwhSqnqBNB64rFL4HfBG6WB9GETdRmQyKnw=
X-Amz-Request-Id: 7984823D8787C039
X-Amz-Server-Side-Encryption: AES256


-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go]
2018/04/26 19:00:38 [DEBUG] plugin: waiting for all plugin processes to complete...

Error: Error applying plan:

1 error(s) occurred:

* module.docdb.aws_instance.riak: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d

2018-04-26T19:00:38.547+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:38 [ERR] plugin: plugin server: accept unix /var/folders/k0/hk5r4k696x901sk4mh_vwcg40000gn/T/plugin243311916: use of closed network connection
Terraform does not automatically rollback in the face of errors.
Instead, your Terraform state file has been partially updated with
any resources that successfully completed. Please address the error
above and apply again to incrementally change your infrastructure.


2018-04-26T19:00:38.550+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-template_v1.0.0_x4
2018-04-26T19:00:38.551+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-aws_v1.16.0_x4
2018-04-26T19:00:38.555+0800 [DEBUG] plugin: plugin process exited: path=/usr/local/bin/terraform-provider-alicloud

```
# Expected Behavior
can create aws instance in China AWS
# Actual Behavior
I can create aws instance in China AWS with provider.aws v1.15.0
but I can't create aws instance with provider.aws v1.16.0",35e6cd4e-cb70-4016-a250-53f0880cc9be,https://github.com/hashicorp/terraform-provider-aws
25,4359,"# Terraform Version

Terraform v0.11.6
provider.aws v1.16.0

# Affected Resource(s)
aws_instance_ec2
# Terraform Configuration Files
module ""docdb"" {
  source = ""../../../../../../tradeshift-puppet/terraform/modules/aws/instances-cn/riak""
  environment = ""${var.pull_request}""
  stackname = ""${var.stackname}""
  role = ""docdb""
  owner = ""${var.owner}""
  decomission_date = ""${var.decomission_date}""
  instance_type = ""t2.large""
  instance_ami = ""${module.regional-common.base_ami_1604}""
  instance_key_name = ""${module.regional-common.key_name}""
  disable_api_termination = false
  ebs_volume_size = ""100""
  ebs_delete_on_termination = ""false""
  ebs_optimized = false
  vpc_security_groups = ""${data.terraform_remote_state.security_groups.stack_it_run_access_sg_id}""
  vpc_subnets = ""${data.terraform_remote_state.vpc.private_subnets}""
  postfix = "".${var.stackname}""
  dns_region_name = ""${module.regional-common.region_dns}""
  disk_encryption_key = ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx""
  count = ""1""
  cert_name = ""${module.environment-common.cert_name}""
}

# Debug Output
```
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 200 OK
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: text/xml;charset=UTF-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:36 GMT
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Vary: Accept-Encoding
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <DescribeInstanceAttributeResponse xmlns=""http://ec2.amazonaws.com/doc/2016-11-15/"">
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <requestId>35e6cd4e-cb70-4016-a250-53f0880cc9be</requestId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <instanceId>i-022a9894321a6d374</instanceId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:         <value>I2Nsb3VkLWNvbmZpZwptb3VudHM6CiAtIFtlcGhlbWVyYWwwLCBudWxsXQoKcHJlc2VydmVfaG9zdG5hbWU6IHRydWUKbWFuYWdlX2V0Y19ob3N0czogZmFsc2UKCmJvb3RjbWQ6CiAtICJlY2hvIHBheSA+IC9ldGMvdHJhZGVzaGlmdC9zdGFja25hbWUiCiAtICJlY2hvIGRvY2RiLSRJTlNUQU5DRV9JRCA+IC9ldGMvaG9zdG5hbWU7IGhvc3RuYW1lIC1GIC9ldGMvaG9zdG5hbWUiCiAtICJzZWQgLWkgLWUgJy9eMTI3LjAuMC4xL2QnIC9ldGMvaG9zdHM7IGVjaG8gMTI3LjAuMC4xIGRvY2RiLSRJTlNUQU5DRV9JRC5jbi1ub3J0aHdlc3QtMS50ZXN0LmJ3dHNpLmNuIGRvY2RiLSRJTlNUQU5DRV9JRCBsb2NhbGhvc3QgPj4gL2V0Yy9ob3N0cyIKICMgRGlzayBlbmNyeXB0aW9uIGtleSBmb3IgZXBoZW1lcmFsIGRpc2sgZHJpdmVzLCBzYXZlZCB0byByYW0gZHJpdmUKICMgVGhlIHNlZCBwYXJ0IHJlbW92ZXMgdGhlIChzdGRpbik9IG91dHB1dCBmcm9tIG9wZW5zc2wgZGdzdAogLSAiZWNobyAkSU5TVEFOQ0VfSUQgfCBvcGVuc3NsIGRnc3QgLXNoYTI1NiAtaG1hYyAnZHI2OVpVR1ZtMEVwMUVvL3hCb09UY2VmdUtWeCcgfCBzZWQgJ3MvXi4qPSAvLycgPiAvZGV2L3NobS9lbmNyeXB0ZWQtZGlzay5sdWtzLmtleSAmJiBjaG1vZCA0MDAgL2Rldi9zaG0vZW5jcnlwdGVkLWRpc2subHVrcy5rZXkiCgojIERvbid0IG92ZXJyaWRlIG91ciBhcHQgcmVwb3NpdG9yeSBsaXN0IG9uIGZpcnN0IGJvb3QKYXB0X3ByZXNlcnZlX3NvdXJjZXNfbGlzdDogdHJ1ZQoKIyBEb24ndCBwcmludCB0aGUgbmV3IHNzaCBrZXlzIG9uIHRoZSBjb25zb2xlCm5vX3NzaF9maW5nZXJwcmludHM6IHRydWUKCndyaXRlX2ZpbGVzOgogLSBwYXRoOiAvZXRjL3B1cHBldGxhYnMvcHVwcGV0L3B1cHBldC5jb25mCiAgIG93bmVyOiByb290OnJvb3QKICAgcGVybWlzc2lvbnM6ICcwNDQ0JwogICBjb250ZW50OiB8CiAgICAgW21haW5dCiAgICAgY2VydG5hbWUgPSBiYXNlLnRlc3RpbmcuYnd0c2kuY24KICAgICBlbnZpcm9ubWVudCA9IGNoaW5hcGF5CiAgICAgW2FnZW50XQogICAgIHJ1bmludGVydmFsID0gMTAweQogICAgIHNlcnZlciA9IHB1cHBldC5id3RzaS5jbgogICAgIG5vZGVfbmFtZSA9IGZhY3RlcgogICAgIG5vZGVfbmFtZV9mYWN0ID0gZnFkbgogICAgIHNwbGF5ID0gdHJ1ZQogICAgIHNwbGF5bGltaXQgPSA1bQo=</value>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     </userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: </DescribeInstanceAttributeResponse>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] DEBUG: Request ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ REQUEST POST-SIGN ]-----------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: POST / HTTP/1.1
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Host: ec2.cn-northwest-1.amazonaws.com.cn
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: User-Agent: aws-sdk-go/1.13.32 (go1.9.2; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.7
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Length: 95
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/ec2/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-security-token, Signature=60ac431f06b221bf7fe6d53ee72de1babb1aad5a5a4d17917e4d2f78a7533fef
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: application/x-www-form-urlencoded; charset=utf-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Date: 20180426T110036Z
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Accept-Encoding: gzip
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Action=DescribeInstanceCreditSpecifications&InstanceId.1=i-022a9894321a6d374&Version=2016-11-15
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Response ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 400 Bad Request
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:37 GMT
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <Response><Errors><Error><Code>UnsupportedOperation</Code><Message>The functionality you requested is not available in this region.</Message></Error></Errors><RequestID>53ace3cc-2597-49a0-99b2-3b9f1cb8567d</RequestID></Response>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Validate Response ec2/DescribeInstanceCreditSpecifications failed, not retrying, error UnsupportedOperation: The functionality you requested is not available in this region.
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalApplyPost, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalSequence, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [DEBUG] Uploading remote state to S3: {
  Body: buffer(0xc4203e17d0),
  Bucket: ""bwts-terraform-bucket-chinapay"",
  ContentLength: 20792,
  ContentType: ""application/json"",
  Key: ""cn-northwest-1/riak/terraform.tfstate"",
  ServerSideEncryption: ""AES256""
}
2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Request s3/PutObject Details:
---[ REQUEST POST-SIGN ]-----------------------------
PUT /cn-northwest-1/riak/terraform.tfstate HTTP/1.1
Host: bwts-terraform-bucket-chinapay.s3.cn-northwest-1.amazonaws.com.cn
User-Agent: aws-sdk-go/1.12.75 (go1.10.1; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.6
Content-Length: 20792
Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/s3/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-content-sha256;x-amz-date;x-amz-security-token;x-amz-server-side-encryption, Signature=8aa16110ae06a99b503e1f0546a4d6cf208fdf658ca29420baa2d649cec043e2
Content-Type: application/json
X-Amz-Content-Sha256: 04110e3e4cd97aa3e89cfe2f03487922bfd6b6346ec6dfe3fbe8fad9755e18c2
X-Amz-Date: 20180426T110037Z
X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
X-Amz-Server-Side-Encryption: AES256
Accept-Encoding: gzip

{
    ""version"": 3,
    ""terraform_version"": ""0.11.6"",
    ""serial"": 1,
    ""lineage"": ""b9c3c084-789e-7472-0b18-8698b4afc854"",
    ""modules"": [
        {
            ""path"": [
                ""root""
            ],
            ""outputs"": {},
            ""resources"": {
                ""data.terraform_remote_state.security_groups"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""bastion_host"": ""sg-e29feb8b"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/dev-stack-sgs/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""external_lb_sg_id"": ""sg-a55027cc"",
                            ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                            ""rundeck"": ""sg-b39eeada"",
                            ""stack_it_run_access_sg_id"": ""sg-9d5f28f4"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                },
                ""data.terraform_remote_state.vpc"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/vpc/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                            ""private_subnets"": ""subnet-454c962c,subnet-9722ddec"",
                            ""public_subnets"": ""subnet-5e4d9737,subnet-9022ddeb"",
                            ""vpc_cidr"": ""192.168.0.0/19"",
                            ""vpc_id"": ""vpc-34c61f5d"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""docdb""
            ],
            ""outputs"": {},
            ""resources"": {
                ""aws_instance.riak"": {
                    ""type"": ""aws_instance"",
                    ""depends_on"": [
                        ""data.template_file.cloud-init-riak""
                    ],
                    ""primary"": {
                        ""id"": ""i-022a9894321a6d374"",
                        ""attributes"": {
                            ""ami"": ""ami-6ec1d50c"",
                            ""associate_public_ip_address"": ""false"",
                            ""availability_zone"": ""cn-northwest-1a"",
                            ""disable_api_termination"": ""false"",
                            ""ebs_block_device.#"": ""4"",
                            ""ebs_block_device.3965576335.delete_on_termination"": ""false"",
                            ""ebs_block_device.3965576335.device_name"": ""/dev/xvdd"",
                            ""ebs_block_device.3965576335.encrypted"": ""false"",
                            ""ebs_block_device.3965576335.iops"": ""300"",
                            ""ebs_block_device.3965576335.snapshot_id"": """",
                            ""ebs_block_device.3965576335.volume_id"": ""vol-09cde364159031c5d"",
                            ""ebs_block_device.3965576335.volume_size"": ""100"",
                            ""ebs_block_device.3965576335.volume_type"": ""gp2"",
                            ""ebs_block_device.3986656952.delete_on_termination"": ""false"",
                            ""ebs_block_device.3986656952.device_name"": ""/dev/xvde"",
                            ""ebs_block_device.3986656952.encrypted"": ""false"",
                            ""ebs_block_device.3986656952.iops"": ""300"",
                            ""ebs_block_device.3986656952.snapshot_id"": """",
                            ""ebs_block_device.3986656952.volume_id"": ""vol-09c14e768bdd6dd4b"",
                            ""ebs_block_device.3986656952.volume_size"": ""100"",
                            ""ebs_block_device.3986656952.volume_type"": ""gp2"",
                            ""ebs_block_device.3994770134.delete_on_termination"": ""false"",
                            ""ebs_block_device.3994770134.device_name"": ""/dev/xvdg"",
                            ""ebs_block_device.3994770134.encrypted"": ""false"",
                            ""ebs_block_device.3994770134.iops"": ""300"",
                            ""ebs_block_device.3994770134.snapshot_id"": """",
                            ""ebs_block_device.3994770134.volume_id"": ""vol-0e1b3ff63114f3003"",
                            ""ebs_block_device.3994770134.volume_size"": ""100"",
                            ""ebs_block_device.3994770134.volume_type"": ""gp2"",
                            ""ebs_block_device.4023988449.delete_on_termination"": ""false"",
                            ""ebs_block_device.4023988449.device_name"": ""/dev/xvdf"",
                            ""ebs_block_device.4023988449.encrypted"": ""false"",
                            ""ebs_block_device.4023988449.iops"": ""300"",
                            ""ebs_block_device.4023988449.snapshot_id"": """",
                            ""ebs_block_device.4023988449.volume_id"": ""vol-015467a2fec64cfdd"",
                            ""ebs_block_device.4023988449.volume_size"": ""100"",
                            ""ebs_block_device.4023988449.volume_type"": ""gp2"",
                            ""ebs_optimized"": ""false"",
                            ""ephemeral_block_device.#"": ""0"",
                            ""get_password_data"": ""false"",
                            ""iam_instance_profile"": """",
                            ""id"": ""i-022a9894321a6d374"",
                            ""instance_state"": ""running"",
                            ""instance_type"": ""t2.large"",
                            ""ipv6_addresses.#"": ""0"",
                            ""key_name"": ""pay_china"",
                            ""monitoring"": ""false"",
                            ""network_interface.#"": ""0"",
                            ""network_interface_id"": ""eni-fd55c3a4"",
                            ""placement_group"": """",
                            ""primary_network_interface_id"": ""eni-fd55c3a4"",
                            ""private_dns"": ""ip-192-168-14-135.cn-northwest-1.compute.internal"",
                            ""private_ip"": ""192.168.14.135"",
                            ""public_dns"": """",
                            ""public_ip"": """",
                            ""root_block_device.#"": ""1"",
                            ""root_block_device.0.delete_on_termination"": ""true"",
                            ""root_block_device.0.iops"": ""100"",
                            ""root_block_device.0.volume_id"": ""vol-0884c92d17ea04d83"",
                            ""root_block_device.0.volume_size"": ""20"",
                            ""root_block_device.0.volume_type"": ""gp2"",
                            ""security_groups.#"": ""0"",
                            ""source_dest_check"": ""true"",
                            ""subnet_id"": ""subnet-454c962c"",
                            ""tags.%"": ""9"",
                            ""tags.Decomission_Date"": ""never"",
                            ""tags.Environment"": ""chinapay"",
                            ""tags.Name"": ""docdb.pay.cn-northwest-1.test.bwtsi.cn"",
                            ""tags.Owner"": ""operations"",
                            ""tags.Purpose"": ""Riak instance"",
                            ""tags.Role"": ""docdb"",
                            ""tags.Stackname"": ""pay"",
                            ""tags.Started_By"": ""operations"",
                            ""tags.Warning"": ""Managed by terraform, do not edit"",
                            ""tenancy"": ""default"",
                            ""user_data"": ""f35050bdeefa2a2d9f354c0e699a5f2d7c393365"",
                            ""volume_tags.%"": ""0"",
                            ""vpc_security_group_ids.#"": ""1"",
                            ""vpc_security_group_ids.2301982502"": ""sg-9d5f28f4""
                        },
                        ""meta"": {
                            ""e2bfb730-ecaa-11e6-8f88-34363bc7c4c0"": {
                                ""create"": 600000000000,
                                ""delete"": 1200000000000,
                                ""update"": 600000000000
                            },
                            ""schema_version"": ""1""
                        },
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.aws""
                },
                ""data.template_file.cloud-init-riak"": {
                    ""type"": ""template_file"",
                    ""depends_on"": [],
                    ""primary"": {
                        ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                        ""attributes"": {
                            ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                            ""rendered"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo pay \u003e /etc/tradeshift/stackname\""\n - \""echo docdb-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 docdb-$INSTANCE_ID.cn-northwest-1.test.bwtsi.cn docdb-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac 'dr69ZUGVm0Ep1Eo/xBoOTcefuKVx' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = base.testing.bwtsi.cn\n     environment = chinapay\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""template"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo ${STACK_NAME} \u003e /etc/tradeshift/stackname\""\n - \""echo ${HOSTNAME}-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 ${HOSTNAME}-$INSTANCE_ID.${REGION_DNS} ${HOSTNAME}-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac '${DISK_ENCRYPTION_KEY}' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = ${CERT_NAME}\n     environment = ${ENVIRONMENT}\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""vars.%"": ""6"",
                            ""vars.CERT_NAME"": ""base.testing.bwtsi.cn"",
                            ""vars.DISK_ENCRYPTION_KEY"": ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx"",
                            ""vars.ENVIRONMENT"": ""chinapay"",
                            ""vars.HOSTNAME"": ""docdb"",
                            ""vars.REGION_DNS"": ""cn-northwest-1.test.bwtsi.cn"",
                            ""vars.STACK_NAME"": ""pay""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.template""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""environment-common""
            ],
            ""outputs"": {
                ""cert_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""base.testing.bwtsi.cn""
                },
                ""domain_name_search"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test.bwtsi.cn""
                },
                ""environment_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""chinapay""
                },
                ""environment_shortname"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                },
                ""security_group_name_postfix"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": "".chinapay""
                },
                ""site"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""global-common""
            ],
            ""outputs"": {
                ""all_cidr_eu_west_1"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16,172.25.128.0/21,172.25.120.0/21,172.25.112.0/21,172.31.248.0/21,172.31.240.0/21,172.21.0.0/19,172.19.0.0/19,172.22.0.0/19,172.18.0.0/19""
                },
                ""base_tradeshift_net_account_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""694518486591""
                },
                ""gcsops_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.17.22.143/32""
                },
                ""gcsops_cn_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""54.223.95.7/32,54.223.198.170/32,54.223.211.136/32,52.80.34.103/32""
                },
                ""office_ips"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,178.49.148.100/32,87.243.3.34/32,109.166.189.50/32,78.40.84.83/32,4.53.137.82/32,173.247.199.142/32,58.211.225.90/32,202.181.248.19/32,109.70.48.99/32""
                },
                ""prod_base_tradeshift_net_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""prod.base.tradeshift.net""
                },
                ""prod_base_tradeshift_net_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16""
                },
                ""prod_base_tradeshift_net_vpc_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""vpc-264c9042""
                },
                ""prod_ts_sv_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.50.175.210/32,52.30.44.136/32,52.50.189.21/32""
                },
                ""test_bwtsi_cn_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/19""
                },
                ""test_bwtsi_cn_vpc_private_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.12.0/22,192.168.16.0/22""
                },
                ""test_bwtsi_cn_vpc_public_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/22,192.168.4.0/22""
                },
                ""tradeshift_com_public_zone_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""Z2OX0I8SM94425""
                },
                ""translation_service_clients"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,4.53.137.82/32,173.247.199.142/32,130.185.137.106/32,202.181.248.19/32,52.17.87.187/32,52.30.44.136/32,52.30.58.232/32,52.31.203.95/32,52.49.119.80/32,52.49.49.111/32,52.49.5.171/32,52.50.108.6/32,52.50.175.210/32,52.50.189.21/32,52.50.255.154/32,52.50.91.189/32,54.195.199.108/32,54.78.39.106/32,58.211.225.90/32,89.150.143.118/32,54.222.150.122/32,54.222.194.56/32,109.70.48.99/32""
                },
                ""truebn_org_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""34.253.176.198/32,34.241.59.39/32""
                },
                ""userdata_path"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/modules/eff596488a3055adf7024741dffb9ca1/..""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""regional-common""
            ],
            ""outputs"": {
                ""availability_zones"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1a,cn-northwest-1b""
                },
                ""backend_region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""base_ami_1604"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-6ec1d50c""
                },
                ""base_ami_1604_zfs"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-edf8ec8f""
                },
                ""chinapay_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""key_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""pay_china""
                },
                ""region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""region_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""region_env"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        }
    ]
}

-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go] DEBUG: Response s3/PutObject Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 200 OK
Connection: close
Content-Length: 0
Date: Thu, 26 Apr 2018 11:00:39 GMT
Etag: ""807c608ab629b9b73914da058c923c20""
Server: AmazonS3
X-Amz-Id-2: 5Af+DuU/y0Ngtkb6wCq1R0Oz+ZrOYi4apbPsCZTSlwhSqnqBNB64rFL4HfBG6WB9GETdRmQyKnw=
X-Amz-Request-Id: 7984823D8787C039
X-Amz-Server-Side-Encryption: AES256


-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go]
2018/04/26 19:00:38 [DEBUG] plugin: waiting for all plugin processes to complete...

Error: Error applying plan:

1 error(s) occurred:

* module.docdb.aws_instance.riak: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d

2018-04-26T19:00:38.547+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:38 [ERR] plugin: plugin server: accept unix /var/folders/k0/hk5r4k696x901sk4mh_vwcg40000gn/T/plugin243311916: use of closed network connection
Terraform does not automatically rollback in the face of errors.
Instead, your Terraform state file has been partially updated with
any resources that successfully completed. Please address the error
above and apply again to incrementally change your infrastructure.


2018-04-26T19:00:38.550+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-template_v1.0.0_x4
2018-04-26T19:00:38.551+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-aws_v1.16.0_x4
2018-04-26T19:00:38.555+0800 [DEBUG] plugin: plugin process exited: path=/usr/local/bin/terraform-provider-alicloud

```
# Expected Behavior
can create aws instance in China AWS
# Actual Behavior
I can create aws instance in China AWS with provider.aws v1.15.0
but I can't create aws instance with provider.aws v1.16.0",53ace3cc-2597-49a0-99b2-3b9f1cb8567d,https://github.com/hashicorp/terraform-provider-aws
26,4359,"# Terraform Version

Terraform v0.11.6
provider.aws v1.16.0

# Affected Resource(s)
aws_instance_ec2
# Terraform Configuration Files
module ""docdb"" {
  source = ""../../../../../../tradeshift-puppet/terraform/modules/aws/instances-cn/riak""
  environment = ""${var.pull_request}""
  stackname = ""${var.stackname}""
  role = ""docdb""
  owner = ""${var.owner}""
  decomission_date = ""${var.decomission_date}""
  instance_type = ""t2.large""
  instance_ami = ""${module.regional-common.base_ami_1604}""
  instance_key_name = ""${module.regional-common.key_name}""
  disable_api_termination = false
  ebs_volume_size = ""100""
  ebs_delete_on_termination = ""false""
  ebs_optimized = false
  vpc_security_groups = ""${data.terraform_remote_state.security_groups.stack_it_run_access_sg_id}""
  vpc_subnets = ""${data.terraform_remote_state.vpc.private_subnets}""
  postfix = "".${var.stackname}""
  dns_region_name = ""${module.regional-common.region_dns}""
  disk_encryption_key = ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx""
  count = ""1""
  cert_name = ""${module.environment-common.cert_name}""
}

# Debug Output
```
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 200 OK
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: text/xml;charset=UTF-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:36 GMT
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Vary: Accept-Encoding
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <DescribeInstanceAttributeResponse xmlns=""http://ec2.amazonaws.com/doc/2016-11-15/"">
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <requestId>35e6cd4e-cb70-4016-a250-53f0880cc9be</requestId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <instanceId>i-022a9894321a6d374</instanceId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:         <value>I2Nsb3VkLWNvbmZpZwptb3VudHM6CiAtIFtlcGhlbWVyYWwwLCBudWxsXQoKcHJlc2VydmVfaG9zdG5hbWU6IHRydWUKbWFuYWdlX2V0Y19ob3N0czogZmFsc2UKCmJvb3RjbWQ6CiAtICJlY2hvIHBheSA+IC9ldGMvdHJhZGVzaGlmdC9zdGFja25hbWUiCiAtICJlY2hvIGRvY2RiLSRJTlNUQU5DRV9JRCA+IC9ldGMvaG9zdG5hbWU7IGhvc3RuYW1lIC1GIC9ldGMvaG9zdG5hbWUiCiAtICJzZWQgLWkgLWUgJy9eMTI3LjAuMC4xL2QnIC9ldGMvaG9zdHM7IGVjaG8gMTI3LjAuMC4xIGRvY2RiLSRJTlNUQU5DRV9JRC5jbi1ub3J0aHdlc3QtMS50ZXN0LmJ3dHNpLmNuIGRvY2RiLSRJTlNUQU5DRV9JRCBsb2NhbGhvc3QgPj4gL2V0Yy9ob3N0cyIKICMgRGlzayBlbmNyeXB0aW9uIGtleSBmb3IgZXBoZW1lcmFsIGRpc2sgZHJpdmVzLCBzYXZlZCB0byByYW0gZHJpdmUKICMgVGhlIHNlZCBwYXJ0IHJlbW92ZXMgdGhlIChzdGRpbik9IG91dHB1dCBmcm9tIG9wZW5zc2wgZGdzdAogLSAiZWNobyAkSU5TVEFOQ0VfSUQgfCBvcGVuc3NsIGRnc3QgLXNoYTI1NiAtaG1hYyAnZHI2OVpVR1ZtMEVwMUVvL3hCb09UY2VmdUtWeCcgfCBzZWQgJ3MvXi4qPSAvLycgPiAvZGV2L3NobS9lbmNyeXB0ZWQtZGlzay5sdWtzLmtleSAmJiBjaG1vZCA0MDAgL2Rldi9zaG0vZW5jcnlwdGVkLWRpc2subHVrcy5rZXkiCgojIERvbid0IG92ZXJyaWRlIG91ciBhcHQgcmVwb3NpdG9yeSBsaXN0IG9uIGZpcnN0IGJvb3QKYXB0X3ByZXNlcnZlX3NvdXJjZXNfbGlzdDogdHJ1ZQoKIyBEb24ndCBwcmludCB0aGUgbmV3IHNzaCBrZXlzIG9uIHRoZSBjb25zb2xlCm5vX3NzaF9maW5nZXJwcmludHM6IHRydWUKCndyaXRlX2ZpbGVzOgogLSBwYXRoOiAvZXRjL3B1cHBldGxhYnMvcHVwcGV0L3B1cHBldC5jb25mCiAgIG93bmVyOiByb290OnJvb3QKICAgcGVybWlzc2lvbnM6ICcwNDQ0JwogICBjb250ZW50OiB8CiAgICAgW21haW5dCiAgICAgY2VydG5hbWUgPSBiYXNlLnRlc3RpbmcuYnd0c2kuY24KICAgICBlbnZpcm9ubWVudCA9IGNoaW5hcGF5CiAgICAgW2FnZW50XQogICAgIHJ1bmludGVydmFsID0gMTAweQogICAgIHNlcnZlciA9IHB1cHBldC5id3RzaS5jbgogICAgIG5vZGVfbmFtZSA9IGZhY3RlcgogICAgIG5vZGVfbmFtZV9mYWN0ID0gZnFkbgogICAgIHNwbGF5ID0gdHJ1ZQogICAgIHNwbGF5bGltaXQgPSA1bQo=</value>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     </userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: </DescribeInstanceAttributeResponse>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] DEBUG: Request ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ REQUEST POST-SIGN ]-----------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: POST / HTTP/1.1
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Host: ec2.cn-northwest-1.amazonaws.com.cn
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: User-Agent: aws-sdk-go/1.13.32 (go1.9.2; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.7
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Length: 95
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/ec2/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-security-token, Signature=60ac431f06b221bf7fe6d53ee72de1babb1aad5a5a4d17917e4d2f78a7533fef
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: application/x-www-form-urlencoded; charset=utf-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Date: 20180426T110036Z
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Accept-Encoding: gzip
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Action=DescribeInstanceCreditSpecifications&InstanceId.1=i-022a9894321a6d374&Version=2016-11-15
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Response ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 400 Bad Request
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:37 GMT
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <Response><Errors><Error><Code>UnsupportedOperation</Code><Message>The functionality you requested is not available in this region.</Message></Error></Errors><RequestID>53ace3cc-2597-49a0-99b2-3b9f1cb8567d</RequestID></Response>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Validate Response ec2/DescribeInstanceCreditSpecifications failed, not retrying, error UnsupportedOperation: The functionality you requested is not available in this region.
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalApplyPost, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalSequence, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [DEBUG] Uploading remote state to S3: {
  Body: buffer(0xc4203e17d0),
  Bucket: ""bwts-terraform-bucket-chinapay"",
  ContentLength: 20792,
  ContentType: ""application/json"",
  Key: ""cn-northwest-1/riak/terraform.tfstate"",
  ServerSideEncryption: ""AES256""
}
2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Request s3/PutObject Details:
---[ REQUEST POST-SIGN ]-----------------------------
PUT /cn-northwest-1/riak/terraform.tfstate HTTP/1.1
Host: bwts-terraform-bucket-chinapay.s3.cn-northwest-1.amazonaws.com.cn
User-Agent: aws-sdk-go/1.12.75 (go1.10.1; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.6
Content-Length: 20792
Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/s3/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-content-sha256;x-amz-date;x-amz-security-token;x-amz-server-side-encryption, Signature=8aa16110ae06a99b503e1f0546a4d6cf208fdf658ca29420baa2d649cec043e2
Content-Type: application/json
X-Amz-Content-Sha256: 04110e3e4cd97aa3e89cfe2f03487922bfd6b6346ec6dfe3fbe8fad9755e18c2
X-Amz-Date: 20180426T110037Z
X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
X-Amz-Server-Side-Encryption: AES256
Accept-Encoding: gzip

{
    ""version"": 3,
    ""terraform_version"": ""0.11.6"",
    ""serial"": 1,
    ""lineage"": ""b9c3c084-789e-7472-0b18-8698b4afc854"",
    ""modules"": [
        {
            ""path"": [
                ""root""
            ],
            ""outputs"": {},
            ""resources"": {
                ""data.terraform_remote_state.security_groups"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""bastion_host"": ""sg-e29feb8b"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/dev-stack-sgs/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""external_lb_sg_id"": ""sg-a55027cc"",
                            ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                            ""rundeck"": ""sg-b39eeada"",
                            ""stack_it_run_access_sg_id"": ""sg-9d5f28f4"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                },
                ""data.terraform_remote_state.vpc"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/vpc/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                            ""private_subnets"": ""subnet-454c962c,subnet-9722ddec"",
                            ""public_subnets"": ""subnet-5e4d9737,subnet-9022ddeb"",
                            ""vpc_cidr"": ""192.168.0.0/19"",
                            ""vpc_id"": ""vpc-34c61f5d"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""docdb""
            ],
            ""outputs"": {},
            ""resources"": {
                ""aws_instance.riak"": {
                    ""type"": ""aws_instance"",
                    ""depends_on"": [
                        ""data.template_file.cloud-init-riak""
                    ],
                    ""primary"": {
                        ""id"": ""i-022a9894321a6d374"",
                        ""attributes"": {
                            ""ami"": ""ami-6ec1d50c"",
                            ""associate_public_ip_address"": ""false"",
                            ""availability_zone"": ""cn-northwest-1a"",
                            ""disable_api_termination"": ""false"",
                            ""ebs_block_device.#"": ""4"",
                            ""ebs_block_device.3965576335.delete_on_termination"": ""false"",
                            ""ebs_block_device.3965576335.device_name"": ""/dev/xvdd"",
                            ""ebs_block_device.3965576335.encrypted"": ""false"",
                            ""ebs_block_device.3965576335.iops"": ""300"",
                            ""ebs_block_device.3965576335.snapshot_id"": """",
                            ""ebs_block_device.3965576335.volume_id"": ""vol-09cde364159031c5d"",
                            ""ebs_block_device.3965576335.volume_size"": ""100"",
                            ""ebs_block_device.3965576335.volume_type"": ""gp2"",
                            ""ebs_block_device.3986656952.delete_on_termination"": ""false"",
                            ""ebs_block_device.3986656952.device_name"": ""/dev/xvde"",
                            ""ebs_block_device.3986656952.encrypted"": ""false"",
                            ""ebs_block_device.3986656952.iops"": ""300"",
                            ""ebs_block_device.3986656952.snapshot_id"": """",
                            ""ebs_block_device.3986656952.volume_id"": ""vol-09c14e768bdd6dd4b"",
                            ""ebs_block_device.3986656952.volume_size"": ""100"",
                            ""ebs_block_device.3986656952.volume_type"": ""gp2"",
                            ""ebs_block_device.3994770134.delete_on_termination"": ""false"",
                            ""ebs_block_device.3994770134.device_name"": ""/dev/xvdg"",
                            ""ebs_block_device.3994770134.encrypted"": ""false"",
                            ""ebs_block_device.3994770134.iops"": ""300"",
                            ""ebs_block_device.3994770134.snapshot_id"": """",
                            ""ebs_block_device.3994770134.volume_id"": ""vol-0e1b3ff63114f3003"",
                            ""ebs_block_device.3994770134.volume_size"": ""100"",
                            ""ebs_block_device.3994770134.volume_type"": ""gp2"",
                            ""ebs_block_device.4023988449.delete_on_termination"": ""false"",
                            ""ebs_block_device.4023988449.device_name"": ""/dev/xvdf"",
                            ""ebs_block_device.4023988449.encrypted"": ""false"",
                            ""ebs_block_device.4023988449.iops"": ""300"",
                            ""ebs_block_device.4023988449.snapshot_id"": """",
                            ""ebs_block_device.4023988449.volume_id"": ""vol-015467a2fec64cfdd"",
                            ""ebs_block_device.4023988449.volume_size"": ""100"",
                            ""ebs_block_device.4023988449.volume_type"": ""gp2"",
                            ""ebs_optimized"": ""false"",
                            ""ephemeral_block_device.#"": ""0"",
                            ""get_password_data"": ""false"",
                            ""iam_instance_profile"": """",
                            ""id"": ""i-022a9894321a6d374"",
                            ""instance_state"": ""running"",
                            ""instance_type"": ""t2.large"",
                            ""ipv6_addresses.#"": ""0"",
                            ""key_name"": ""pay_china"",
                            ""monitoring"": ""false"",
                            ""network_interface.#"": ""0"",
                            ""network_interface_id"": ""eni-fd55c3a4"",
                            ""placement_group"": """",
                            ""primary_network_interface_id"": ""eni-fd55c3a4"",
                            ""private_dns"": ""ip-192-168-14-135.cn-northwest-1.compute.internal"",
                            ""private_ip"": ""192.168.14.135"",
                            ""public_dns"": """",
                            ""public_ip"": """",
                            ""root_block_device.#"": ""1"",
                            ""root_block_device.0.delete_on_termination"": ""true"",
                            ""root_block_device.0.iops"": ""100"",
                            ""root_block_device.0.volume_id"": ""vol-0884c92d17ea04d83"",
                            ""root_block_device.0.volume_size"": ""20"",
                            ""root_block_device.0.volume_type"": ""gp2"",
                            ""security_groups.#"": ""0"",
                            ""source_dest_check"": ""true"",
                            ""subnet_id"": ""subnet-454c962c"",
                            ""tags.%"": ""9"",
                            ""tags.Decomission_Date"": ""never"",
                            ""tags.Environment"": ""chinapay"",
                            ""tags.Name"": ""docdb.pay.cn-northwest-1.test.bwtsi.cn"",
                            ""tags.Owner"": ""operations"",
                            ""tags.Purpose"": ""Riak instance"",
                            ""tags.Role"": ""docdb"",
                            ""tags.Stackname"": ""pay"",
                            ""tags.Started_By"": ""operations"",
                            ""tags.Warning"": ""Managed by terraform, do not edit"",
                            ""tenancy"": ""default"",
                            ""user_data"": ""f35050bdeefa2a2d9f354c0e699a5f2d7c393365"",
                            ""volume_tags.%"": ""0"",
                            ""vpc_security_group_ids.#"": ""1"",
                            ""vpc_security_group_ids.2301982502"": ""sg-9d5f28f4""
                        },
                        ""meta"": {
                            ""e2bfb730-ecaa-11e6-8f88-34363bc7c4c0"": {
                                ""create"": 600000000000,
                                ""delete"": 1200000000000,
                                ""update"": 600000000000
                            },
                            ""schema_version"": ""1""
                        },
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.aws""
                },
                ""data.template_file.cloud-init-riak"": {
                    ""type"": ""template_file"",
                    ""depends_on"": [],
                    ""primary"": {
                        ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                        ""attributes"": {
                            ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                            ""rendered"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo pay \u003e /etc/tradeshift/stackname\""\n - \""echo docdb-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 docdb-$INSTANCE_ID.cn-northwest-1.test.bwtsi.cn docdb-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac 'dr69ZUGVm0Ep1Eo/xBoOTcefuKVx' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = base.testing.bwtsi.cn\n     environment = chinapay\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""template"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo ${STACK_NAME} \u003e /etc/tradeshift/stackname\""\n - \""echo ${HOSTNAME}-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 ${HOSTNAME}-$INSTANCE_ID.${REGION_DNS} ${HOSTNAME}-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac '${DISK_ENCRYPTION_KEY}' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = ${CERT_NAME}\n     environment = ${ENVIRONMENT}\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""vars.%"": ""6"",
                            ""vars.CERT_NAME"": ""base.testing.bwtsi.cn"",
                            ""vars.DISK_ENCRYPTION_KEY"": ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx"",
                            ""vars.ENVIRONMENT"": ""chinapay"",
                            ""vars.HOSTNAME"": ""docdb"",
                            ""vars.REGION_DNS"": ""cn-northwest-1.test.bwtsi.cn"",
                            ""vars.STACK_NAME"": ""pay""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.template""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""environment-common""
            ],
            ""outputs"": {
                ""cert_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""base.testing.bwtsi.cn""
                },
                ""domain_name_search"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test.bwtsi.cn""
                },
                ""environment_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""chinapay""
                },
                ""environment_shortname"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                },
                ""security_group_name_postfix"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": "".chinapay""
                },
                ""site"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""global-common""
            ],
            ""outputs"": {
                ""all_cidr_eu_west_1"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16,172.25.128.0/21,172.25.120.0/21,172.25.112.0/21,172.31.248.0/21,172.31.240.0/21,172.21.0.0/19,172.19.0.0/19,172.22.0.0/19,172.18.0.0/19""
                },
                ""base_tradeshift_net_account_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""694518486591""
                },
                ""gcsops_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.17.22.143/32""
                },
                ""gcsops_cn_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""54.223.95.7/32,54.223.198.170/32,54.223.211.136/32,52.80.34.103/32""
                },
                ""office_ips"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,178.49.148.100/32,87.243.3.34/32,109.166.189.50/32,78.40.84.83/32,4.53.137.82/32,173.247.199.142/32,58.211.225.90/32,202.181.248.19/32,109.70.48.99/32""
                },
                ""prod_base_tradeshift_net_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""prod.base.tradeshift.net""
                },
                ""prod_base_tradeshift_net_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16""
                },
                ""prod_base_tradeshift_net_vpc_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""vpc-264c9042""
                },
                ""prod_ts_sv_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.50.175.210/32,52.30.44.136/32,52.50.189.21/32""
                },
                ""test_bwtsi_cn_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/19""
                },
                ""test_bwtsi_cn_vpc_private_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.12.0/22,192.168.16.0/22""
                },
                ""test_bwtsi_cn_vpc_public_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/22,192.168.4.0/22""
                },
                ""tradeshift_com_public_zone_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""Z2OX0I8SM94425""
                },
                ""translation_service_clients"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,4.53.137.82/32,173.247.199.142/32,130.185.137.106/32,202.181.248.19/32,52.17.87.187/32,52.30.44.136/32,52.30.58.232/32,52.31.203.95/32,52.49.119.80/32,52.49.49.111/32,52.49.5.171/32,52.50.108.6/32,52.50.175.210/32,52.50.189.21/32,52.50.255.154/32,52.50.91.189/32,54.195.199.108/32,54.78.39.106/32,58.211.225.90/32,89.150.143.118/32,54.222.150.122/32,54.222.194.56/32,109.70.48.99/32""
                },
                ""truebn_org_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""34.253.176.198/32,34.241.59.39/32""
                },
                ""userdata_path"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/modules/eff596488a3055adf7024741dffb9ca1/..""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""regional-common""
            ],
            ""outputs"": {
                ""availability_zones"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1a,cn-northwest-1b""
                },
                ""backend_region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""base_ami_1604"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-6ec1d50c""
                },
                ""base_ami_1604_zfs"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-edf8ec8f""
                },
                ""chinapay_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""key_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""pay_china""
                },
                ""region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""region_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""region_env"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        }
    ]
}

-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go] DEBUG: Response s3/PutObject Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 200 OK
Connection: close
Content-Length: 0
Date: Thu, 26 Apr 2018 11:00:39 GMT
Etag: ""807c608ab629b9b73914da058c923c20""
Server: AmazonS3
X-Amz-Id-2: 5Af+DuU/y0Ngtkb6wCq1R0Oz+ZrOYi4apbPsCZTSlwhSqnqBNB64rFL4HfBG6WB9GETdRmQyKnw=
X-Amz-Request-Id: 7984823D8787C039
X-Amz-Server-Side-Encryption: AES256


-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go]
2018/04/26 19:00:38 [DEBUG] plugin: waiting for all plugin processes to complete...

Error: Error applying plan:

1 error(s) occurred:

* module.docdb.aws_instance.riak: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d

2018-04-26T19:00:38.547+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:38 [ERR] plugin: plugin server: accept unix /var/folders/k0/hk5r4k696x901sk4mh_vwcg40000gn/T/plugin243311916: use of closed network connection
Terraform does not automatically rollback in the face of errors.
Instead, your Terraform state file has been partially updated with
any resources that successfully completed. Please address the error
above and apply again to incrementally change your infrastructure.


2018-04-26T19:00:38.550+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-template_v1.0.0_x4
2018-04-26T19:00:38.551+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-aws_v1.16.0_x4
2018-04-26T19:00:38.555+0800 [DEBUG] plugin: plugin process exited: path=/usr/local/bin/terraform-provider-alicloud

```
# Expected Behavior
can create aws instance in China AWS
# Actual Behavior
I can create aws instance in China AWS with provider.aws v1.15.0
but I can't create aws instance with provider.aws v1.16.0",e2bfb730-ecaa-11e6-8f88-34363bc7c4c0,https://github.com/hashicorp/terraform-provider-aws
27,4359,"# Terraform Version

Terraform v0.11.6
provider.aws v1.16.0

# Affected Resource(s)
aws_instance_ec2
# Terraform Configuration Files
module ""docdb"" {
  source = ""../../../../../../tradeshift-puppet/terraform/modules/aws/instances-cn/riak""
  environment = ""${var.pull_request}""
  stackname = ""${var.stackname}""
  role = ""docdb""
  owner = ""${var.owner}""
  decomission_date = ""${var.decomission_date}""
  instance_type = ""t2.large""
  instance_ami = ""${module.regional-common.base_ami_1604}""
  instance_key_name = ""${module.regional-common.key_name}""
  disable_api_termination = false
  ebs_volume_size = ""100""
  ebs_delete_on_termination = ""false""
  ebs_optimized = false
  vpc_security_groups = ""${data.terraform_remote_state.security_groups.stack_it_run_access_sg_id}""
  vpc_subnets = ""${data.terraform_remote_state.vpc.private_subnets}""
  postfix = "".${var.stackname}""
  dns_region_name = ""${module.regional-common.region_dns}""
  disk_encryption_key = ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx""
  count = ""1""
  cert_name = ""${module.environment-common.cert_name}""
}

# Debug Output
```
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 200 OK
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: text/xml;charset=UTF-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:36 GMT
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Vary: Accept-Encoding
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <DescribeInstanceAttributeResponse xmlns=""http://ec2.amazonaws.com/doc/2016-11-15/"">
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <requestId>35e6cd4e-cb70-4016-a250-53f0880cc9be</requestId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <instanceId>i-022a9894321a6d374</instanceId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:         <value>I2Nsb3VkLWNvbmZpZwptb3VudHM6CiAtIFtlcGhlbWVyYWwwLCBudWxsXQoKcHJlc2VydmVfaG9zdG5hbWU6IHRydWUKbWFuYWdlX2V0Y19ob3N0czogZmFsc2UKCmJvb3RjbWQ6CiAtICJlY2hvIHBheSA+IC9ldGMvdHJhZGVzaGlmdC9zdGFja25hbWUiCiAtICJlY2hvIGRvY2RiLSRJTlNUQU5DRV9JRCA+IC9ldGMvaG9zdG5hbWU7IGhvc3RuYW1lIC1GIC9ldGMvaG9zdG5hbWUiCiAtICJzZWQgLWkgLWUgJy9eMTI3LjAuMC4xL2QnIC9ldGMvaG9zdHM7IGVjaG8gMTI3LjAuMC4xIGRvY2RiLSRJTlNUQU5DRV9JRC5jbi1ub3J0aHdlc3QtMS50ZXN0LmJ3dHNpLmNuIGRvY2RiLSRJTlNUQU5DRV9JRCBsb2NhbGhvc3QgPj4gL2V0Yy9ob3N0cyIKICMgRGlzayBlbmNyeXB0aW9uIGtleSBmb3IgZXBoZW1lcmFsIGRpc2sgZHJpdmVzLCBzYXZlZCB0byByYW0gZHJpdmUKICMgVGhlIHNlZCBwYXJ0IHJlbW92ZXMgdGhlIChzdGRpbik9IG91dHB1dCBmcm9tIG9wZW5zc2wgZGdzdAogLSAiZWNobyAkSU5TVEFOQ0VfSUQgfCBvcGVuc3NsIGRnc3QgLXNoYTI1NiAtaG1hYyAnZHI2OVpVR1ZtMEVwMUVvL3hCb09UY2VmdUtWeCcgfCBzZWQgJ3MvXi4qPSAvLycgPiAvZGV2L3NobS9lbmNyeXB0ZWQtZGlzay5sdWtzLmtleSAmJiBjaG1vZCA0MDAgL2Rldi9zaG0vZW5jcnlwdGVkLWRpc2subHVrcy5rZXkiCgojIERvbid0IG92ZXJyaWRlIG91ciBhcHQgcmVwb3NpdG9yeSBsaXN0IG9uIGZpcnN0IGJvb3QKYXB0X3ByZXNlcnZlX3NvdXJjZXNfbGlzdDogdHJ1ZQoKIyBEb24ndCBwcmludCB0aGUgbmV3IHNzaCBrZXlzIG9uIHRoZSBjb25zb2xlCm5vX3NzaF9maW5nZXJwcmludHM6IHRydWUKCndyaXRlX2ZpbGVzOgogLSBwYXRoOiAvZXRjL3B1cHBldGxhYnMvcHVwcGV0L3B1cHBldC5jb25mCiAgIG93bmVyOiByb290OnJvb3QKICAgcGVybWlzc2lvbnM6ICcwNDQ0JwogICBjb250ZW50OiB8CiAgICAgW21haW5dCiAgICAgY2VydG5hbWUgPSBiYXNlLnRlc3RpbmcuYnd0c2kuY24KICAgICBlbnZpcm9ubWVudCA9IGNoaW5hcGF5CiAgICAgW2FnZW50XQogICAgIHJ1bmludGVydmFsID0gMTAweQogICAgIHNlcnZlciA9IHB1cHBldC5id3RzaS5jbgogICAgIG5vZGVfbmFtZSA9IGZhY3RlcgogICAgIG5vZGVfbmFtZV9mYWN0ID0gZnFkbgogICAgIHNwbGF5ID0gdHJ1ZQogICAgIHNwbGF5bGltaXQgPSA1bQo=</value>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     </userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: </DescribeInstanceAttributeResponse>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] DEBUG: Request ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ REQUEST POST-SIGN ]-----------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: POST / HTTP/1.1
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Host: ec2.cn-northwest-1.amazonaws.com.cn
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: User-Agent: aws-sdk-go/1.13.32 (go1.9.2; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.7
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Length: 95
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/ec2/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-security-token, Signature=60ac431f06b221bf7fe6d53ee72de1babb1aad5a5a4d17917e4d2f78a7533fef
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: application/x-www-form-urlencoded; charset=utf-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Date: 20180426T110036Z
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Accept-Encoding: gzip
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Action=DescribeInstanceCreditSpecifications&InstanceId.1=i-022a9894321a6d374&Version=2016-11-15
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Response ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 400 Bad Request
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:37 GMT
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <Response><Errors><Error><Code>UnsupportedOperation</Code><Message>The functionality you requested is not available in this region.</Message></Error></Errors><RequestID>53ace3cc-2597-49a0-99b2-3b9f1cb8567d</RequestID></Response>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Validate Response ec2/DescribeInstanceCreditSpecifications failed, not retrying, error UnsupportedOperation: The functionality you requested is not available in this region.
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalApplyPost, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalSequence, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [DEBUG] Uploading remote state to S3: {
  Body: buffer(0xc4203e17d0),
  Bucket: ""bwts-terraform-bucket-chinapay"",
  ContentLength: 20792,
  ContentType: ""application/json"",
  Key: ""cn-northwest-1/riak/terraform.tfstate"",
  ServerSideEncryption: ""AES256""
}
2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Request s3/PutObject Details:
---[ REQUEST POST-SIGN ]-----------------------------
PUT /cn-northwest-1/riak/terraform.tfstate HTTP/1.1
Host: bwts-terraform-bucket-chinapay.s3.cn-northwest-1.amazonaws.com.cn
User-Agent: aws-sdk-go/1.12.75 (go1.10.1; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.6
Content-Length: 20792
Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/s3/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-content-sha256;x-amz-date;x-amz-security-token;x-amz-server-side-encryption, Signature=8aa16110ae06a99b503e1f0546a4d6cf208fdf658ca29420baa2d649cec043e2
Content-Type: application/json
X-Amz-Content-Sha256: 04110e3e4cd97aa3e89cfe2f03487922bfd6b6346ec6dfe3fbe8fad9755e18c2
X-Amz-Date: 20180426T110037Z
X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
X-Amz-Server-Side-Encryption: AES256
Accept-Encoding: gzip

{
    ""version"": 3,
    ""terraform_version"": ""0.11.6"",
    ""serial"": 1,
    ""lineage"": ""b9c3c084-789e-7472-0b18-8698b4afc854"",
    ""modules"": [
        {
            ""path"": [
                ""root""
            ],
            ""outputs"": {},
            ""resources"": {
                ""data.terraform_remote_state.security_groups"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""bastion_host"": ""sg-e29feb8b"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/dev-stack-sgs/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""external_lb_sg_id"": ""sg-a55027cc"",
                            ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                            ""rundeck"": ""sg-b39eeada"",
                            ""stack_it_run_access_sg_id"": ""sg-9d5f28f4"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                },
                ""data.terraform_remote_state.vpc"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/vpc/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                            ""private_subnets"": ""subnet-454c962c,subnet-9722ddec"",
                            ""public_subnets"": ""subnet-5e4d9737,subnet-9022ddeb"",
                            ""vpc_cidr"": ""192.168.0.0/19"",
                            ""vpc_id"": ""vpc-34c61f5d"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""docdb""
            ],
            ""outputs"": {},
            ""resources"": {
                ""aws_instance.riak"": {
                    ""type"": ""aws_instance"",
                    ""depends_on"": [
                        ""data.template_file.cloud-init-riak""
                    ],
                    ""primary"": {
                        ""id"": ""i-022a9894321a6d374"",
                        ""attributes"": {
                            ""ami"": ""ami-6ec1d50c"",
                            ""associate_public_ip_address"": ""false"",
                            ""availability_zone"": ""cn-northwest-1a"",
                            ""disable_api_termination"": ""false"",
                            ""ebs_block_device.#"": ""4"",
                            ""ebs_block_device.3965576335.delete_on_termination"": ""false"",
                            ""ebs_block_device.3965576335.device_name"": ""/dev/xvdd"",
                            ""ebs_block_device.3965576335.encrypted"": ""false"",
                            ""ebs_block_device.3965576335.iops"": ""300"",
                            ""ebs_block_device.3965576335.snapshot_id"": """",
                            ""ebs_block_device.3965576335.volume_id"": ""vol-09cde364159031c5d"",
                            ""ebs_block_device.3965576335.volume_size"": ""100"",
                            ""ebs_block_device.3965576335.volume_type"": ""gp2"",
                            ""ebs_block_device.3986656952.delete_on_termination"": ""false"",
                            ""ebs_block_device.3986656952.device_name"": ""/dev/xvde"",
                            ""ebs_block_device.3986656952.encrypted"": ""false"",
                            ""ebs_block_device.3986656952.iops"": ""300"",
                            ""ebs_block_device.3986656952.snapshot_id"": """",
                            ""ebs_block_device.3986656952.volume_id"": ""vol-09c14e768bdd6dd4b"",
                            ""ebs_block_device.3986656952.volume_size"": ""100"",
                            ""ebs_block_device.3986656952.volume_type"": ""gp2"",
                            ""ebs_block_device.3994770134.delete_on_termination"": ""false"",
                            ""ebs_block_device.3994770134.device_name"": ""/dev/xvdg"",
                            ""ebs_block_device.3994770134.encrypted"": ""false"",
                            ""ebs_block_device.3994770134.iops"": ""300"",
                            ""ebs_block_device.3994770134.snapshot_id"": """",
                            ""ebs_block_device.3994770134.volume_id"": ""vol-0e1b3ff63114f3003"",
                            ""ebs_block_device.3994770134.volume_size"": ""100"",
                            ""ebs_block_device.3994770134.volume_type"": ""gp2"",
                            ""ebs_block_device.4023988449.delete_on_termination"": ""false"",
                            ""ebs_block_device.4023988449.device_name"": ""/dev/xvdf"",
                            ""ebs_block_device.4023988449.encrypted"": ""false"",
                            ""ebs_block_device.4023988449.iops"": ""300"",
                            ""ebs_block_device.4023988449.snapshot_id"": """",
                            ""ebs_block_device.4023988449.volume_id"": ""vol-015467a2fec64cfdd"",
                            ""ebs_block_device.4023988449.volume_size"": ""100"",
                            ""ebs_block_device.4023988449.volume_type"": ""gp2"",
                            ""ebs_optimized"": ""false"",
                            ""ephemeral_block_device.#"": ""0"",
                            ""get_password_data"": ""false"",
                            ""iam_instance_profile"": """",
                            ""id"": ""i-022a9894321a6d374"",
                            ""instance_state"": ""running"",
                            ""instance_type"": ""t2.large"",
                            ""ipv6_addresses.#"": ""0"",
                            ""key_name"": ""pay_china"",
                            ""monitoring"": ""false"",
                            ""network_interface.#"": ""0"",
                            ""network_interface_id"": ""eni-fd55c3a4"",
                            ""placement_group"": """",
                            ""primary_network_interface_id"": ""eni-fd55c3a4"",
                            ""private_dns"": ""ip-192-168-14-135.cn-northwest-1.compute.internal"",
                            ""private_ip"": ""192.168.14.135"",
                            ""public_dns"": """",
                            ""public_ip"": """",
                            ""root_block_device.#"": ""1"",
                            ""root_block_device.0.delete_on_termination"": ""true"",
                            ""root_block_device.0.iops"": ""100"",
                            ""root_block_device.0.volume_id"": ""vol-0884c92d17ea04d83"",
                            ""root_block_device.0.volume_size"": ""20"",
                            ""root_block_device.0.volume_type"": ""gp2"",
                            ""security_groups.#"": ""0"",
                            ""source_dest_check"": ""true"",
                            ""subnet_id"": ""subnet-454c962c"",
                            ""tags.%"": ""9"",
                            ""tags.Decomission_Date"": ""never"",
                            ""tags.Environment"": ""chinapay"",
                            ""tags.Name"": ""docdb.pay.cn-northwest-1.test.bwtsi.cn"",
                            ""tags.Owner"": ""operations"",
                            ""tags.Purpose"": ""Riak instance"",
                            ""tags.Role"": ""docdb"",
                            ""tags.Stackname"": ""pay"",
                            ""tags.Started_By"": ""operations"",
                            ""tags.Warning"": ""Managed by terraform, do not edit"",
                            ""tenancy"": ""default"",
                            ""user_data"": ""f35050bdeefa2a2d9f354c0e699a5f2d7c393365"",
                            ""volume_tags.%"": ""0"",
                            ""vpc_security_group_ids.#"": ""1"",
                            ""vpc_security_group_ids.2301982502"": ""sg-9d5f28f4""
                        },
                        ""meta"": {
                            ""e2bfb730-ecaa-11e6-8f88-34363bc7c4c0"": {
                                ""create"": 600000000000,
                                ""delete"": 1200000000000,
                                ""update"": 600000000000
                            },
                            ""schema_version"": ""1""
                        },
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.aws""
                },
                ""data.template_file.cloud-init-riak"": {
                    ""type"": ""template_file"",
                    ""depends_on"": [],
                    ""primary"": {
                        ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                        ""attributes"": {
                            ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                            ""rendered"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo pay \u003e /etc/tradeshift/stackname\""\n - \""echo docdb-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 docdb-$INSTANCE_ID.cn-northwest-1.test.bwtsi.cn docdb-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac 'dr69ZUGVm0Ep1Eo/xBoOTcefuKVx' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = base.testing.bwtsi.cn\n     environment = chinapay\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""template"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo ${STACK_NAME} \u003e /etc/tradeshift/stackname\""\n - \""echo ${HOSTNAME}-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 ${HOSTNAME}-$INSTANCE_ID.${REGION_DNS} ${HOSTNAME}-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac '${DISK_ENCRYPTION_KEY}' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = ${CERT_NAME}\n     environment = ${ENVIRONMENT}\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""vars.%"": ""6"",
                            ""vars.CERT_NAME"": ""base.testing.bwtsi.cn"",
                            ""vars.DISK_ENCRYPTION_KEY"": ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx"",
                            ""vars.ENVIRONMENT"": ""chinapay"",
                            ""vars.HOSTNAME"": ""docdb"",
                            ""vars.REGION_DNS"": ""cn-northwest-1.test.bwtsi.cn"",
                            ""vars.STACK_NAME"": ""pay""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.template""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""environment-common""
            ],
            ""outputs"": {
                ""cert_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""base.testing.bwtsi.cn""
                },
                ""domain_name_search"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test.bwtsi.cn""
                },
                ""environment_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""chinapay""
                },
                ""environment_shortname"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                },
                ""security_group_name_postfix"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": "".chinapay""
                },
                ""site"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""global-common""
            ],
            ""outputs"": {
                ""all_cidr_eu_west_1"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16,172.25.128.0/21,172.25.120.0/21,172.25.112.0/21,172.31.248.0/21,172.31.240.0/21,172.21.0.0/19,172.19.0.0/19,172.22.0.0/19,172.18.0.0/19""
                },
                ""base_tradeshift_net_account_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""694518486591""
                },
                ""gcsops_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.17.22.143/32""
                },
                ""gcsops_cn_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""54.223.95.7/32,54.223.198.170/32,54.223.211.136/32,52.80.34.103/32""
                },
                ""office_ips"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,178.49.148.100/32,87.243.3.34/32,109.166.189.50/32,78.40.84.83/32,4.53.137.82/32,173.247.199.142/32,58.211.225.90/32,202.181.248.19/32,109.70.48.99/32""
                },
                ""prod_base_tradeshift_net_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""prod.base.tradeshift.net""
                },
                ""prod_base_tradeshift_net_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16""
                },
                ""prod_base_tradeshift_net_vpc_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""vpc-264c9042""
                },
                ""prod_ts_sv_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.50.175.210/32,52.30.44.136/32,52.50.189.21/32""
                },
                ""test_bwtsi_cn_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/19""
                },
                ""test_bwtsi_cn_vpc_private_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.12.0/22,192.168.16.0/22""
                },
                ""test_bwtsi_cn_vpc_public_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/22,192.168.4.0/22""
                },
                ""tradeshift_com_public_zone_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""Z2OX0I8SM94425""
                },
                ""translation_service_clients"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,4.53.137.82/32,173.247.199.142/32,130.185.137.106/32,202.181.248.19/32,52.17.87.187/32,52.30.44.136/32,52.30.58.232/32,52.31.203.95/32,52.49.119.80/32,52.49.49.111/32,52.49.5.171/32,52.50.108.6/32,52.50.175.210/32,52.50.189.21/32,52.50.255.154/32,52.50.91.189/32,54.195.199.108/32,54.78.39.106/32,58.211.225.90/32,89.150.143.118/32,54.222.150.122/32,54.222.194.56/32,109.70.48.99/32""
                },
                ""truebn_org_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""34.253.176.198/32,34.241.59.39/32""
                },
                ""userdata_path"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/modules/eff596488a3055adf7024741dffb9ca1/..""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""regional-common""
            ],
            ""outputs"": {
                ""availability_zones"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1a,cn-northwest-1b""
                },
                ""backend_region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""base_ami_1604"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-6ec1d50c""
                },
                ""base_ami_1604_zfs"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-edf8ec8f""
                },
                ""chinapay_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""key_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""pay_china""
                },
                ""region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""region_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""region_env"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        }
    ]
}

-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go] DEBUG: Response s3/PutObject Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 200 OK
Connection: close
Content-Length: 0
Date: Thu, 26 Apr 2018 11:00:39 GMT
Etag: ""807c608ab629b9b73914da058c923c20""
Server: AmazonS3
X-Amz-Id-2: 5Af+DuU/y0Ngtkb6wCq1R0Oz+ZrOYi4apbPsCZTSlwhSqnqBNB64rFL4HfBG6WB9GETdRmQyKnw=
X-Amz-Request-Id: 7984823D8787C039
X-Amz-Server-Side-Encryption: AES256


-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go]
2018/04/26 19:00:38 [DEBUG] plugin: waiting for all plugin processes to complete...

Error: Error applying plan:

1 error(s) occurred:

* module.docdb.aws_instance.riak: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d

2018-04-26T19:00:38.547+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:38 [ERR] plugin: plugin server: accept unix /var/folders/k0/hk5r4k696x901sk4mh_vwcg40000gn/T/plugin243311916: use of closed network connection
Terraform does not automatically rollback in the face of errors.
Instead, your Terraform state file has been partially updated with
any resources that successfully completed. Please address the error
above and apply again to incrementally change your infrastructure.


2018-04-26T19:00:38.550+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-template_v1.0.0_x4
2018-04-26T19:00:38.551+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-aws_v1.16.0_x4
2018-04-26T19:00:38.555+0800 [DEBUG] plugin: plugin process exited: path=/usr/local/bin/terraform-provider-alicloud

```
# Expected Behavior
can create aws instance in China AWS
# Actual Behavior
I can create aws instance in China AWS with provider.aws v1.15.0
but I can't create aws instance with provider.aws v1.16.0",I2Nsb3VkLWNvbmZpZwptb3VudHM6CiAtIFtlcGhlbWVyYWwwLCBudWxsXQoKcHJlc2VydmVfa,https://github.com/hashicorp/terraform-provider-aws
28,4359,"# Terraform Version

Terraform v0.11.6
provider.aws v1.16.0

# Affected Resource(s)
aws_instance_ec2
# Terraform Configuration Files
module ""docdb"" {
  source = ""../../../../../../tradeshift-puppet/terraform/modules/aws/instances-cn/riak""
  environment = ""${var.pull_request}""
  stackname = ""${var.stackname}""
  role = ""docdb""
  owner = ""${var.owner}""
  decomission_date = ""${var.decomission_date}""
  instance_type = ""t2.large""
  instance_ami = ""${module.regional-common.base_ami_1604}""
  instance_key_name = ""${module.regional-common.key_name}""
  disable_api_termination = false
  ebs_volume_size = ""100""
  ebs_delete_on_termination = ""false""
  ebs_optimized = false
  vpc_security_groups = ""${data.terraform_remote_state.security_groups.stack_it_run_access_sg_id}""
  vpc_subnets = ""${data.terraform_remote_state.vpc.private_subnets}""
  postfix = "".${var.stackname}""
  dns_region_name = ""${module.regional-common.region_dns}""
  disk_encryption_key = ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx""
  count = ""1""
  cert_name = ""${module.environment-common.cert_name}""
}

# Debug Output
```
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 200 OK
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: text/xml;charset=UTF-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:36 GMT
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Vary: Accept-Encoding
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <DescribeInstanceAttributeResponse xmlns=""http://ec2.amazonaws.com/doc/2016-11-15/"">
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <requestId>35e6cd4e-cb70-4016-a250-53f0880cc9be</requestId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <instanceId>i-022a9894321a6d374</instanceId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:         <value>I2Nsb3VkLWNvbmZpZwptb3VudHM6CiAtIFtlcGhlbWVyYWwwLCBudWxsXQoKcHJlc2VydmVfaG9zdG5hbWU6IHRydWUKbWFuYWdlX2V0Y19ob3N0czogZmFsc2UKCmJvb3RjbWQ6CiAtICJlY2hvIHBheSA+IC9ldGMvdHJhZGVzaGlmdC9zdGFja25hbWUiCiAtICJlY2hvIGRvY2RiLSRJTlNUQU5DRV9JRCA+IC9ldGMvaG9zdG5hbWU7IGhvc3RuYW1lIC1GIC9ldGMvaG9zdG5hbWUiCiAtICJzZWQgLWkgLWUgJy9eMTI3LjAuMC4xL2QnIC9ldGMvaG9zdHM7IGVjaG8gMTI3LjAuMC4xIGRvY2RiLSRJTlNUQU5DRV9JRC5jbi1ub3J0aHdlc3QtMS50ZXN0LmJ3dHNpLmNuIGRvY2RiLSRJTlNUQU5DRV9JRCBsb2NhbGhvc3QgPj4gL2V0Yy9ob3N0cyIKICMgRGlzayBlbmNyeXB0aW9uIGtleSBmb3IgZXBoZW1lcmFsIGRpc2sgZHJpdmVzLCBzYXZlZCB0byByYW0gZHJpdmUKICMgVGhlIHNlZCBwYXJ0IHJlbW92ZXMgdGhlIChzdGRpbik9IG91dHB1dCBmcm9tIG9wZW5zc2wgZGdzdAogLSAiZWNobyAkSU5TVEFOQ0VfSUQgfCBvcGVuc3NsIGRnc3QgLXNoYTI1NiAtaG1hYyAnZHI2OVpVR1ZtMEVwMUVvL3hCb09UY2VmdUtWeCcgfCBzZWQgJ3MvXi4qPSAvLycgPiAvZGV2L3NobS9lbmNyeXB0ZWQtZGlzay5sdWtzLmtleSAmJiBjaG1vZCA0MDAgL2Rldi9zaG0vZW5jcnlwdGVkLWRpc2subHVrcy5rZXkiCgojIERvbid0IG92ZXJyaWRlIG91ciBhcHQgcmVwb3NpdG9yeSBsaXN0IG9uIGZpcnN0IGJvb3QKYXB0X3ByZXNlcnZlX3NvdXJjZXNfbGlzdDogdHJ1ZQoKIyBEb24ndCBwcmludCB0aGUgbmV3IHNzaCBrZXlzIG9uIHRoZSBjb25zb2xlCm5vX3NzaF9maW5nZXJwcmludHM6IHRydWUKCndyaXRlX2ZpbGVzOgogLSBwYXRoOiAvZXRjL3B1cHBldGxhYnMvcHVwcGV0L3B1cHBldC5jb25mCiAgIG93bmVyOiByb290OnJvb3QKICAgcGVybWlzc2lvbnM6ICcwNDQ0JwogICBjb250ZW50OiB8CiAgICAgW21haW5dCiAgICAgY2VydG5hbWUgPSBiYXNlLnRlc3RpbmcuYnd0c2kuY24KICAgICBlbnZpcm9ubWVudCA9IGNoaW5hcGF5CiAgICAgW2FnZW50XQogICAgIHJ1bmludGVydmFsID0gMTAweQogICAgIHNlcnZlciA9IHB1cHBldC5id3RzaS5jbgogICAgIG5vZGVfbmFtZSA9IGZhY3RlcgogICAgIG5vZGVfbmFtZV9mYWN0ID0gZnFkbgogICAgIHNwbGF5ID0gdHJ1ZQogICAgIHNwbGF5bGltaXQgPSA1bQo=</value>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     </userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: </DescribeInstanceAttributeResponse>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] DEBUG: Request ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ REQUEST POST-SIGN ]-----------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: POST / HTTP/1.1
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Host: ec2.cn-northwest-1.amazonaws.com.cn
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: User-Agent: aws-sdk-go/1.13.32 (go1.9.2; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.7
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Length: 95
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/ec2/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-security-token, Signature=60ac431f06b221bf7fe6d53ee72de1babb1aad5a5a4d17917e4d2f78a7533fef
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: application/x-www-form-urlencoded; charset=utf-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Date: 20180426T110036Z
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Accept-Encoding: gzip
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Action=DescribeInstanceCreditSpecifications&InstanceId.1=i-022a9894321a6d374&Version=2016-11-15
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Response ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 400 Bad Request
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:37 GMT
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <Response><Errors><Error><Code>UnsupportedOperation</Code><Message>The functionality you requested is not available in this region.</Message></Error></Errors><RequestID>53ace3cc-2597-49a0-99b2-3b9f1cb8567d</RequestID></Response>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Validate Response ec2/DescribeInstanceCreditSpecifications failed, not retrying, error UnsupportedOperation: The functionality you requested is not available in this region.
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalApplyPost, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalSequence, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [DEBUG] Uploading remote state to S3: {
  Body: buffer(0xc4203e17d0),
  Bucket: ""bwts-terraform-bucket-chinapay"",
  ContentLength: 20792,
  ContentType: ""application/json"",
  Key: ""cn-northwest-1/riak/terraform.tfstate"",
  ServerSideEncryption: ""AES256""
}
2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Request s3/PutObject Details:
---[ REQUEST POST-SIGN ]-----------------------------
PUT /cn-northwest-1/riak/terraform.tfstate HTTP/1.1
Host: bwts-terraform-bucket-chinapay.s3.cn-northwest-1.amazonaws.com.cn
User-Agent: aws-sdk-go/1.12.75 (go1.10.1; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.6
Content-Length: 20792
Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/s3/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-content-sha256;x-amz-date;x-amz-security-token;x-amz-server-side-encryption, Signature=8aa16110ae06a99b503e1f0546a4d6cf208fdf658ca29420baa2d649cec043e2
Content-Type: application/json
X-Amz-Content-Sha256: 04110e3e4cd97aa3e89cfe2f03487922bfd6b6346ec6dfe3fbe8fad9755e18c2
X-Amz-Date: 20180426T110037Z
X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
X-Amz-Server-Side-Encryption: AES256
Accept-Encoding: gzip

{
    ""version"": 3,
    ""terraform_version"": ""0.11.6"",
    ""serial"": 1,
    ""lineage"": ""b9c3c084-789e-7472-0b18-8698b4afc854"",
    ""modules"": [
        {
            ""path"": [
                ""root""
            ],
            ""outputs"": {},
            ""resources"": {
                ""data.terraform_remote_state.security_groups"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""bastion_host"": ""sg-e29feb8b"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/dev-stack-sgs/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""external_lb_sg_id"": ""sg-a55027cc"",
                            ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                            ""rundeck"": ""sg-b39eeada"",
                            ""stack_it_run_access_sg_id"": ""sg-9d5f28f4"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                },
                ""data.terraform_remote_state.vpc"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/vpc/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                            ""private_subnets"": ""subnet-454c962c,subnet-9722ddec"",
                            ""public_subnets"": ""subnet-5e4d9737,subnet-9022ddeb"",
                            ""vpc_cidr"": ""192.168.0.0/19"",
                            ""vpc_id"": ""vpc-34c61f5d"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""docdb""
            ],
            ""outputs"": {},
            ""resources"": {
                ""aws_instance.riak"": {
                    ""type"": ""aws_instance"",
                    ""depends_on"": [
                        ""data.template_file.cloud-init-riak""
                    ],
                    ""primary"": {
                        ""id"": ""i-022a9894321a6d374"",
                        ""attributes"": {
                            ""ami"": ""ami-6ec1d50c"",
                            ""associate_public_ip_address"": ""false"",
                            ""availability_zone"": ""cn-northwest-1a"",
                            ""disable_api_termination"": ""false"",
                            ""ebs_block_device.#"": ""4"",
                            ""ebs_block_device.3965576335.delete_on_termination"": ""false"",
                            ""ebs_block_device.3965576335.device_name"": ""/dev/xvdd"",
                            ""ebs_block_device.3965576335.encrypted"": ""false"",
                            ""ebs_block_device.3965576335.iops"": ""300"",
                            ""ebs_block_device.3965576335.snapshot_id"": """",
                            ""ebs_block_device.3965576335.volume_id"": ""vol-09cde364159031c5d"",
                            ""ebs_block_device.3965576335.volume_size"": ""100"",
                            ""ebs_block_device.3965576335.volume_type"": ""gp2"",
                            ""ebs_block_device.3986656952.delete_on_termination"": ""false"",
                            ""ebs_block_device.3986656952.device_name"": ""/dev/xvde"",
                            ""ebs_block_device.3986656952.encrypted"": ""false"",
                            ""ebs_block_device.3986656952.iops"": ""300"",
                            ""ebs_block_device.3986656952.snapshot_id"": """",
                            ""ebs_block_device.3986656952.volume_id"": ""vol-09c14e768bdd6dd4b"",
                            ""ebs_block_device.3986656952.volume_size"": ""100"",
                            ""ebs_block_device.3986656952.volume_type"": ""gp2"",
                            ""ebs_block_device.3994770134.delete_on_termination"": ""false"",
                            ""ebs_block_device.3994770134.device_name"": ""/dev/xvdg"",
                            ""ebs_block_device.3994770134.encrypted"": ""false"",
                            ""ebs_block_device.3994770134.iops"": ""300"",
                            ""ebs_block_device.3994770134.snapshot_id"": """",
                            ""ebs_block_device.3994770134.volume_id"": ""vol-0e1b3ff63114f3003"",
                            ""ebs_block_device.3994770134.volume_size"": ""100"",
                            ""ebs_block_device.3994770134.volume_type"": ""gp2"",
                            ""ebs_block_device.4023988449.delete_on_termination"": ""false"",
                            ""ebs_block_device.4023988449.device_name"": ""/dev/xvdf"",
                            ""ebs_block_device.4023988449.encrypted"": ""false"",
                            ""ebs_block_device.4023988449.iops"": ""300"",
                            ""ebs_block_device.4023988449.snapshot_id"": """",
                            ""ebs_block_device.4023988449.volume_id"": ""vol-015467a2fec64cfdd"",
                            ""ebs_block_device.4023988449.volume_size"": ""100"",
                            ""ebs_block_device.4023988449.volume_type"": ""gp2"",
                            ""ebs_optimized"": ""false"",
                            ""ephemeral_block_device.#"": ""0"",
                            ""get_password_data"": ""false"",
                            ""iam_instance_profile"": """",
                            ""id"": ""i-022a9894321a6d374"",
                            ""instance_state"": ""running"",
                            ""instance_type"": ""t2.large"",
                            ""ipv6_addresses.#"": ""0"",
                            ""key_name"": ""pay_china"",
                            ""monitoring"": ""false"",
                            ""network_interface.#"": ""0"",
                            ""network_interface_id"": ""eni-fd55c3a4"",
                            ""placement_group"": """",
                            ""primary_network_interface_id"": ""eni-fd55c3a4"",
                            ""private_dns"": ""ip-192-168-14-135.cn-northwest-1.compute.internal"",
                            ""private_ip"": ""192.168.14.135"",
                            ""public_dns"": """",
                            ""public_ip"": """",
                            ""root_block_device.#"": ""1"",
                            ""root_block_device.0.delete_on_termination"": ""true"",
                            ""root_block_device.0.iops"": ""100"",
                            ""root_block_device.0.volume_id"": ""vol-0884c92d17ea04d83"",
                            ""root_block_device.0.volume_size"": ""20"",
                            ""root_block_device.0.volume_type"": ""gp2"",
                            ""security_groups.#"": ""0"",
                            ""source_dest_check"": ""true"",
                            ""subnet_id"": ""subnet-454c962c"",
                            ""tags.%"": ""9"",
                            ""tags.Decomission_Date"": ""never"",
                            ""tags.Environment"": ""chinapay"",
                            ""tags.Name"": ""docdb.pay.cn-northwest-1.test.bwtsi.cn"",
                            ""tags.Owner"": ""operations"",
                            ""tags.Purpose"": ""Riak instance"",
                            ""tags.Role"": ""docdb"",
                            ""tags.Stackname"": ""pay"",
                            ""tags.Started_By"": ""operations"",
                            ""tags.Warning"": ""Managed by terraform, do not edit"",
                            ""tenancy"": ""default"",
                            ""user_data"": ""f35050bdeefa2a2d9f354c0e699a5f2d7c393365"",
                            ""volume_tags.%"": ""0"",
                            ""vpc_security_group_ids.#"": ""1"",
                            ""vpc_security_group_ids.2301982502"": ""sg-9d5f28f4""
                        },
                        ""meta"": {
                            ""e2bfb730-ecaa-11e6-8f88-34363bc7c4c0"": {
                                ""create"": 600000000000,
                                ""delete"": 1200000000000,
                                ""update"": 600000000000
                            },
                            ""schema_version"": ""1""
                        },
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.aws""
                },
                ""data.template_file.cloud-init-riak"": {
                    ""type"": ""template_file"",
                    ""depends_on"": [],
                    ""primary"": {
                        ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                        ""attributes"": {
                            ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                            ""rendered"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo pay \u003e /etc/tradeshift/stackname\""\n - \""echo docdb-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 docdb-$INSTANCE_ID.cn-northwest-1.test.bwtsi.cn docdb-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac 'dr69ZUGVm0Ep1Eo/xBoOTcefuKVx' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = base.testing.bwtsi.cn\n     environment = chinapay\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""template"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo ${STACK_NAME} \u003e /etc/tradeshift/stackname\""\n - \""echo ${HOSTNAME}-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 ${HOSTNAME}-$INSTANCE_ID.${REGION_DNS} ${HOSTNAME}-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac '${DISK_ENCRYPTION_KEY}' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = ${CERT_NAME}\n     environment = ${ENVIRONMENT}\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""vars.%"": ""6"",
                            ""vars.CERT_NAME"": ""base.testing.bwtsi.cn"",
                            ""vars.DISK_ENCRYPTION_KEY"": ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx"",
                            ""vars.ENVIRONMENT"": ""chinapay"",
                            ""vars.HOSTNAME"": ""docdb"",
                            ""vars.REGION_DNS"": ""cn-northwest-1.test.bwtsi.cn"",
                            ""vars.STACK_NAME"": ""pay""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.template""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""environment-common""
            ],
            ""outputs"": {
                ""cert_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""base.testing.bwtsi.cn""
                },
                ""domain_name_search"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test.bwtsi.cn""
                },
                ""environment_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""chinapay""
                },
                ""environment_shortname"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                },
                ""security_group_name_postfix"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": "".chinapay""
                },
                ""site"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""global-common""
            ],
            ""outputs"": {
                ""all_cidr_eu_west_1"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16,172.25.128.0/21,172.25.120.0/21,172.25.112.0/21,172.31.248.0/21,172.31.240.0/21,172.21.0.0/19,172.19.0.0/19,172.22.0.0/19,172.18.0.0/19""
                },
                ""base_tradeshift_net_account_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""694518486591""
                },
                ""gcsops_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.17.22.143/32""
                },
                ""gcsops_cn_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""54.223.95.7/32,54.223.198.170/32,54.223.211.136/32,52.80.34.103/32""
                },
                ""office_ips"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,178.49.148.100/32,87.243.3.34/32,109.166.189.50/32,78.40.84.83/32,4.53.137.82/32,173.247.199.142/32,58.211.225.90/32,202.181.248.19/32,109.70.48.99/32""
                },
                ""prod_base_tradeshift_net_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""prod.base.tradeshift.net""
                },
                ""prod_base_tradeshift_net_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16""
                },
                ""prod_base_tradeshift_net_vpc_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""vpc-264c9042""
                },
                ""prod_ts_sv_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.50.175.210/32,52.30.44.136/32,52.50.189.21/32""
                },
                ""test_bwtsi_cn_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/19""
                },
                ""test_bwtsi_cn_vpc_private_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.12.0/22,192.168.16.0/22""
                },
                ""test_bwtsi_cn_vpc_public_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/22,192.168.4.0/22""
                },
                ""tradeshift_com_public_zone_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""Z2OX0I8SM94425""
                },
                ""translation_service_clients"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,4.53.137.82/32,173.247.199.142/32,130.185.137.106/32,202.181.248.19/32,52.17.87.187/32,52.30.44.136/32,52.30.58.232/32,52.31.203.95/32,52.49.119.80/32,52.49.49.111/32,52.49.5.171/32,52.50.108.6/32,52.50.175.210/32,52.50.189.21/32,52.50.255.154/32,52.50.91.189/32,54.195.199.108/32,54.78.39.106/32,58.211.225.90/32,89.150.143.118/32,54.222.150.122/32,54.222.194.56/32,109.70.48.99/32""
                },
                ""truebn_org_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""34.253.176.198/32,34.241.59.39/32""
                },
                ""userdata_path"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/modules/eff596488a3055adf7024741dffb9ca1/..""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""regional-common""
            ],
            ""outputs"": {
                ""availability_zones"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1a,cn-northwest-1b""
                },
                ""backend_region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""base_ami_1604"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-6ec1d50c""
                },
                ""base_ami_1604_zfs"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-edf8ec8f""
                },
                ""chinapay_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""key_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""pay_china""
                },
                ""region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""region_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""region_env"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        }
    ]
}

-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go] DEBUG: Response s3/PutObject Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 200 OK
Connection: close
Content-Length: 0
Date: Thu, 26 Apr 2018 11:00:39 GMT
Etag: ""807c608ab629b9b73914da058c923c20""
Server: AmazonS3
X-Amz-Id-2: 5Af+DuU/y0Ngtkb6wCq1R0Oz+ZrOYi4apbPsCZTSlwhSqnqBNB64rFL4HfBG6WB9GETdRmQyKnw=
X-Amz-Request-Id: 7984823D8787C039
X-Amz-Server-Side-Encryption: AES256


-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go]
2018/04/26 19:00:38 [DEBUG] plugin: waiting for all plugin processes to complete...

Error: Error applying plan:

1 error(s) occurred:

* module.docdb.aws_instance.riak: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d

2018-04-26T19:00:38.547+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:38 [ERR] plugin: plugin server: accept unix /var/folders/k0/hk5r4k696x901sk4mh_vwcg40000gn/T/plugin243311916: use of closed network connection
Terraform does not automatically rollback in the face of errors.
Instead, your Terraform state file has been partially updated with
any resources that successfully completed. Please address the error
above and apply again to incrementally change your infrastructure.


2018-04-26T19:00:38.550+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-template_v1.0.0_x4
2018-04-26T19:00:38.551+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-aws_v1.16.0_x4
2018-04-26T19:00:38.555+0800 [DEBUG] plugin: plugin process exited: path=/usr/local/bin/terraform-provider-alicloud

```
# Expected Behavior
can create aws instance in China AWS
# Actual Behavior
I can create aws instance in China AWS with provider.aws v1.15.0
but I can't create aws instance with provider.aws v1.16.0",IC9ldGMvaG9zdG5hbWU7IGhvc3RuYW1lIC1GIC9ldGMvaG9zdG5hbWUiCiAtICJzZWQgLWkgL,https://github.com/hashicorp/terraform-provider-aws
29,4359,"# Terraform Version

Terraform v0.11.6
provider.aws v1.16.0

# Affected Resource(s)
aws_instance_ec2
# Terraform Configuration Files
module ""docdb"" {
  source = ""../../../../../../tradeshift-puppet/terraform/modules/aws/instances-cn/riak""
  environment = ""${var.pull_request}""
  stackname = ""${var.stackname}""
  role = ""docdb""
  owner = ""${var.owner}""
  decomission_date = ""${var.decomission_date}""
  instance_type = ""t2.large""
  instance_ami = ""${module.regional-common.base_ami_1604}""
  instance_key_name = ""${module.regional-common.key_name}""
  disable_api_termination = false
  ebs_volume_size = ""100""
  ebs_delete_on_termination = ""false""
  ebs_optimized = false
  vpc_security_groups = ""${data.terraform_remote_state.security_groups.stack_it_run_access_sg_id}""
  vpc_subnets = ""${data.terraform_remote_state.vpc.private_subnets}""
  postfix = "".${var.stackname}""
  dns_region_name = ""${module.regional-common.region_dns}""
  disk_encryption_key = ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx""
  count = ""1""
  cert_name = ""${module.environment-common.cert_name}""
}

# Debug Output
```
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 200 OK
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: text/xml;charset=UTF-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:36 GMT
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Vary: Accept-Encoding
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <DescribeInstanceAttributeResponse xmlns=""http://ec2.amazonaws.com/doc/2016-11-15/"">
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <requestId>35e6cd4e-cb70-4016-a250-53f0880cc9be</requestId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <instanceId>i-022a9894321a6d374</instanceId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:         <value>I2Nsb3VkLWNvbmZpZwptb3VudHM6CiAtIFtlcGhlbWVyYWwwLCBudWxsXQoKcHJlc2VydmVfaG9zdG5hbWU6IHRydWUKbWFuYWdlX2V0Y19ob3N0czogZmFsc2UKCmJvb3RjbWQ6CiAtICJlY2hvIHBheSA+IC9ldGMvdHJhZGVzaGlmdC9zdGFja25hbWUiCiAtICJlY2hvIGRvY2RiLSRJTlNUQU5DRV9JRCA+IC9ldGMvaG9zdG5hbWU7IGhvc3RuYW1lIC1GIC9ldGMvaG9zdG5hbWUiCiAtICJzZWQgLWkgLWUgJy9eMTI3LjAuMC4xL2QnIC9ldGMvaG9zdHM7IGVjaG8gMTI3LjAuMC4xIGRvY2RiLSRJTlNUQU5DRV9JRC5jbi1ub3J0aHdlc3QtMS50ZXN0LmJ3dHNpLmNuIGRvY2RiLSRJTlNUQU5DRV9JRCBsb2NhbGhvc3QgPj4gL2V0Yy9ob3N0cyIKICMgRGlzayBlbmNyeXB0aW9uIGtleSBmb3IgZXBoZW1lcmFsIGRpc2sgZHJpdmVzLCBzYXZlZCB0byByYW0gZHJpdmUKICMgVGhlIHNlZCBwYXJ0IHJlbW92ZXMgdGhlIChzdGRpbik9IG91dHB1dCBmcm9tIG9wZW5zc2wgZGdzdAogLSAiZWNobyAkSU5TVEFOQ0VfSUQgfCBvcGVuc3NsIGRnc3QgLXNoYTI1NiAtaG1hYyAnZHI2OVpVR1ZtMEVwMUVvL3hCb09UY2VmdUtWeCcgfCBzZWQgJ3MvXi4qPSAvLycgPiAvZGV2L3NobS9lbmNyeXB0ZWQtZGlzay5sdWtzLmtleSAmJiBjaG1vZCA0MDAgL2Rldi9zaG0vZW5jcnlwdGVkLWRpc2subHVrcy5rZXkiCgojIERvbid0IG92ZXJyaWRlIG91ciBhcHQgcmVwb3NpdG9yeSBsaXN0IG9uIGZpcnN0IGJvb3QKYXB0X3ByZXNlcnZlX3NvdXJjZXNfbGlzdDogdHJ1ZQoKIyBEb24ndCBwcmludCB0aGUgbmV3IHNzaCBrZXlzIG9uIHRoZSBjb25zb2xlCm5vX3NzaF9maW5nZXJwcmludHM6IHRydWUKCndyaXRlX2ZpbGVzOgogLSBwYXRoOiAvZXRjL3B1cHBldGxhYnMvcHVwcGV0L3B1cHBldC5jb25mCiAgIG93bmVyOiByb290OnJvb3QKICAgcGVybWlzc2lvbnM6ICcwNDQ0JwogICBjb250ZW50OiB8CiAgICAgW21haW5dCiAgICAgY2VydG5hbWUgPSBiYXNlLnRlc3RpbmcuYnd0c2kuY24KICAgICBlbnZpcm9ubWVudCA9IGNoaW5hcGF5CiAgICAgW2FnZW50XQogICAgIHJ1bmludGVydmFsID0gMTAweQogICAgIHNlcnZlciA9IHB1cHBldC5id3RzaS5jbgogICAgIG5vZGVfbmFtZSA9IGZhY3RlcgogICAgIG5vZGVfbmFtZV9mYWN0ID0gZnFkbgogICAgIHNwbGF5ID0gdHJ1ZQogICAgIHNwbGF5bGltaXQgPSA1bQo=</value>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     </userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: </DescribeInstanceAttributeResponse>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] DEBUG: Request ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ REQUEST POST-SIGN ]-----------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: POST / HTTP/1.1
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Host: ec2.cn-northwest-1.amazonaws.com.cn
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: User-Agent: aws-sdk-go/1.13.32 (go1.9.2; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.7
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Length: 95
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/ec2/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-security-token, Signature=60ac431f06b221bf7fe6d53ee72de1babb1aad5a5a4d17917e4d2f78a7533fef
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: application/x-www-form-urlencoded; charset=utf-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Date: 20180426T110036Z
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Accept-Encoding: gzip
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Action=DescribeInstanceCreditSpecifications&InstanceId.1=i-022a9894321a6d374&Version=2016-11-15
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Response ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 400 Bad Request
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:37 GMT
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <Response><Errors><Error><Code>UnsupportedOperation</Code><Message>The functionality you requested is not available in this region.</Message></Error></Errors><RequestID>53ace3cc-2597-49a0-99b2-3b9f1cb8567d</RequestID></Response>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Validate Response ec2/DescribeInstanceCreditSpecifications failed, not retrying, error UnsupportedOperation: The functionality you requested is not available in this region.
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalApplyPost, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalSequence, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [DEBUG] Uploading remote state to S3: {
  Body: buffer(0xc4203e17d0),
  Bucket: ""bwts-terraform-bucket-chinapay"",
  ContentLength: 20792,
  ContentType: ""application/json"",
  Key: ""cn-northwest-1/riak/terraform.tfstate"",
  ServerSideEncryption: ""AES256""
}
2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Request s3/PutObject Details:
---[ REQUEST POST-SIGN ]-----------------------------
PUT /cn-northwest-1/riak/terraform.tfstate HTTP/1.1
Host: bwts-terraform-bucket-chinapay.s3.cn-northwest-1.amazonaws.com.cn
User-Agent: aws-sdk-go/1.12.75 (go1.10.1; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.6
Content-Length: 20792
Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/s3/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-content-sha256;x-amz-date;x-amz-security-token;x-amz-server-side-encryption, Signature=8aa16110ae06a99b503e1f0546a4d6cf208fdf658ca29420baa2d649cec043e2
Content-Type: application/json
X-Amz-Content-Sha256: 04110e3e4cd97aa3e89cfe2f03487922bfd6b6346ec6dfe3fbe8fad9755e18c2
X-Amz-Date: 20180426T110037Z
X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
X-Amz-Server-Side-Encryption: AES256
Accept-Encoding: gzip

{
    ""version"": 3,
    ""terraform_version"": ""0.11.6"",
    ""serial"": 1,
    ""lineage"": ""b9c3c084-789e-7472-0b18-8698b4afc854"",
    ""modules"": [
        {
            ""path"": [
                ""root""
            ],
            ""outputs"": {},
            ""resources"": {
                ""data.terraform_remote_state.security_groups"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""bastion_host"": ""sg-e29feb8b"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/dev-stack-sgs/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""external_lb_sg_id"": ""sg-a55027cc"",
                            ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                            ""rundeck"": ""sg-b39eeada"",
                            ""stack_it_run_access_sg_id"": ""sg-9d5f28f4"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                },
                ""data.terraform_remote_state.vpc"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/vpc/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                            ""private_subnets"": ""subnet-454c962c,subnet-9722ddec"",
                            ""public_subnets"": ""subnet-5e4d9737,subnet-9022ddeb"",
                            ""vpc_cidr"": ""192.168.0.0/19"",
                            ""vpc_id"": ""vpc-34c61f5d"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""docdb""
            ],
            ""outputs"": {},
            ""resources"": {
                ""aws_instance.riak"": {
                    ""type"": ""aws_instance"",
                    ""depends_on"": [
                        ""data.template_file.cloud-init-riak""
                    ],
                    ""primary"": {
                        ""id"": ""i-022a9894321a6d374"",
                        ""attributes"": {
                            ""ami"": ""ami-6ec1d50c"",
                            ""associate_public_ip_address"": ""false"",
                            ""availability_zone"": ""cn-northwest-1a"",
                            ""disable_api_termination"": ""false"",
                            ""ebs_block_device.#"": ""4"",
                            ""ebs_block_device.3965576335.delete_on_termination"": ""false"",
                            ""ebs_block_device.3965576335.device_name"": ""/dev/xvdd"",
                            ""ebs_block_device.3965576335.encrypted"": ""false"",
                            ""ebs_block_device.3965576335.iops"": ""300"",
                            ""ebs_block_device.3965576335.snapshot_id"": """",
                            ""ebs_block_device.3965576335.volume_id"": ""vol-09cde364159031c5d"",
                            ""ebs_block_device.3965576335.volume_size"": ""100"",
                            ""ebs_block_device.3965576335.volume_type"": ""gp2"",
                            ""ebs_block_device.3986656952.delete_on_termination"": ""false"",
                            ""ebs_block_device.3986656952.device_name"": ""/dev/xvde"",
                            ""ebs_block_device.3986656952.encrypted"": ""false"",
                            ""ebs_block_device.3986656952.iops"": ""300"",
                            ""ebs_block_device.3986656952.snapshot_id"": """",
                            ""ebs_block_device.3986656952.volume_id"": ""vol-09c14e768bdd6dd4b"",
                            ""ebs_block_device.3986656952.volume_size"": ""100"",
                            ""ebs_block_device.3986656952.volume_type"": ""gp2"",
                            ""ebs_block_device.3994770134.delete_on_termination"": ""false"",
                            ""ebs_block_device.3994770134.device_name"": ""/dev/xvdg"",
                            ""ebs_block_device.3994770134.encrypted"": ""false"",
                            ""ebs_block_device.3994770134.iops"": ""300"",
                            ""ebs_block_device.3994770134.snapshot_id"": """",
                            ""ebs_block_device.3994770134.volume_id"": ""vol-0e1b3ff63114f3003"",
                            ""ebs_block_device.3994770134.volume_size"": ""100"",
                            ""ebs_block_device.3994770134.volume_type"": ""gp2"",
                            ""ebs_block_device.4023988449.delete_on_termination"": ""false"",
                            ""ebs_block_device.4023988449.device_name"": ""/dev/xvdf"",
                            ""ebs_block_device.4023988449.encrypted"": ""false"",
                            ""ebs_block_device.4023988449.iops"": ""300"",
                            ""ebs_block_device.4023988449.snapshot_id"": """",
                            ""ebs_block_device.4023988449.volume_id"": ""vol-015467a2fec64cfdd"",
                            ""ebs_block_device.4023988449.volume_size"": ""100"",
                            ""ebs_block_device.4023988449.volume_type"": ""gp2"",
                            ""ebs_optimized"": ""false"",
                            ""ephemeral_block_device.#"": ""0"",
                            ""get_password_data"": ""false"",
                            ""iam_instance_profile"": """",
                            ""id"": ""i-022a9894321a6d374"",
                            ""instance_state"": ""running"",
                            ""instance_type"": ""t2.large"",
                            ""ipv6_addresses.#"": ""0"",
                            ""key_name"": ""pay_china"",
                            ""monitoring"": ""false"",
                            ""network_interface.#"": ""0"",
                            ""network_interface_id"": ""eni-fd55c3a4"",
                            ""placement_group"": """",
                            ""primary_network_interface_id"": ""eni-fd55c3a4"",
                            ""private_dns"": ""ip-192-168-14-135.cn-northwest-1.compute.internal"",
                            ""private_ip"": ""192.168.14.135"",
                            ""public_dns"": """",
                            ""public_ip"": """",
                            ""root_block_device.#"": ""1"",
                            ""root_block_device.0.delete_on_termination"": ""true"",
                            ""root_block_device.0.iops"": ""100"",
                            ""root_block_device.0.volume_id"": ""vol-0884c92d17ea04d83"",
                            ""root_block_device.0.volume_size"": ""20"",
                            ""root_block_device.0.volume_type"": ""gp2"",
                            ""security_groups.#"": ""0"",
                            ""source_dest_check"": ""true"",
                            ""subnet_id"": ""subnet-454c962c"",
                            ""tags.%"": ""9"",
                            ""tags.Decomission_Date"": ""never"",
                            ""tags.Environment"": ""chinapay"",
                            ""tags.Name"": ""docdb.pay.cn-northwest-1.test.bwtsi.cn"",
                            ""tags.Owner"": ""operations"",
                            ""tags.Purpose"": ""Riak instance"",
                            ""tags.Role"": ""docdb"",
                            ""tags.Stackname"": ""pay"",
                            ""tags.Started_By"": ""operations"",
                            ""tags.Warning"": ""Managed by terraform, do not edit"",
                            ""tenancy"": ""default"",
                            ""user_data"": ""f35050bdeefa2a2d9f354c0e699a5f2d7c393365"",
                            ""volume_tags.%"": ""0"",
                            ""vpc_security_group_ids.#"": ""1"",
                            ""vpc_security_group_ids.2301982502"": ""sg-9d5f28f4""
                        },
                        ""meta"": {
                            ""e2bfb730-ecaa-11e6-8f88-34363bc7c4c0"": {
                                ""create"": 600000000000,
                                ""delete"": 1200000000000,
                                ""update"": 600000000000
                            },
                            ""schema_version"": ""1""
                        },
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.aws""
                },
                ""data.template_file.cloud-init-riak"": {
                    ""type"": ""template_file"",
                    ""depends_on"": [],
                    ""primary"": {
                        ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                        ""attributes"": {
                            ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                            ""rendered"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo pay \u003e /etc/tradeshift/stackname\""\n - \""echo docdb-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 docdb-$INSTANCE_ID.cn-northwest-1.test.bwtsi.cn docdb-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac 'dr69ZUGVm0Ep1Eo/xBoOTcefuKVx' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = base.testing.bwtsi.cn\n     environment = chinapay\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""template"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo ${STACK_NAME} \u003e /etc/tradeshift/stackname\""\n - \""echo ${HOSTNAME}-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 ${HOSTNAME}-$INSTANCE_ID.${REGION_DNS} ${HOSTNAME}-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac '${DISK_ENCRYPTION_KEY}' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = ${CERT_NAME}\n     environment = ${ENVIRONMENT}\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""vars.%"": ""6"",
                            ""vars.CERT_NAME"": ""base.testing.bwtsi.cn"",
                            ""vars.DISK_ENCRYPTION_KEY"": ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx"",
                            ""vars.ENVIRONMENT"": ""chinapay"",
                            ""vars.HOSTNAME"": ""docdb"",
                            ""vars.REGION_DNS"": ""cn-northwest-1.test.bwtsi.cn"",
                            ""vars.STACK_NAME"": ""pay""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.template""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""environment-common""
            ],
            ""outputs"": {
                ""cert_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""base.testing.bwtsi.cn""
                },
                ""domain_name_search"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test.bwtsi.cn""
                },
                ""environment_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""chinapay""
                },
                ""environment_shortname"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                },
                ""security_group_name_postfix"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": "".chinapay""
                },
                ""site"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""global-common""
            ],
            ""outputs"": {
                ""all_cidr_eu_west_1"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16,172.25.128.0/21,172.25.120.0/21,172.25.112.0/21,172.31.248.0/21,172.31.240.0/21,172.21.0.0/19,172.19.0.0/19,172.22.0.0/19,172.18.0.0/19""
                },
                ""base_tradeshift_net_account_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""694518486591""
                },
                ""gcsops_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.17.22.143/32""
                },
                ""gcsops_cn_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""54.223.95.7/32,54.223.198.170/32,54.223.211.136/32,52.80.34.103/32""
                },
                ""office_ips"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,178.49.148.100/32,87.243.3.34/32,109.166.189.50/32,78.40.84.83/32,4.53.137.82/32,173.247.199.142/32,58.211.225.90/32,202.181.248.19/32,109.70.48.99/32""
                },
                ""prod_base_tradeshift_net_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""prod.base.tradeshift.net""
                },
                ""prod_base_tradeshift_net_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16""
                },
                ""prod_base_tradeshift_net_vpc_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""vpc-264c9042""
                },
                ""prod_ts_sv_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.50.175.210/32,52.30.44.136/32,52.50.189.21/32""
                },
                ""test_bwtsi_cn_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/19""
                },
                ""test_bwtsi_cn_vpc_private_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.12.0/22,192.168.16.0/22""
                },
                ""test_bwtsi_cn_vpc_public_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/22,192.168.4.0/22""
                },
                ""tradeshift_com_public_zone_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""Z2OX0I8SM94425""
                },
                ""translation_service_clients"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,4.53.137.82/32,173.247.199.142/32,130.185.137.106/32,202.181.248.19/32,52.17.87.187/32,52.30.44.136/32,52.30.58.232/32,52.31.203.95/32,52.49.119.80/32,52.49.49.111/32,52.49.5.171/32,52.50.108.6/32,52.50.175.210/32,52.50.189.21/32,52.50.255.154/32,52.50.91.189/32,54.195.199.108/32,54.78.39.106/32,58.211.225.90/32,89.150.143.118/32,54.222.150.122/32,54.222.194.56/32,109.70.48.99/32""
                },
                ""truebn_org_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""34.253.176.198/32,34.241.59.39/32""
                },
                ""userdata_path"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/modules/eff596488a3055adf7024741dffb9ca1/..""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""regional-common""
            ],
            ""outputs"": {
                ""availability_zones"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1a,cn-northwest-1b""
                },
                ""backend_region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""base_ami_1604"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-6ec1d50c""
                },
                ""base_ami_1604_zfs"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-edf8ec8f""
                },
                ""chinapay_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""key_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""pay_china""
                },
                ""region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""region_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""region_env"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        }
    ]
}

-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go] DEBUG: Response s3/PutObject Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 200 OK
Connection: close
Content-Length: 0
Date: Thu, 26 Apr 2018 11:00:39 GMT
Etag: ""807c608ab629b9b73914da058c923c20""
Server: AmazonS3
X-Amz-Id-2: 5Af+DuU/y0Ngtkb6wCq1R0Oz+ZrOYi4apbPsCZTSlwhSqnqBNB64rFL4HfBG6WB9GETdRmQyKnw=
X-Amz-Request-Id: 7984823D8787C039
X-Amz-Server-Side-Encryption: AES256


-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go]
2018/04/26 19:00:38 [DEBUG] plugin: waiting for all plugin processes to complete...

Error: Error applying plan:

1 error(s) occurred:

* module.docdb.aws_instance.riak: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d

2018-04-26T19:00:38.547+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:38 [ERR] plugin: plugin server: accept unix /var/folders/k0/hk5r4k696x901sk4mh_vwcg40000gn/T/plugin243311916: use of closed network connection
Terraform does not automatically rollback in the face of errors.
Instead, your Terraform state file has been partially updated with
any resources that successfully completed. Please address the error
above and apply again to incrementally change your infrastructure.


2018-04-26T19:00:38.550+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-template_v1.0.0_x4
2018-04-26T19:00:38.551+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-aws_v1.16.0_x4
2018-04-26T19:00:38.555+0800 [DEBUG] plugin: plugin process exited: path=/usr/local/bin/terraform-provider-alicloud

```
# Expected Behavior
can create aws instance in China AWS
# Actual Behavior
I can create aws instance in China AWS with provider.aws v1.15.0
but I can't create aws instance with provider.aws v1.16.0",IC9ldGMvdHJhZGVzaGlmdC9zdGFja25hbWUiCiAtICJlY2hvIGRvY2RiLSRJTlNUQU5DRV9JR,https://github.com/hashicorp/terraform-provider-aws
30,4359,"# Terraform Version

Terraform v0.11.6
provider.aws v1.16.0

# Affected Resource(s)
aws_instance_ec2
# Terraform Configuration Files
module ""docdb"" {
  source = ""../../../../../../tradeshift-puppet/terraform/modules/aws/instances-cn/riak""
  environment = ""${var.pull_request}""
  stackname = ""${var.stackname}""
  role = ""docdb""
  owner = ""${var.owner}""
  decomission_date = ""${var.decomission_date}""
  instance_type = ""t2.large""
  instance_ami = ""${module.regional-common.base_ami_1604}""
  instance_key_name = ""${module.regional-common.key_name}""
  disable_api_termination = false
  ebs_volume_size = ""100""
  ebs_delete_on_termination = ""false""
  ebs_optimized = false
  vpc_security_groups = ""${data.terraform_remote_state.security_groups.stack_it_run_access_sg_id}""
  vpc_subnets = ""${data.terraform_remote_state.vpc.private_subnets}""
  postfix = "".${var.stackname}""
  dns_region_name = ""${module.regional-common.region_dns}""
  disk_encryption_key = ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx""
  count = ""1""
  cert_name = ""${module.environment-common.cert_name}""
}

# Debug Output
```
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 200 OK
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: text/xml;charset=UTF-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:36 GMT
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Vary: Accept-Encoding
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <DescribeInstanceAttributeResponse xmlns=""http://ec2.amazonaws.com/doc/2016-11-15/"">
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <requestId>35e6cd4e-cb70-4016-a250-53f0880cc9be</requestId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <instanceId>i-022a9894321a6d374</instanceId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:         <value>I2Nsb3VkLWNvbmZpZwptb3VudHM6CiAtIFtlcGhlbWVyYWwwLCBudWxsXQoKcHJlc2VydmVfaG9zdG5hbWU6IHRydWUKbWFuYWdlX2V0Y19ob3N0czogZmFsc2UKCmJvb3RjbWQ6CiAtICJlY2hvIHBheSA+IC9ldGMvdHJhZGVzaGlmdC9zdGFja25hbWUiCiAtICJlY2hvIGRvY2RiLSRJTlNUQU5DRV9JRCA+IC9ldGMvaG9zdG5hbWU7IGhvc3RuYW1lIC1GIC9ldGMvaG9zdG5hbWUiCiAtICJzZWQgLWkgLWUgJy9eMTI3LjAuMC4xL2QnIC9ldGMvaG9zdHM7IGVjaG8gMTI3LjAuMC4xIGRvY2RiLSRJTlNUQU5DRV9JRC5jbi1ub3J0aHdlc3QtMS50ZXN0LmJ3dHNpLmNuIGRvY2RiLSRJTlNUQU5DRV9JRCBsb2NhbGhvc3QgPj4gL2V0Yy9ob3N0cyIKICMgRGlzayBlbmNyeXB0aW9uIGtleSBmb3IgZXBoZW1lcmFsIGRpc2sgZHJpdmVzLCBzYXZlZCB0byByYW0gZHJpdmUKICMgVGhlIHNlZCBwYXJ0IHJlbW92ZXMgdGhlIChzdGRpbik9IG91dHB1dCBmcm9tIG9wZW5zc2wgZGdzdAogLSAiZWNobyAkSU5TVEFOQ0VfSUQgfCBvcGVuc3NsIGRnc3QgLXNoYTI1NiAtaG1hYyAnZHI2OVpVR1ZtMEVwMUVvL3hCb09UY2VmdUtWeCcgfCBzZWQgJ3MvXi4qPSAvLycgPiAvZGV2L3NobS9lbmNyeXB0ZWQtZGlzay5sdWtzLmtleSAmJiBjaG1vZCA0MDAgL2Rldi9zaG0vZW5jcnlwdGVkLWRpc2subHVrcy5rZXkiCgojIERvbid0IG92ZXJyaWRlIG91ciBhcHQgcmVwb3NpdG9yeSBsaXN0IG9uIGZpcnN0IGJvb3QKYXB0X3ByZXNlcnZlX3NvdXJjZXNfbGlzdDogdHJ1ZQoKIyBEb24ndCBwcmludCB0aGUgbmV3IHNzaCBrZXlzIG9uIHRoZSBjb25zb2xlCm5vX3NzaF9maW5nZXJwcmludHM6IHRydWUKCndyaXRlX2ZpbGVzOgogLSBwYXRoOiAvZXRjL3B1cHBldGxhYnMvcHVwcGV0L3B1cHBldC5jb25mCiAgIG93bmVyOiByb290OnJvb3QKICAgcGVybWlzc2lvbnM6ICcwNDQ0JwogICBjb250ZW50OiB8CiAgICAgW21haW5dCiAgICAgY2VydG5hbWUgPSBiYXNlLnRlc3RpbmcuYnd0c2kuY24KICAgICBlbnZpcm9ubWVudCA9IGNoaW5hcGF5CiAgICAgW2FnZW50XQogICAgIHJ1bmludGVydmFsID0gMTAweQogICAgIHNlcnZlciA9IHB1cHBldC5id3RzaS5jbgogICAgIG5vZGVfbmFtZSA9IGZhY3RlcgogICAgIG5vZGVfbmFtZV9mYWN0ID0gZnFkbgogICAgIHNwbGF5ID0gdHJ1ZQogICAgIHNwbGF5bGltaXQgPSA1bQo=</value>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     </userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: </DescribeInstanceAttributeResponse>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] DEBUG: Request ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ REQUEST POST-SIGN ]-----------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: POST / HTTP/1.1
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Host: ec2.cn-northwest-1.amazonaws.com.cn
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: User-Agent: aws-sdk-go/1.13.32 (go1.9.2; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.7
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Length: 95
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/ec2/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-security-token, Signature=60ac431f06b221bf7fe6d53ee72de1babb1aad5a5a4d17917e4d2f78a7533fef
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: application/x-www-form-urlencoded; charset=utf-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Date: 20180426T110036Z
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Accept-Encoding: gzip
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Action=DescribeInstanceCreditSpecifications&InstanceId.1=i-022a9894321a6d374&Version=2016-11-15
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Response ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 400 Bad Request
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:37 GMT
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <Response><Errors><Error><Code>UnsupportedOperation</Code><Message>The functionality you requested is not available in this region.</Message></Error></Errors><RequestID>53ace3cc-2597-49a0-99b2-3b9f1cb8567d</RequestID></Response>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Validate Response ec2/DescribeInstanceCreditSpecifications failed, not retrying, error UnsupportedOperation: The functionality you requested is not available in this region.
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalApplyPost, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalSequence, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [DEBUG] Uploading remote state to S3: {
  Body: buffer(0xc4203e17d0),
  Bucket: ""bwts-terraform-bucket-chinapay"",
  ContentLength: 20792,
  ContentType: ""application/json"",
  Key: ""cn-northwest-1/riak/terraform.tfstate"",
  ServerSideEncryption: ""AES256""
}
2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Request s3/PutObject Details:
---[ REQUEST POST-SIGN ]-----------------------------
PUT /cn-northwest-1/riak/terraform.tfstate HTTP/1.1
Host: bwts-terraform-bucket-chinapay.s3.cn-northwest-1.amazonaws.com.cn
User-Agent: aws-sdk-go/1.12.75 (go1.10.1; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.6
Content-Length: 20792
Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/s3/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-content-sha256;x-amz-date;x-amz-security-token;x-amz-server-side-encryption, Signature=8aa16110ae06a99b503e1f0546a4d6cf208fdf658ca29420baa2d649cec043e2
Content-Type: application/json
X-Amz-Content-Sha256: 04110e3e4cd97aa3e89cfe2f03487922bfd6b6346ec6dfe3fbe8fad9755e18c2
X-Amz-Date: 20180426T110037Z
X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
X-Amz-Server-Side-Encryption: AES256
Accept-Encoding: gzip

{
    ""version"": 3,
    ""terraform_version"": ""0.11.6"",
    ""serial"": 1,
    ""lineage"": ""b9c3c084-789e-7472-0b18-8698b4afc854"",
    ""modules"": [
        {
            ""path"": [
                ""root""
            ],
            ""outputs"": {},
            ""resources"": {
                ""data.terraform_remote_state.security_groups"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""bastion_host"": ""sg-e29feb8b"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/dev-stack-sgs/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""external_lb_sg_id"": ""sg-a55027cc"",
                            ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                            ""rundeck"": ""sg-b39eeada"",
                            ""stack_it_run_access_sg_id"": ""sg-9d5f28f4"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                },
                ""data.terraform_remote_state.vpc"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/vpc/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                            ""private_subnets"": ""subnet-454c962c,subnet-9722ddec"",
                            ""public_subnets"": ""subnet-5e4d9737,subnet-9022ddeb"",
                            ""vpc_cidr"": ""192.168.0.0/19"",
                            ""vpc_id"": ""vpc-34c61f5d"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""docdb""
            ],
            ""outputs"": {},
            ""resources"": {
                ""aws_instance.riak"": {
                    ""type"": ""aws_instance"",
                    ""depends_on"": [
                        ""data.template_file.cloud-init-riak""
                    ],
                    ""primary"": {
                        ""id"": ""i-022a9894321a6d374"",
                        ""attributes"": {
                            ""ami"": ""ami-6ec1d50c"",
                            ""associate_public_ip_address"": ""false"",
                            ""availability_zone"": ""cn-northwest-1a"",
                            ""disable_api_termination"": ""false"",
                            ""ebs_block_device.#"": ""4"",
                            ""ebs_block_device.3965576335.delete_on_termination"": ""false"",
                            ""ebs_block_device.3965576335.device_name"": ""/dev/xvdd"",
                            ""ebs_block_device.3965576335.encrypted"": ""false"",
                            ""ebs_block_device.3965576335.iops"": ""300"",
                            ""ebs_block_device.3965576335.snapshot_id"": """",
                            ""ebs_block_device.3965576335.volume_id"": ""vol-09cde364159031c5d"",
                            ""ebs_block_device.3965576335.volume_size"": ""100"",
                            ""ebs_block_device.3965576335.volume_type"": ""gp2"",
                            ""ebs_block_device.3986656952.delete_on_termination"": ""false"",
                            ""ebs_block_device.3986656952.device_name"": ""/dev/xvde"",
                            ""ebs_block_device.3986656952.encrypted"": ""false"",
                            ""ebs_block_device.3986656952.iops"": ""300"",
                            ""ebs_block_device.3986656952.snapshot_id"": """",
                            ""ebs_block_device.3986656952.volume_id"": ""vol-09c14e768bdd6dd4b"",
                            ""ebs_block_device.3986656952.volume_size"": ""100"",
                            ""ebs_block_device.3986656952.volume_type"": ""gp2"",
                            ""ebs_block_device.3994770134.delete_on_termination"": ""false"",
                            ""ebs_block_device.3994770134.device_name"": ""/dev/xvdg"",
                            ""ebs_block_device.3994770134.encrypted"": ""false"",
                            ""ebs_block_device.3994770134.iops"": ""300"",
                            ""ebs_block_device.3994770134.snapshot_id"": """",
                            ""ebs_block_device.3994770134.volume_id"": ""vol-0e1b3ff63114f3003"",
                            ""ebs_block_device.3994770134.volume_size"": ""100"",
                            ""ebs_block_device.3994770134.volume_type"": ""gp2"",
                            ""ebs_block_device.4023988449.delete_on_termination"": ""false"",
                            ""ebs_block_device.4023988449.device_name"": ""/dev/xvdf"",
                            ""ebs_block_device.4023988449.encrypted"": ""false"",
                            ""ebs_block_device.4023988449.iops"": ""300"",
                            ""ebs_block_device.4023988449.snapshot_id"": """",
                            ""ebs_block_device.4023988449.volume_id"": ""vol-015467a2fec64cfdd"",
                            ""ebs_block_device.4023988449.volume_size"": ""100"",
                            ""ebs_block_device.4023988449.volume_type"": ""gp2"",
                            ""ebs_optimized"": ""false"",
                            ""ephemeral_block_device.#"": ""0"",
                            ""get_password_data"": ""false"",
                            ""iam_instance_profile"": """",
                            ""id"": ""i-022a9894321a6d374"",
                            ""instance_state"": ""running"",
                            ""instance_type"": ""t2.large"",
                            ""ipv6_addresses.#"": ""0"",
                            ""key_name"": ""pay_china"",
                            ""monitoring"": ""false"",
                            ""network_interface.#"": ""0"",
                            ""network_interface_id"": ""eni-fd55c3a4"",
                            ""placement_group"": """",
                            ""primary_network_interface_id"": ""eni-fd55c3a4"",
                            ""private_dns"": ""ip-192-168-14-135.cn-northwest-1.compute.internal"",
                            ""private_ip"": ""192.168.14.135"",
                            ""public_dns"": """",
                            ""public_ip"": """",
                            ""root_block_device.#"": ""1"",
                            ""root_block_device.0.delete_on_termination"": ""true"",
                            ""root_block_device.0.iops"": ""100"",
                            ""root_block_device.0.volume_id"": ""vol-0884c92d17ea04d83"",
                            ""root_block_device.0.volume_size"": ""20"",
                            ""root_block_device.0.volume_type"": ""gp2"",
                            ""security_groups.#"": ""0"",
                            ""source_dest_check"": ""true"",
                            ""subnet_id"": ""subnet-454c962c"",
                            ""tags.%"": ""9"",
                            ""tags.Decomission_Date"": ""never"",
                            ""tags.Environment"": ""chinapay"",
                            ""tags.Name"": ""docdb.pay.cn-northwest-1.test.bwtsi.cn"",
                            ""tags.Owner"": ""operations"",
                            ""tags.Purpose"": ""Riak instance"",
                            ""tags.Role"": ""docdb"",
                            ""tags.Stackname"": ""pay"",
                            ""tags.Started_By"": ""operations"",
                            ""tags.Warning"": ""Managed by terraform, do not edit"",
                            ""tenancy"": ""default"",
                            ""user_data"": ""f35050bdeefa2a2d9f354c0e699a5f2d7c393365"",
                            ""volume_tags.%"": ""0"",
                            ""vpc_security_group_ids.#"": ""1"",
                            ""vpc_security_group_ids.2301982502"": ""sg-9d5f28f4""
                        },
                        ""meta"": {
                            ""e2bfb730-ecaa-11e6-8f88-34363bc7c4c0"": {
                                ""create"": 600000000000,
                                ""delete"": 1200000000000,
                                ""update"": 600000000000
                            },
                            ""schema_version"": ""1""
                        },
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.aws""
                },
                ""data.template_file.cloud-init-riak"": {
                    ""type"": ""template_file"",
                    ""depends_on"": [],
                    ""primary"": {
                        ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                        ""attributes"": {
                            ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                            ""rendered"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo pay \u003e /etc/tradeshift/stackname\""\n - \""echo docdb-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 docdb-$INSTANCE_ID.cn-northwest-1.test.bwtsi.cn docdb-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac 'dr69ZUGVm0Ep1Eo/xBoOTcefuKVx' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = base.testing.bwtsi.cn\n     environment = chinapay\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""template"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo ${STACK_NAME} \u003e /etc/tradeshift/stackname\""\n - \""echo ${HOSTNAME}-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 ${HOSTNAME}-$INSTANCE_ID.${REGION_DNS} ${HOSTNAME}-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac '${DISK_ENCRYPTION_KEY}' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = ${CERT_NAME}\n     environment = ${ENVIRONMENT}\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""vars.%"": ""6"",
                            ""vars.CERT_NAME"": ""base.testing.bwtsi.cn"",
                            ""vars.DISK_ENCRYPTION_KEY"": ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx"",
                            ""vars.ENVIRONMENT"": ""chinapay"",
                            ""vars.HOSTNAME"": ""docdb"",
                            ""vars.REGION_DNS"": ""cn-northwest-1.test.bwtsi.cn"",
                            ""vars.STACK_NAME"": ""pay""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.template""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""environment-common""
            ],
            ""outputs"": {
                ""cert_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""base.testing.bwtsi.cn""
                },
                ""domain_name_search"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test.bwtsi.cn""
                },
                ""environment_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""chinapay""
                },
                ""environment_shortname"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                },
                ""security_group_name_postfix"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": "".chinapay""
                },
                ""site"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""global-common""
            ],
            ""outputs"": {
                ""all_cidr_eu_west_1"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16,172.25.128.0/21,172.25.120.0/21,172.25.112.0/21,172.31.248.0/21,172.31.240.0/21,172.21.0.0/19,172.19.0.0/19,172.22.0.0/19,172.18.0.0/19""
                },
                ""base_tradeshift_net_account_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""694518486591""
                },
                ""gcsops_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.17.22.143/32""
                },
                ""gcsops_cn_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""54.223.95.7/32,54.223.198.170/32,54.223.211.136/32,52.80.34.103/32""
                },
                ""office_ips"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,178.49.148.100/32,87.243.3.34/32,109.166.189.50/32,78.40.84.83/32,4.53.137.82/32,173.247.199.142/32,58.211.225.90/32,202.181.248.19/32,109.70.48.99/32""
                },
                ""prod_base_tradeshift_net_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""prod.base.tradeshift.net""
                },
                ""prod_base_tradeshift_net_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16""
                },
                ""prod_base_tradeshift_net_vpc_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""vpc-264c9042""
                },
                ""prod_ts_sv_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.50.175.210/32,52.30.44.136/32,52.50.189.21/32""
                },
                ""test_bwtsi_cn_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/19""
                },
                ""test_bwtsi_cn_vpc_private_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.12.0/22,192.168.16.0/22""
                },
                ""test_bwtsi_cn_vpc_public_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/22,192.168.4.0/22""
                },
                ""tradeshift_com_public_zone_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""Z2OX0I8SM94425""
                },
                ""translation_service_clients"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,4.53.137.82/32,173.247.199.142/32,130.185.137.106/32,202.181.248.19/32,52.17.87.187/32,52.30.44.136/32,52.30.58.232/32,52.31.203.95/32,52.49.119.80/32,52.49.49.111/32,52.49.5.171/32,52.50.108.6/32,52.50.175.210/32,52.50.189.21/32,52.50.255.154/32,52.50.91.189/32,54.195.199.108/32,54.78.39.106/32,58.211.225.90/32,89.150.143.118/32,54.222.150.122/32,54.222.194.56/32,109.70.48.99/32""
                },
                ""truebn_org_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""34.253.176.198/32,34.241.59.39/32""
                },
                ""userdata_path"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/modules/eff596488a3055adf7024741dffb9ca1/..""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""regional-common""
            ],
            ""outputs"": {
                ""availability_zones"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1a,cn-northwest-1b""
                },
                ""backend_region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""base_ami_1604"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-6ec1d50c""
                },
                ""base_ami_1604_zfs"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-edf8ec8f""
                },
                ""chinapay_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""key_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""pay_china""
                },
                ""region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""region_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""region_env"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        }
    ]
}

-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go] DEBUG: Response s3/PutObject Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 200 OK
Connection: close
Content-Length: 0
Date: Thu, 26 Apr 2018 11:00:39 GMT
Etag: ""807c608ab629b9b73914da058c923c20""
Server: AmazonS3
X-Amz-Id-2: 5Af+DuU/y0Ngtkb6wCq1R0Oz+ZrOYi4apbPsCZTSlwhSqnqBNB64rFL4HfBG6WB9GETdRmQyKnw=
X-Amz-Request-Id: 7984823D8787C039
X-Amz-Server-Side-Encryption: AES256


-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go]
2018/04/26 19:00:38 [DEBUG] plugin: waiting for all plugin processes to complete...

Error: Error applying plan:

1 error(s) occurred:

* module.docdb.aws_instance.riak: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d

2018-04-26T19:00:38.547+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:38 [ERR] plugin: plugin server: accept unix /var/folders/k0/hk5r4k696x901sk4mh_vwcg40000gn/T/plugin243311916: use of closed network connection
Terraform does not automatically rollback in the face of errors.
Instead, your Terraform state file has been partially updated with
any resources that successfully completed. Please address the error
above and apply again to incrementally change your infrastructure.


2018-04-26T19:00:38.550+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-template_v1.0.0_x4
2018-04-26T19:00:38.551+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-aws_v1.16.0_x4
2018-04-26T19:00:38.555+0800 [DEBUG] plugin: plugin process exited: path=/usr/local/bin/terraform-provider-alicloud

```
# Expected Behavior
can create aws instance in China AWS
# Actual Behavior
I can create aws instance in China AWS with provider.aws v1.15.0
but I can't create aws instance with provider.aws v1.16.0",I2Nsb3VkLWNvbmZpZwptb3VudHM6CiAtIFtlcGhlbWVyYWwwLCBudWxsXQoKcHJlc2VydmVfaG9zdG5hbWU6IHRydWUKbWFuYWdlX2V0Y19ob3N0czogZmFsc2UKCmJvb3RjbWQ6CiAtICJlY2hvIHBheSA,https://github.com/hashicorp/terraform-provider-aws
31,4359,"# Terraform Version

Terraform v0.11.6
provider.aws v1.16.0

# Affected Resource(s)
aws_instance_ec2
# Terraform Configuration Files
module ""docdb"" {
  source = ""../../../../../../tradeshift-puppet/terraform/modules/aws/instances-cn/riak""
  environment = ""${var.pull_request}""
  stackname = ""${var.stackname}""
  role = ""docdb""
  owner = ""${var.owner}""
  decomission_date = ""${var.decomission_date}""
  instance_type = ""t2.large""
  instance_ami = ""${module.regional-common.base_ami_1604}""
  instance_key_name = ""${module.regional-common.key_name}""
  disable_api_termination = false
  ebs_volume_size = ""100""
  ebs_delete_on_termination = ""false""
  ebs_optimized = false
  vpc_security_groups = ""${data.terraform_remote_state.security_groups.stack_it_run_access_sg_id}""
  vpc_subnets = ""${data.terraform_remote_state.vpc.private_subnets}""
  postfix = "".${var.stackname}""
  dns_region_name = ""${module.regional-common.region_dns}""
  disk_encryption_key = ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx""
  count = ""1""
  cert_name = ""${module.environment-common.cert_name}""
}

# Debug Output
```
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 200 OK
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: text/xml;charset=UTF-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:36 GMT
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Vary: Accept-Encoding
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <DescribeInstanceAttributeResponse xmlns=""http://ec2.amazonaws.com/doc/2016-11-15/"">
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <requestId>35e6cd4e-cb70-4016-a250-53f0880cc9be</requestId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <instanceId>i-022a9894321a6d374</instanceId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:         <value>I2Nsb3VkLWNvbmZpZwptb3VudHM6CiAtIFtlcGhlbWVyYWwwLCBudWxsXQoKcHJlc2VydmVfaG9zdG5hbWU6IHRydWUKbWFuYWdlX2V0Y19ob3N0czogZmFsc2UKCmJvb3RjbWQ6CiAtICJlY2hvIHBheSA+IC9ldGMvdHJhZGVzaGlmdC9zdGFja25hbWUiCiAtICJlY2hvIGRvY2RiLSRJTlNUQU5DRV9JRCA+IC9ldGMvaG9zdG5hbWU7IGhvc3RuYW1lIC1GIC9ldGMvaG9zdG5hbWUiCiAtICJzZWQgLWkgLWUgJy9eMTI3LjAuMC4xL2QnIC9ldGMvaG9zdHM7IGVjaG8gMTI3LjAuMC4xIGRvY2RiLSRJTlNUQU5DRV9JRC5jbi1ub3J0aHdlc3QtMS50ZXN0LmJ3dHNpLmNuIGRvY2RiLSRJTlNUQU5DRV9JRCBsb2NhbGhvc3QgPj4gL2V0Yy9ob3N0cyIKICMgRGlzayBlbmNyeXB0aW9uIGtleSBmb3IgZXBoZW1lcmFsIGRpc2sgZHJpdmVzLCBzYXZlZCB0byByYW0gZHJpdmUKICMgVGhlIHNlZCBwYXJ0IHJlbW92ZXMgdGhlIChzdGRpbik9IG91dHB1dCBmcm9tIG9wZW5zc2wgZGdzdAogLSAiZWNobyAkSU5TVEFOQ0VfSUQgfCBvcGVuc3NsIGRnc3QgLXNoYTI1NiAtaG1hYyAnZHI2OVpVR1ZtMEVwMUVvL3hCb09UY2VmdUtWeCcgfCBzZWQgJ3MvXi4qPSAvLycgPiAvZGV2L3NobS9lbmNyeXB0ZWQtZGlzay5sdWtzLmtleSAmJiBjaG1vZCA0MDAgL2Rldi9zaG0vZW5jcnlwdGVkLWRpc2subHVrcy5rZXkiCgojIERvbid0IG92ZXJyaWRlIG91ciBhcHQgcmVwb3NpdG9yeSBsaXN0IG9uIGZpcnN0IGJvb3QKYXB0X3ByZXNlcnZlX3NvdXJjZXNfbGlzdDogdHJ1ZQoKIyBEb24ndCBwcmludCB0aGUgbmV3IHNzaCBrZXlzIG9uIHRoZSBjb25zb2xlCm5vX3NzaF9maW5nZXJwcmludHM6IHRydWUKCndyaXRlX2ZpbGVzOgogLSBwYXRoOiAvZXRjL3B1cHBldGxhYnMvcHVwcGV0L3B1cHBldC5jb25mCiAgIG93bmVyOiByb290OnJvb3QKICAgcGVybWlzc2lvbnM6ICcwNDQ0JwogICBjb250ZW50OiB8CiAgICAgW21haW5dCiAgICAgY2VydG5hbWUgPSBiYXNlLnRlc3RpbmcuYnd0c2kuY24KICAgICBlbnZpcm9ubWVudCA9IGNoaW5hcGF5CiAgICAgW2FnZW50XQogICAgIHJ1bmludGVydmFsID0gMTAweQogICAgIHNlcnZlciA9IHB1cHBldC5id3RzaS5jbgogICAgIG5vZGVfbmFtZSA9IGZhY3RlcgogICAgIG5vZGVfbmFtZV9mYWN0ID0gZnFkbgogICAgIHNwbGF5ID0gdHJ1ZQogICAgIHNwbGF5bGltaXQgPSA1bQo=</value>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     </userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: </DescribeInstanceAttributeResponse>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] DEBUG: Request ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ REQUEST POST-SIGN ]-----------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: POST / HTTP/1.1
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Host: ec2.cn-northwest-1.amazonaws.com.cn
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: User-Agent: aws-sdk-go/1.13.32 (go1.9.2; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.7
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Length: 95
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/ec2/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-security-token, Signature=60ac431f06b221bf7fe6d53ee72de1babb1aad5a5a4d17917e4d2f78a7533fef
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: application/x-www-form-urlencoded; charset=utf-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Date: 20180426T110036Z
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Accept-Encoding: gzip
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Action=DescribeInstanceCreditSpecifications&InstanceId.1=i-022a9894321a6d374&Version=2016-11-15
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Response ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 400 Bad Request
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:37 GMT
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <Response><Errors><Error><Code>UnsupportedOperation</Code><Message>The functionality you requested is not available in this region.</Message></Error></Errors><RequestID>53ace3cc-2597-49a0-99b2-3b9f1cb8567d</RequestID></Response>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Validate Response ec2/DescribeInstanceCreditSpecifications failed, not retrying, error UnsupportedOperation: The functionality you requested is not available in this region.
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalApplyPost, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalSequence, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [DEBUG] Uploading remote state to S3: {
  Body: buffer(0xc4203e17d0),
  Bucket: ""bwts-terraform-bucket-chinapay"",
  ContentLength: 20792,
  ContentType: ""application/json"",
  Key: ""cn-northwest-1/riak/terraform.tfstate"",
  ServerSideEncryption: ""AES256""
}
2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Request s3/PutObject Details:
---[ REQUEST POST-SIGN ]-----------------------------
PUT /cn-northwest-1/riak/terraform.tfstate HTTP/1.1
Host: bwts-terraform-bucket-chinapay.s3.cn-northwest-1.amazonaws.com.cn
User-Agent: aws-sdk-go/1.12.75 (go1.10.1; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.6
Content-Length: 20792
Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/s3/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-content-sha256;x-amz-date;x-amz-security-token;x-amz-server-side-encryption, Signature=8aa16110ae06a99b503e1f0546a4d6cf208fdf658ca29420baa2d649cec043e2
Content-Type: application/json
X-Amz-Content-Sha256: 04110e3e4cd97aa3e89cfe2f03487922bfd6b6346ec6dfe3fbe8fad9755e18c2
X-Amz-Date: 20180426T110037Z
X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
X-Amz-Server-Side-Encryption: AES256
Accept-Encoding: gzip

{
    ""version"": 3,
    ""terraform_version"": ""0.11.6"",
    ""serial"": 1,
    ""lineage"": ""b9c3c084-789e-7472-0b18-8698b4afc854"",
    ""modules"": [
        {
            ""path"": [
                ""root""
            ],
            ""outputs"": {},
            ""resources"": {
                ""data.terraform_remote_state.security_groups"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""bastion_host"": ""sg-e29feb8b"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/dev-stack-sgs/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""external_lb_sg_id"": ""sg-a55027cc"",
                            ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                            ""rundeck"": ""sg-b39eeada"",
                            ""stack_it_run_access_sg_id"": ""sg-9d5f28f4"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                },
                ""data.terraform_remote_state.vpc"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/vpc/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                            ""private_subnets"": ""subnet-454c962c,subnet-9722ddec"",
                            ""public_subnets"": ""subnet-5e4d9737,subnet-9022ddeb"",
                            ""vpc_cidr"": ""192.168.0.0/19"",
                            ""vpc_id"": ""vpc-34c61f5d"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""docdb""
            ],
            ""outputs"": {},
            ""resources"": {
                ""aws_instance.riak"": {
                    ""type"": ""aws_instance"",
                    ""depends_on"": [
                        ""data.template_file.cloud-init-riak""
                    ],
                    ""primary"": {
                        ""id"": ""i-022a9894321a6d374"",
                        ""attributes"": {
                            ""ami"": ""ami-6ec1d50c"",
                            ""associate_public_ip_address"": ""false"",
                            ""availability_zone"": ""cn-northwest-1a"",
                            ""disable_api_termination"": ""false"",
                            ""ebs_block_device.#"": ""4"",
                            ""ebs_block_device.3965576335.delete_on_termination"": ""false"",
                            ""ebs_block_device.3965576335.device_name"": ""/dev/xvdd"",
                            ""ebs_block_device.3965576335.encrypted"": ""false"",
                            ""ebs_block_device.3965576335.iops"": ""300"",
                            ""ebs_block_device.3965576335.snapshot_id"": """",
                            ""ebs_block_device.3965576335.volume_id"": ""vol-09cde364159031c5d"",
                            ""ebs_block_device.3965576335.volume_size"": ""100"",
                            ""ebs_block_device.3965576335.volume_type"": ""gp2"",
                            ""ebs_block_device.3986656952.delete_on_termination"": ""false"",
                            ""ebs_block_device.3986656952.device_name"": ""/dev/xvde"",
                            ""ebs_block_device.3986656952.encrypted"": ""false"",
                            ""ebs_block_device.3986656952.iops"": ""300"",
                            ""ebs_block_device.3986656952.snapshot_id"": """",
                            ""ebs_block_device.3986656952.volume_id"": ""vol-09c14e768bdd6dd4b"",
                            ""ebs_block_device.3986656952.volume_size"": ""100"",
                            ""ebs_block_device.3986656952.volume_type"": ""gp2"",
                            ""ebs_block_device.3994770134.delete_on_termination"": ""false"",
                            ""ebs_block_device.3994770134.device_name"": ""/dev/xvdg"",
                            ""ebs_block_device.3994770134.encrypted"": ""false"",
                            ""ebs_block_device.3994770134.iops"": ""300"",
                            ""ebs_block_device.3994770134.snapshot_id"": """",
                            ""ebs_block_device.3994770134.volume_id"": ""vol-0e1b3ff63114f3003"",
                            ""ebs_block_device.3994770134.volume_size"": ""100"",
                            ""ebs_block_device.3994770134.volume_type"": ""gp2"",
                            ""ebs_block_device.4023988449.delete_on_termination"": ""false"",
                            ""ebs_block_device.4023988449.device_name"": ""/dev/xvdf"",
                            ""ebs_block_device.4023988449.encrypted"": ""false"",
                            ""ebs_block_device.4023988449.iops"": ""300"",
                            ""ebs_block_device.4023988449.snapshot_id"": """",
                            ""ebs_block_device.4023988449.volume_id"": ""vol-015467a2fec64cfdd"",
                            ""ebs_block_device.4023988449.volume_size"": ""100"",
                            ""ebs_block_device.4023988449.volume_type"": ""gp2"",
                            ""ebs_optimized"": ""false"",
                            ""ephemeral_block_device.#"": ""0"",
                            ""get_password_data"": ""false"",
                            ""iam_instance_profile"": """",
                            ""id"": ""i-022a9894321a6d374"",
                            ""instance_state"": ""running"",
                            ""instance_type"": ""t2.large"",
                            ""ipv6_addresses.#"": ""0"",
                            ""key_name"": ""pay_china"",
                            ""monitoring"": ""false"",
                            ""network_interface.#"": ""0"",
                            ""network_interface_id"": ""eni-fd55c3a4"",
                            ""placement_group"": """",
                            ""primary_network_interface_id"": ""eni-fd55c3a4"",
                            ""private_dns"": ""ip-192-168-14-135.cn-northwest-1.compute.internal"",
                            ""private_ip"": ""192.168.14.135"",
                            ""public_dns"": """",
                            ""public_ip"": """",
                            ""root_block_device.#"": ""1"",
                            ""root_block_device.0.delete_on_termination"": ""true"",
                            ""root_block_device.0.iops"": ""100"",
                            ""root_block_device.0.volume_id"": ""vol-0884c92d17ea04d83"",
                            ""root_block_device.0.volume_size"": ""20"",
                            ""root_block_device.0.volume_type"": ""gp2"",
                            ""security_groups.#"": ""0"",
                            ""source_dest_check"": ""true"",
                            ""subnet_id"": ""subnet-454c962c"",
                            ""tags.%"": ""9"",
                            ""tags.Decomission_Date"": ""never"",
                            ""tags.Environment"": ""chinapay"",
                            ""tags.Name"": ""docdb.pay.cn-northwest-1.test.bwtsi.cn"",
                            ""tags.Owner"": ""operations"",
                            ""tags.Purpose"": ""Riak instance"",
                            ""tags.Role"": ""docdb"",
                            ""tags.Stackname"": ""pay"",
                            ""tags.Started_By"": ""operations"",
                            ""tags.Warning"": ""Managed by terraform, do not edit"",
                            ""tenancy"": ""default"",
                            ""user_data"": ""f35050bdeefa2a2d9f354c0e699a5f2d7c393365"",
                            ""volume_tags.%"": ""0"",
                            ""vpc_security_group_ids.#"": ""1"",
                            ""vpc_security_group_ids.2301982502"": ""sg-9d5f28f4""
                        },
                        ""meta"": {
                            ""e2bfb730-ecaa-11e6-8f88-34363bc7c4c0"": {
                                ""create"": 600000000000,
                                ""delete"": 1200000000000,
                                ""update"": 600000000000
                            },
                            ""schema_version"": ""1""
                        },
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.aws""
                },
                ""data.template_file.cloud-init-riak"": {
                    ""type"": ""template_file"",
                    ""depends_on"": [],
                    ""primary"": {
                        ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                        ""attributes"": {
                            ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                            ""rendered"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo pay \u003e /etc/tradeshift/stackname\""\n - \""echo docdb-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 docdb-$INSTANCE_ID.cn-northwest-1.test.bwtsi.cn docdb-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac 'dr69ZUGVm0Ep1Eo/xBoOTcefuKVx' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = base.testing.bwtsi.cn\n     environment = chinapay\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""template"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo ${STACK_NAME} \u003e /etc/tradeshift/stackname\""\n - \""echo ${HOSTNAME}-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 ${HOSTNAME}-$INSTANCE_ID.${REGION_DNS} ${HOSTNAME}-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac '${DISK_ENCRYPTION_KEY}' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = ${CERT_NAME}\n     environment = ${ENVIRONMENT}\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""vars.%"": ""6"",
                            ""vars.CERT_NAME"": ""base.testing.bwtsi.cn"",
                            ""vars.DISK_ENCRYPTION_KEY"": ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx"",
                            ""vars.ENVIRONMENT"": ""chinapay"",
                            ""vars.HOSTNAME"": ""docdb"",
                            ""vars.REGION_DNS"": ""cn-northwest-1.test.bwtsi.cn"",
                            ""vars.STACK_NAME"": ""pay""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.template""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""environment-common""
            ],
            ""outputs"": {
                ""cert_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""base.testing.bwtsi.cn""
                },
                ""domain_name_search"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test.bwtsi.cn""
                },
                ""environment_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""chinapay""
                },
                ""environment_shortname"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                },
                ""security_group_name_postfix"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": "".chinapay""
                },
                ""site"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""global-common""
            ],
            ""outputs"": {
                ""all_cidr_eu_west_1"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16,172.25.128.0/21,172.25.120.0/21,172.25.112.0/21,172.31.248.0/21,172.31.240.0/21,172.21.0.0/19,172.19.0.0/19,172.22.0.0/19,172.18.0.0/19""
                },
                ""base_tradeshift_net_account_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""694518486591""
                },
                ""gcsops_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.17.22.143/32""
                },
                ""gcsops_cn_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""54.223.95.7/32,54.223.198.170/32,54.223.211.136/32,52.80.34.103/32""
                },
                ""office_ips"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,178.49.148.100/32,87.243.3.34/32,109.166.189.50/32,78.40.84.83/32,4.53.137.82/32,173.247.199.142/32,58.211.225.90/32,202.181.248.19/32,109.70.48.99/32""
                },
                ""prod_base_tradeshift_net_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""prod.base.tradeshift.net""
                },
                ""prod_base_tradeshift_net_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16""
                },
                ""prod_base_tradeshift_net_vpc_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""vpc-264c9042""
                },
                ""prod_ts_sv_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.50.175.210/32,52.30.44.136/32,52.50.189.21/32""
                },
                ""test_bwtsi_cn_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/19""
                },
                ""test_bwtsi_cn_vpc_private_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.12.0/22,192.168.16.0/22""
                },
                ""test_bwtsi_cn_vpc_public_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/22,192.168.4.0/22""
                },
                ""tradeshift_com_public_zone_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""Z2OX0I8SM94425""
                },
                ""translation_service_clients"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,4.53.137.82/32,173.247.199.142/32,130.185.137.106/32,202.181.248.19/32,52.17.87.187/32,52.30.44.136/32,52.30.58.232/32,52.31.203.95/32,52.49.119.80/32,52.49.49.111/32,52.49.5.171/32,52.50.108.6/32,52.50.175.210/32,52.50.189.21/32,52.50.255.154/32,52.50.91.189/32,54.195.199.108/32,54.78.39.106/32,58.211.225.90/32,89.150.143.118/32,54.222.150.122/32,54.222.194.56/32,109.70.48.99/32""
                },
                ""truebn_org_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""34.253.176.198/32,34.241.59.39/32""
                },
                ""userdata_path"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/modules/eff596488a3055adf7024741dffb9ca1/..""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""regional-common""
            ],
            ""outputs"": {
                ""availability_zones"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1a,cn-northwest-1b""
                },
                ""backend_region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""base_ami_1604"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-6ec1d50c""
                },
                ""base_ami_1604_zfs"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-edf8ec8f""
                },
                ""chinapay_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""key_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""pay_china""
                },
                ""region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""region_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""region_env"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        }
    ]
}

-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go] DEBUG: Response s3/PutObject Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 200 OK
Connection: close
Content-Length: 0
Date: Thu, 26 Apr 2018 11:00:39 GMT
Etag: ""807c608ab629b9b73914da058c923c20""
Server: AmazonS3
X-Amz-Id-2: 5Af+DuU/y0Ngtkb6wCq1R0Oz+ZrOYi4apbPsCZTSlwhSqnqBNB64rFL4HfBG6WB9GETdRmQyKnw=
X-Amz-Request-Id: 7984823D8787C039
X-Amz-Server-Side-Encryption: AES256


-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go]
2018/04/26 19:00:38 [DEBUG] plugin: waiting for all plugin processes to complete...

Error: Error applying plan:

1 error(s) occurred:

* module.docdb.aws_instance.riak: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d

2018-04-26T19:00:38.547+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:38 [ERR] plugin: plugin server: accept unix /var/folders/k0/hk5r4k696x901sk4mh_vwcg40000gn/T/plugin243311916: use of closed network connection
Terraform does not automatically rollback in the face of errors.
Instead, your Terraform state file has been partially updated with
any resources that successfully completed. Please address the error
above and apply again to incrementally change your infrastructure.


2018-04-26T19:00:38.550+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-template_v1.0.0_x4
2018-04-26T19:00:38.551+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-aws_v1.16.0_x4
2018-04-26T19:00:38.555+0800 [DEBUG] plugin: plugin process exited: path=/usr/local/bin/terraform-provider-alicloud

```
# Expected Behavior
can create aws instance in China AWS
# Actual Behavior
I can create aws instance in China AWS with provider.aws v1.15.0
but I can't create aws instance with provider.aws v1.16.0",IC9ldGMvdHJhZGVzaGlmdC9zdGFja25hbWUiCiAtICJlY2hvIGRvY2RiLSRJTlNUQU5DRV9JRCA,https://github.com/hashicorp/terraform-provider-aws
32,4359,"# Terraform Version

Terraform v0.11.6
provider.aws v1.16.0

# Affected Resource(s)
aws_instance_ec2
# Terraform Configuration Files
module ""docdb"" {
  source = ""../../../../../../tradeshift-puppet/terraform/modules/aws/instances-cn/riak""
  environment = ""${var.pull_request}""
  stackname = ""${var.stackname}""
  role = ""docdb""
  owner = ""${var.owner}""
  decomission_date = ""${var.decomission_date}""
  instance_type = ""t2.large""
  instance_ami = ""${module.regional-common.base_ami_1604}""
  instance_key_name = ""${module.regional-common.key_name}""
  disable_api_termination = false
  ebs_volume_size = ""100""
  ebs_delete_on_termination = ""false""
  ebs_optimized = false
  vpc_security_groups = ""${data.terraform_remote_state.security_groups.stack_it_run_access_sg_id}""
  vpc_subnets = ""${data.terraform_remote_state.vpc.private_subnets}""
  postfix = "".${var.stackname}""
  dns_region_name = ""${module.regional-common.region_dns}""
  disk_encryption_key = ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx""
  count = ""1""
  cert_name = ""${module.environment-common.cert_name}""
}

# Debug Output
```
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 200 OK
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: text/xml;charset=UTF-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:36 GMT
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Vary: Accept-Encoding
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <DescribeInstanceAttributeResponse xmlns=""http://ec2.amazonaws.com/doc/2016-11-15/"">
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <requestId>35e6cd4e-cb70-4016-a250-53f0880cc9be</requestId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <instanceId>i-022a9894321a6d374</instanceId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:         <value>I2Nsb3VkLWNvbmZpZwptb3VudHM6CiAtIFtlcGhlbWVyYWwwLCBudWxsXQoKcHJlc2VydmVfaG9zdG5hbWU6IHRydWUKbWFuYWdlX2V0Y19ob3N0czogZmFsc2UKCmJvb3RjbWQ6CiAtICJlY2hvIHBheSA+IC9ldGMvdHJhZGVzaGlmdC9zdGFja25hbWUiCiAtICJlY2hvIGRvY2RiLSRJTlNUQU5DRV9JRCA+IC9ldGMvaG9zdG5hbWU7IGhvc3RuYW1lIC1GIC9ldGMvaG9zdG5hbWUiCiAtICJzZWQgLWkgLWUgJy9eMTI3LjAuMC4xL2QnIC9ldGMvaG9zdHM7IGVjaG8gMTI3LjAuMC4xIGRvY2RiLSRJTlNUQU5DRV9JRC5jbi1ub3J0aHdlc3QtMS50ZXN0LmJ3dHNpLmNuIGRvY2RiLSRJTlNUQU5DRV9JRCBsb2NhbGhvc3QgPj4gL2V0Yy9ob3N0cyIKICMgRGlzayBlbmNyeXB0aW9uIGtleSBmb3IgZXBoZW1lcmFsIGRpc2sgZHJpdmVzLCBzYXZlZCB0byByYW0gZHJpdmUKICMgVGhlIHNlZCBwYXJ0IHJlbW92ZXMgdGhlIChzdGRpbik9IG91dHB1dCBmcm9tIG9wZW5zc2wgZGdzdAogLSAiZWNobyAkSU5TVEFOQ0VfSUQgfCBvcGVuc3NsIGRnc3QgLXNoYTI1NiAtaG1hYyAnZHI2OVpVR1ZtMEVwMUVvL3hCb09UY2VmdUtWeCcgfCBzZWQgJ3MvXi4qPSAvLycgPiAvZGV2L3NobS9lbmNyeXB0ZWQtZGlzay5sdWtzLmtleSAmJiBjaG1vZCA0MDAgL2Rldi9zaG0vZW5jcnlwdGVkLWRpc2subHVrcy5rZXkiCgojIERvbid0IG92ZXJyaWRlIG91ciBhcHQgcmVwb3NpdG9yeSBsaXN0IG9uIGZpcnN0IGJvb3QKYXB0X3ByZXNlcnZlX3NvdXJjZXNfbGlzdDogdHJ1ZQoKIyBEb24ndCBwcmludCB0aGUgbmV3IHNzaCBrZXlzIG9uIHRoZSBjb25zb2xlCm5vX3NzaF9maW5nZXJwcmludHM6IHRydWUKCndyaXRlX2ZpbGVzOgogLSBwYXRoOiAvZXRjL3B1cHBldGxhYnMvcHVwcGV0L3B1cHBldC5jb25mCiAgIG93bmVyOiByb290OnJvb3QKICAgcGVybWlzc2lvbnM6ICcwNDQ0JwogICBjb250ZW50OiB8CiAgICAgW21haW5dCiAgICAgY2VydG5hbWUgPSBiYXNlLnRlc3RpbmcuYnd0c2kuY24KICAgICBlbnZpcm9ubWVudCA9IGNoaW5hcGF5CiAgICAgW2FnZW50XQogICAgIHJ1bmludGVydmFsID0gMTAweQogICAgIHNlcnZlciA9IHB1cHBldC5id3RzaS5jbgogICAgIG5vZGVfbmFtZSA9IGZhY3RlcgogICAgIG5vZGVfbmFtZV9mYWN0ID0gZnFkbgogICAgIHNwbGF5ID0gdHJ1ZQogICAgIHNwbGF5bGltaXQgPSA1bQo=</value>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     </userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: </DescribeInstanceAttributeResponse>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] DEBUG: Request ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ REQUEST POST-SIGN ]-----------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: POST / HTTP/1.1
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Host: ec2.cn-northwest-1.amazonaws.com.cn
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: User-Agent: aws-sdk-go/1.13.32 (go1.9.2; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.7
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Length: 95
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/ec2/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-security-token, Signature=60ac431f06b221bf7fe6d53ee72de1babb1aad5a5a4d17917e4d2f78a7533fef
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: application/x-www-form-urlencoded; charset=utf-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Date: 20180426T110036Z
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Accept-Encoding: gzip
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Action=DescribeInstanceCreditSpecifications&InstanceId.1=i-022a9894321a6d374&Version=2016-11-15
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Response ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 400 Bad Request
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:37 GMT
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <Response><Errors><Error><Code>UnsupportedOperation</Code><Message>The functionality you requested is not available in this region.</Message></Error></Errors><RequestID>53ace3cc-2597-49a0-99b2-3b9f1cb8567d</RequestID></Response>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Validate Response ec2/DescribeInstanceCreditSpecifications failed, not retrying, error UnsupportedOperation: The functionality you requested is not available in this region.
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalApplyPost, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalSequence, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [DEBUG] Uploading remote state to S3: {
  Body: buffer(0xc4203e17d0),
  Bucket: ""bwts-terraform-bucket-chinapay"",
  ContentLength: 20792,
  ContentType: ""application/json"",
  Key: ""cn-northwest-1/riak/terraform.tfstate"",
  ServerSideEncryption: ""AES256""
}
2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Request s3/PutObject Details:
---[ REQUEST POST-SIGN ]-----------------------------
PUT /cn-northwest-1/riak/terraform.tfstate HTTP/1.1
Host: bwts-terraform-bucket-chinapay.s3.cn-northwest-1.amazonaws.com.cn
User-Agent: aws-sdk-go/1.12.75 (go1.10.1; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.6
Content-Length: 20792
Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/s3/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-content-sha256;x-amz-date;x-amz-security-token;x-amz-server-side-encryption, Signature=8aa16110ae06a99b503e1f0546a4d6cf208fdf658ca29420baa2d649cec043e2
Content-Type: application/json
X-Amz-Content-Sha256: 04110e3e4cd97aa3e89cfe2f03487922bfd6b6346ec6dfe3fbe8fad9755e18c2
X-Amz-Date: 20180426T110037Z
X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
X-Amz-Server-Side-Encryption: AES256
Accept-Encoding: gzip

{
    ""version"": 3,
    ""terraform_version"": ""0.11.6"",
    ""serial"": 1,
    ""lineage"": ""b9c3c084-789e-7472-0b18-8698b4afc854"",
    ""modules"": [
        {
            ""path"": [
                ""root""
            ],
            ""outputs"": {},
            ""resources"": {
                ""data.terraform_remote_state.security_groups"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""bastion_host"": ""sg-e29feb8b"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/dev-stack-sgs/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""external_lb_sg_id"": ""sg-a55027cc"",
                            ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                            ""rundeck"": ""sg-b39eeada"",
                            ""stack_it_run_access_sg_id"": ""sg-9d5f28f4"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                },
                ""data.terraform_remote_state.vpc"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/vpc/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                            ""private_subnets"": ""subnet-454c962c,subnet-9722ddec"",
                            ""public_subnets"": ""subnet-5e4d9737,subnet-9022ddeb"",
                            ""vpc_cidr"": ""192.168.0.0/19"",
                            ""vpc_id"": ""vpc-34c61f5d"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""docdb""
            ],
            ""outputs"": {},
            ""resources"": {
                ""aws_instance.riak"": {
                    ""type"": ""aws_instance"",
                    ""depends_on"": [
                        ""data.template_file.cloud-init-riak""
                    ],
                    ""primary"": {
                        ""id"": ""i-022a9894321a6d374"",
                        ""attributes"": {
                            ""ami"": ""ami-6ec1d50c"",
                            ""associate_public_ip_address"": ""false"",
                            ""availability_zone"": ""cn-northwest-1a"",
                            ""disable_api_termination"": ""false"",
                            ""ebs_block_device.#"": ""4"",
                            ""ebs_block_device.3965576335.delete_on_termination"": ""false"",
                            ""ebs_block_device.3965576335.device_name"": ""/dev/xvdd"",
                            ""ebs_block_device.3965576335.encrypted"": ""false"",
                            ""ebs_block_device.3965576335.iops"": ""300"",
                            ""ebs_block_device.3965576335.snapshot_id"": """",
                            ""ebs_block_device.3965576335.volume_id"": ""vol-09cde364159031c5d"",
                            ""ebs_block_device.3965576335.volume_size"": ""100"",
                            ""ebs_block_device.3965576335.volume_type"": ""gp2"",
                            ""ebs_block_device.3986656952.delete_on_termination"": ""false"",
                            ""ebs_block_device.3986656952.device_name"": ""/dev/xvde"",
                            ""ebs_block_device.3986656952.encrypted"": ""false"",
                            ""ebs_block_device.3986656952.iops"": ""300"",
                            ""ebs_block_device.3986656952.snapshot_id"": """",
                            ""ebs_block_device.3986656952.volume_id"": ""vol-09c14e768bdd6dd4b"",
                            ""ebs_block_device.3986656952.volume_size"": ""100"",
                            ""ebs_block_device.3986656952.volume_type"": ""gp2"",
                            ""ebs_block_device.3994770134.delete_on_termination"": ""false"",
                            ""ebs_block_device.3994770134.device_name"": ""/dev/xvdg"",
                            ""ebs_block_device.3994770134.encrypted"": ""false"",
                            ""ebs_block_device.3994770134.iops"": ""300"",
                            ""ebs_block_device.3994770134.snapshot_id"": """",
                            ""ebs_block_device.3994770134.volume_id"": ""vol-0e1b3ff63114f3003"",
                            ""ebs_block_device.3994770134.volume_size"": ""100"",
                            ""ebs_block_device.3994770134.volume_type"": ""gp2"",
                            ""ebs_block_device.4023988449.delete_on_termination"": ""false"",
                            ""ebs_block_device.4023988449.device_name"": ""/dev/xvdf"",
                            ""ebs_block_device.4023988449.encrypted"": ""false"",
                            ""ebs_block_device.4023988449.iops"": ""300"",
                            ""ebs_block_device.4023988449.snapshot_id"": """",
                            ""ebs_block_device.4023988449.volume_id"": ""vol-015467a2fec64cfdd"",
                            ""ebs_block_device.4023988449.volume_size"": ""100"",
                            ""ebs_block_device.4023988449.volume_type"": ""gp2"",
                            ""ebs_optimized"": ""false"",
                            ""ephemeral_block_device.#"": ""0"",
                            ""get_password_data"": ""false"",
                            ""iam_instance_profile"": """",
                            ""id"": ""i-022a9894321a6d374"",
                            ""instance_state"": ""running"",
                            ""instance_type"": ""t2.large"",
                            ""ipv6_addresses.#"": ""0"",
                            ""key_name"": ""pay_china"",
                            ""monitoring"": ""false"",
                            ""network_interface.#"": ""0"",
                            ""network_interface_id"": ""eni-fd55c3a4"",
                            ""placement_group"": """",
                            ""primary_network_interface_id"": ""eni-fd55c3a4"",
                            ""private_dns"": ""ip-192-168-14-135.cn-northwest-1.compute.internal"",
                            ""private_ip"": ""192.168.14.135"",
                            ""public_dns"": """",
                            ""public_ip"": """",
                            ""root_block_device.#"": ""1"",
                            ""root_block_device.0.delete_on_termination"": ""true"",
                            ""root_block_device.0.iops"": ""100"",
                            ""root_block_device.0.volume_id"": ""vol-0884c92d17ea04d83"",
                            ""root_block_device.0.volume_size"": ""20"",
                            ""root_block_device.0.volume_type"": ""gp2"",
                            ""security_groups.#"": ""0"",
                            ""source_dest_check"": ""true"",
                            ""subnet_id"": ""subnet-454c962c"",
                            ""tags.%"": ""9"",
                            ""tags.Decomission_Date"": ""never"",
                            ""tags.Environment"": ""chinapay"",
                            ""tags.Name"": ""docdb.pay.cn-northwest-1.test.bwtsi.cn"",
                            ""tags.Owner"": ""operations"",
                            ""tags.Purpose"": ""Riak instance"",
                            ""tags.Role"": ""docdb"",
                            ""tags.Stackname"": ""pay"",
                            ""tags.Started_By"": ""operations"",
                            ""tags.Warning"": ""Managed by terraform, do not edit"",
                            ""tenancy"": ""default"",
                            ""user_data"": ""f35050bdeefa2a2d9f354c0e699a5f2d7c393365"",
                            ""volume_tags.%"": ""0"",
                            ""vpc_security_group_ids.#"": ""1"",
                            ""vpc_security_group_ids.2301982502"": ""sg-9d5f28f4""
                        },
                        ""meta"": {
                            ""e2bfb730-ecaa-11e6-8f88-34363bc7c4c0"": {
                                ""create"": 600000000000,
                                ""delete"": 1200000000000,
                                ""update"": 600000000000
                            },
                            ""schema_version"": ""1""
                        },
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.aws""
                },
                ""data.template_file.cloud-init-riak"": {
                    ""type"": ""template_file"",
                    ""depends_on"": [],
                    ""primary"": {
                        ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                        ""attributes"": {
                            ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                            ""rendered"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo pay \u003e /etc/tradeshift/stackname\""\n - \""echo docdb-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 docdb-$INSTANCE_ID.cn-northwest-1.test.bwtsi.cn docdb-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac 'dr69ZUGVm0Ep1Eo/xBoOTcefuKVx' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = base.testing.bwtsi.cn\n     environment = chinapay\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""template"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo ${STACK_NAME} \u003e /etc/tradeshift/stackname\""\n - \""echo ${HOSTNAME}-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 ${HOSTNAME}-$INSTANCE_ID.${REGION_DNS} ${HOSTNAME}-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac '${DISK_ENCRYPTION_KEY}' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = ${CERT_NAME}\n     environment = ${ENVIRONMENT}\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""vars.%"": ""6"",
                            ""vars.CERT_NAME"": ""base.testing.bwtsi.cn"",
                            ""vars.DISK_ENCRYPTION_KEY"": ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx"",
                            ""vars.ENVIRONMENT"": ""chinapay"",
                            ""vars.HOSTNAME"": ""docdb"",
                            ""vars.REGION_DNS"": ""cn-northwest-1.test.bwtsi.cn"",
                            ""vars.STACK_NAME"": ""pay""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.template""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""environment-common""
            ],
            ""outputs"": {
                ""cert_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""base.testing.bwtsi.cn""
                },
                ""domain_name_search"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test.bwtsi.cn""
                },
                ""environment_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""chinapay""
                },
                ""environment_shortname"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                },
                ""security_group_name_postfix"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": "".chinapay""
                },
                ""site"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""global-common""
            ],
            ""outputs"": {
                ""all_cidr_eu_west_1"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16,172.25.128.0/21,172.25.120.0/21,172.25.112.0/21,172.31.248.0/21,172.31.240.0/21,172.21.0.0/19,172.19.0.0/19,172.22.0.0/19,172.18.0.0/19""
                },
                ""base_tradeshift_net_account_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""694518486591""
                },
                ""gcsops_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.17.22.143/32""
                },
                ""gcsops_cn_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""54.223.95.7/32,54.223.198.170/32,54.223.211.136/32,52.80.34.103/32""
                },
                ""office_ips"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,178.49.148.100/32,87.243.3.34/32,109.166.189.50/32,78.40.84.83/32,4.53.137.82/32,173.247.199.142/32,58.211.225.90/32,202.181.248.19/32,109.70.48.99/32""
                },
                ""prod_base_tradeshift_net_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""prod.base.tradeshift.net""
                },
                ""prod_base_tradeshift_net_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16""
                },
                ""prod_base_tradeshift_net_vpc_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""vpc-264c9042""
                },
                ""prod_ts_sv_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.50.175.210/32,52.30.44.136/32,52.50.189.21/32""
                },
                ""test_bwtsi_cn_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/19""
                },
                ""test_bwtsi_cn_vpc_private_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.12.0/22,192.168.16.0/22""
                },
                ""test_bwtsi_cn_vpc_public_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/22,192.168.4.0/22""
                },
                ""tradeshift_com_public_zone_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""Z2OX0I8SM94425""
                },
                ""translation_service_clients"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,4.53.137.82/32,173.247.199.142/32,130.185.137.106/32,202.181.248.19/32,52.17.87.187/32,52.30.44.136/32,52.30.58.232/32,52.31.203.95/32,52.49.119.80/32,52.49.49.111/32,52.49.5.171/32,52.50.108.6/32,52.50.175.210/32,52.50.189.21/32,52.50.255.154/32,52.50.91.189/32,54.195.199.108/32,54.78.39.106/32,58.211.225.90/32,89.150.143.118/32,54.222.150.122/32,54.222.194.56/32,109.70.48.99/32""
                },
                ""truebn_org_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""34.253.176.198/32,34.241.59.39/32""
                },
                ""userdata_path"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/modules/eff596488a3055adf7024741dffb9ca1/..""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""regional-common""
            ],
            ""outputs"": {
                ""availability_zones"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1a,cn-northwest-1b""
                },
                ""backend_region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""base_ami_1604"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-6ec1d50c""
                },
                ""base_ami_1604_zfs"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-edf8ec8f""
                },
                ""chinapay_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""key_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""pay_china""
                },
                ""region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""region_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""region_env"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        }
    ]
}

-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go] DEBUG: Response s3/PutObject Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 200 OK
Connection: close
Content-Length: 0
Date: Thu, 26 Apr 2018 11:00:39 GMT
Etag: ""807c608ab629b9b73914da058c923c20""
Server: AmazonS3
X-Amz-Id-2: 5Af+DuU/y0Ngtkb6wCq1R0Oz+ZrOYi4apbPsCZTSlwhSqnqBNB64rFL4HfBG6WB9GETdRmQyKnw=
X-Amz-Request-Id: 7984823D8787C039
X-Amz-Server-Side-Encryption: AES256


-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go]
2018/04/26 19:00:38 [DEBUG] plugin: waiting for all plugin processes to complete...

Error: Error applying plan:

1 error(s) occurred:

* module.docdb.aws_instance.riak: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d

2018-04-26T19:00:38.547+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:38 [ERR] plugin: plugin server: accept unix /var/folders/k0/hk5r4k696x901sk4mh_vwcg40000gn/T/plugin243311916: use of closed network connection
Terraform does not automatically rollback in the face of errors.
Instead, your Terraform state file has been partially updated with
any resources that successfully completed. Please address the error
above and apply again to incrementally change your infrastructure.


2018-04-26T19:00:38.550+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-template_v1.0.0_x4
2018-04-26T19:00:38.551+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-aws_v1.16.0_x4
2018-04-26T19:00:38.555+0800 [DEBUG] plugin: plugin process exited: path=/usr/local/bin/terraform-provider-alicloud

```
# Expected Behavior
can create aws instance in China AWS
# Actual Behavior
I can create aws instance in China AWS with provider.aws v1.15.0
but I can't create aws instance with provider.aws v1.16.0",60ac431f06b221bf7fe6d53ee72de1babb1aad5a5a4d17917e4d2f78a7533fef,https://github.com/hashicorp/terraform-provider-aws
33,4359,"# Terraform Version

Terraform v0.11.6
provider.aws v1.16.0

# Affected Resource(s)
aws_instance_ec2
# Terraform Configuration Files
module ""docdb"" {
  source = ""../../../../../../tradeshift-puppet/terraform/modules/aws/instances-cn/riak""
  environment = ""${var.pull_request}""
  stackname = ""${var.stackname}""
  role = ""docdb""
  owner = ""${var.owner}""
  decomission_date = ""${var.decomission_date}""
  instance_type = ""t2.large""
  instance_ami = ""${module.regional-common.base_ami_1604}""
  instance_key_name = ""${module.regional-common.key_name}""
  disable_api_termination = false
  ebs_volume_size = ""100""
  ebs_delete_on_termination = ""false""
  ebs_optimized = false
  vpc_security_groups = ""${data.terraform_remote_state.security_groups.stack_it_run_access_sg_id}""
  vpc_subnets = ""${data.terraform_remote_state.vpc.private_subnets}""
  postfix = "".${var.stackname}""
  dns_region_name = ""${module.regional-common.region_dns}""
  disk_encryption_key = ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx""
  count = ""1""
  cert_name = ""${module.environment-common.cert_name}""
}

# Debug Output
```
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 200 OK
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: text/xml;charset=UTF-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:36 GMT
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Vary: Accept-Encoding
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <DescribeInstanceAttributeResponse xmlns=""http://ec2.amazonaws.com/doc/2016-11-15/"">
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <requestId>35e6cd4e-cb70-4016-a250-53f0880cc9be</requestId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <instanceId>i-022a9894321a6d374</instanceId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:         <value>I2Nsb3VkLWNvbmZpZwptb3VudHM6CiAtIFtlcGhlbWVyYWwwLCBudWxsXQoKcHJlc2VydmVfaG9zdG5hbWU6IHRydWUKbWFuYWdlX2V0Y19ob3N0czogZmFsc2UKCmJvb3RjbWQ6CiAtICJlY2hvIHBheSA+IC9ldGMvdHJhZGVzaGlmdC9zdGFja25hbWUiCiAtICJlY2hvIGRvY2RiLSRJTlNUQU5DRV9JRCA+IC9ldGMvaG9zdG5hbWU7IGhvc3RuYW1lIC1GIC9ldGMvaG9zdG5hbWUiCiAtICJzZWQgLWkgLWUgJy9eMTI3LjAuMC4xL2QnIC9ldGMvaG9zdHM7IGVjaG8gMTI3LjAuMC4xIGRvY2RiLSRJTlNUQU5DRV9JRC5jbi1ub3J0aHdlc3QtMS50ZXN0LmJ3dHNpLmNuIGRvY2RiLSRJTlNUQU5DRV9JRCBsb2NhbGhvc3QgPj4gL2V0Yy9ob3N0cyIKICMgRGlzayBlbmNyeXB0aW9uIGtleSBmb3IgZXBoZW1lcmFsIGRpc2sgZHJpdmVzLCBzYXZlZCB0byByYW0gZHJpdmUKICMgVGhlIHNlZCBwYXJ0IHJlbW92ZXMgdGhlIChzdGRpbik9IG91dHB1dCBmcm9tIG9wZW5zc2wgZGdzdAogLSAiZWNobyAkSU5TVEFOQ0VfSUQgfCBvcGVuc3NsIGRnc3QgLXNoYTI1NiAtaG1hYyAnZHI2OVpVR1ZtMEVwMUVvL3hCb09UY2VmdUtWeCcgfCBzZWQgJ3MvXi4qPSAvLycgPiAvZGV2L3NobS9lbmNyeXB0ZWQtZGlzay5sdWtzLmtleSAmJiBjaG1vZCA0MDAgL2Rldi9zaG0vZW5jcnlwdGVkLWRpc2subHVrcy5rZXkiCgojIERvbid0IG92ZXJyaWRlIG91ciBhcHQgcmVwb3NpdG9yeSBsaXN0IG9uIGZpcnN0IGJvb3QKYXB0X3ByZXNlcnZlX3NvdXJjZXNfbGlzdDogdHJ1ZQoKIyBEb24ndCBwcmludCB0aGUgbmV3IHNzaCBrZXlzIG9uIHRoZSBjb25zb2xlCm5vX3NzaF9maW5nZXJwcmludHM6IHRydWUKCndyaXRlX2ZpbGVzOgogLSBwYXRoOiAvZXRjL3B1cHBldGxhYnMvcHVwcGV0L3B1cHBldC5jb25mCiAgIG93bmVyOiByb290OnJvb3QKICAgcGVybWlzc2lvbnM6ICcwNDQ0JwogICBjb250ZW50OiB8CiAgICAgW21haW5dCiAgICAgY2VydG5hbWUgPSBiYXNlLnRlc3RpbmcuYnd0c2kuY24KICAgICBlbnZpcm9ubWVudCA9IGNoaW5hcGF5CiAgICAgW2FnZW50XQogICAgIHJ1bmludGVydmFsID0gMTAweQogICAgIHNlcnZlciA9IHB1cHBldC5id3RzaS5jbgogICAgIG5vZGVfbmFtZSA9IGZhY3RlcgogICAgIG5vZGVfbmFtZV9mYWN0ID0gZnFkbgogICAgIHNwbGF5ID0gdHJ1ZQogICAgIHNwbGF5bGltaXQgPSA1bQo=</value>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     </userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: </DescribeInstanceAttributeResponse>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] DEBUG: Request ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ REQUEST POST-SIGN ]-----------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: POST / HTTP/1.1
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Host: ec2.cn-northwest-1.amazonaws.com.cn
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: User-Agent: aws-sdk-go/1.13.32 (go1.9.2; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.7
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Length: 95
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/ec2/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-security-token, Signature=60ac431f06b221bf7fe6d53ee72de1babb1aad5a5a4d17917e4d2f78a7533fef
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: application/x-www-form-urlencoded; charset=utf-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Date: 20180426T110036Z
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Accept-Encoding: gzip
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Action=DescribeInstanceCreditSpecifications&InstanceId.1=i-022a9894321a6d374&Version=2016-11-15
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Response ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 400 Bad Request
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:37 GMT
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <Response><Errors><Error><Code>UnsupportedOperation</Code><Message>The functionality you requested is not available in this region.</Message></Error></Errors><RequestID>53ace3cc-2597-49a0-99b2-3b9f1cb8567d</RequestID></Response>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Validate Response ec2/DescribeInstanceCreditSpecifications failed, not retrying, error UnsupportedOperation: The functionality you requested is not available in this region.
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalApplyPost, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalSequence, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [DEBUG] Uploading remote state to S3: {
  Body: buffer(0xc4203e17d0),
  Bucket: ""bwts-terraform-bucket-chinapay"",
  ContentLength: 20792,
  ContentType: ""application/json"",
  Key: ""cn-northwest-1/riak/terraform.tfstate"",
  ServerSideEncryption: ""AES256""
}
2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Request s3/PutObject Details:
---[ REQUEST POST-SIGN ]-----------------------------
PUT /cn-northwest-1/riak/terraform.tfstate HTTP/1.1
Host: bwts-terraform-bucket-chinapay.s3.cn-northwest-1.amazonaws.com.cn
User-Agent: aws-sdk-go/1.12.75 (go1.10.1; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.6
Content-Length: 20792
Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/s3/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-content-sha256;x-amz-date;x-amz-security-token;x-amz-server-side-encryption, Signature=8aa16110ae06a99b503e1f0546a4d6cf208fdf658ca29420baa2d649cec043e2
Content-Type: application/json
X-Amz-Content-Sha256: 04110e3e4cd97aa3e89cfe2f03487922bfd6b6346ec6dfe3fbe8fad9755e18c2
X-Amz-Date: 20180426T110037Z
X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
X-Amz-Server-Side-Encryption: AES256
Accept-Encoding: gzip

{
    ""version"": 3,
    ""terraform_version"": ""0.11.6"",
    ""serial"": 1,
    ""lineage"": ""b9c3c084-789e-7472-0b18-8698b4afc854"",
    ""modules"": [
        {
            ""path"": [
                ""root""
            ],
            ""outputs"": {},
            ""resources"": {
                ""data.terraform_remote_state.security_groups"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""bastion_host"": ""sg-e29feb8b"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/dev-stack-sgs/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""external_lb_sg_id"": ""sg-a55027cc"",
                            ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                            ""rundeck"": ""sg-b39eeada"",
                            ""stack_it_run_access_sg_id"": ""sg-9d5f28f4"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                },
                ""data.terraform_remote_state.vpc"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/vpc/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                            ""private_subnets"": ""subnet-454c962c,subnet-9722ddec"",
                            ""public_subnets"": ""subnet-5e4d9737,subnet-9022ddeb"",
                            ""vpc_cidr"": ""192.168.0.0/19"",
                            ""vpc_id"": ""vpc-34c61f5d"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""docdb""
            ],
            ""outputs"": {},
            ""resources"": {
                ""aws_instance.riak"": {
                    ""type"": ""aws_instance"",
                    ""depends_on"": [
                        ""data.template_file.cloud-init-riak""
                    ],
                    ""primary"": {
                        ""id"": ""i-022a9894321a6d374"",
                        ""attributes"": {
                            ""ami"": ""ami-6ec1d50c"",
                            ""associate_public_ip_address"": ""false"",
                            ""availability_zone"": ""cn-northwest-1a"",
                            ""disable_api_termination"": ""false"",
                            ""ebs_block_device.#"": ""4"",
                            ""ebs_block_device.3965576335.delete_on_termination"": ""false"",
                            ""ebs_block_device.3965576335.device_name"": ""/dev/xvdd"",
                            ""ebs_block_device.3965576335.encrypted"": ""false"",
                            ""ebs_block_device.3965576335.iops"": ""300"",
                            ""ebs_block_device.3965576335.snapshot_id"": """",
                            ""ebs_block_device.3965576335.volume_id"": ""vol-09cde364159031c5d"",
                            ""ebs_block_device.3965576335.volume_size"": ""100"",
                            ""ebs_block_device.3965576335.volume_type"": ""gp2"",
                            ""ebs_block_device.3986656952.delete_on_termination"": ""false"",
                            ""ebs_block_device.3986656952.device_name"": ""/dev/xvde"",
                            ""ebs_block_device.3986656952.encrypted"": ""false"",
                            ""ebs_block_device.3986656952.iops"": ""300"",
                            ""ebs_block_device.3986656952.snapshot_id"": """",
                            ""ebs_block_device.3986656952.volume_id"": ""vol-09c14e768bdd6dd4b"",
                            ""ebs_block_device.3986656952.volume_size"": ""100"",
                            ""ebs_block_device.3986656952.volume_type"": ""gp2"",
                            ""ebs_block_device.3994770134.delete_on_termination"": ""false"",
                            ""ebs_block_device.3994770134.device_name"": ""/dev/xvdg"",
                            ""ebs_block_device.3994770134.encrypted"": ""false"",
                            ""ebs_block_device.3994770134.iops"": ""300"",
                            ""ebs_block_device.3994770134.snapshot_id"": """",
                            ""ebs_block_device.3994770134.volume_id"": ""vol-0e1b3ff63114f3003"",
                            ""ebs_block_device.3994770134.volume_size"": ""100"",
                            ""ebs_block_device.3994770134.volume_type"": ""gp2"",
                            ""ebs_block_device.4023988449.delete_on_termination"": ""false"",
                            ""ebs_block_device.4023988449.device_name"": ""/dev/xvdf"",
                            ""ebs_block_device.4023988449.encrypted"": ""false"",
                            ""ebs_block_device.4023988449.iops"": ""300"",
                            ""ebs_block_device.4023988449.snapshot_id"": """",
                            ""ebs_block_device.4023988449.volume_id"": ""vol-015467a2fec64cfdd"",
                            ""ebs_block_device.4023988449.volume_size"": ""100"",
                            ""ebs_block_device.4023988449.volume_type"": ""gp2"",
                            ""ebs_optimized"": ""false"",
                            ""ephemeral_block_device.#"": ""0"",
                            ""get_password_data"": ""false"",
                            ""iam_instance_profile"": """",
                            ""id"": ""i-022a9894321a6d374"",
                            ""instance_state"": ""running"",
                            ""instance_type"": ""t2.large"",
                            ""ipv6_addresses.#"": ""0"",
                            ""key_name"": ""pay_china"",
                            ""monitoring"": ""false"",
                            ""network_interface.#"": ""0"",
                            ""network_interface_id"": ""eni-fd55c3a4"",
                            ""placement_group"": """",
                            ""primary_network_interface_id"": ""eni-fd55c3a4"",
                            ""private_dns"": ""ip-192-168-14-135.cn-northwest-1.compute.internal"",
                            ""private_ip"": ""192.168.14.135"",
                            ""public_dns"": """",
                            ""public_ip"": """",
                            ""root_block_device.#"": ""1"",
                            ""root_block_device.0.delete_on_termination"": ""true"",
                            ""root_block_device.0.iops"": ""100"",
                            ""root_block_device.0.volume_id"": ""vol-0884c92d17ea04d83"",
                            ""root_block_device.0.volume_size"": ""20"",
                            ""root_block_device.0.volume_type"": ""gp2"",
                            ""security_groups.#"": ""0"",
                            ""source_dest_check"": ""true"",
                            ""subnet_id"": ""subnet-454c962c"",
                            ""tags.%"": ""9"",
                            ""tags.Decomission_Date"": ""never"",
                            ""tags.Environment"": ""chinapay"",
                            ""tags.Name"": ""docdb.pay.cn-northwest-1.test.bwtsi.cn"",
                            ""tags.Owner"": ""operations"",
                            ""tags.Purpose"": ""Riak instance"",
                            ""tags.Role"": ""docdb"",
                            ""tags.Stackname"": ""pay"",
                            ""tags.Started_By"": ""operations"",
                            ""tags.Warning"": ""Managed by terraform, do not edit"",
                            ""tenancy"": ""default"",
                            ""user_data"": ""f35050bdeefa2a2d9f354c0e699a5f2d7c393365"",
                            ""volume_tags.%"": ""0"",
                            ""vpc_security_group_ids.#"": ""1"",
                            ""vpc_security_group_ids.2301982502"": ""sg-9d5f28f4""
                        },
                        ""meta"": {
                            ""e2bfb730-ecaa-11e6-8f88-34363bc7c4c0"": {
                                ""create"": 600000000000,
                                ""delete"": 1200000000000,
                                ""update"": 600000000000
                            },
                            ""schema_version"": ""1""
                        },
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.aws""
                },
                ""data.template_file.cloud-init-riak"": {
                    ""type"": ""template_file"",
                    ""depends_on"": [],
                    ""primary"": {
                        ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                        ""attributes"": {
                            ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                            ""rendered"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo pay \u003e /etc/tradeshift/stackname\""\n - \""echo docdb-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 docdb-$INSTANCE_ID.cn-northwest-1.test.bwtsi.cn docdb-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac 'dr69ZUGVm0Ep1Eo/xBoOTcefuKVx' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = base.testing.bwtsi.cn\n     environment = chinapay\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""template"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo ${STACK_NAME} \u003e /etc/tradeshift/stackname\""\n - \""echo ${HOSTNAME}-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 ${HOSTNAME}-$INSTANCE_ID.${REGION_DNS} ${HOSTNAME}-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac '${DISK_ENCRYPTION_KEY}' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = ${CERT_NAME}\n     environment = ${ENVIRONMENT}\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""vars.%"": ""6"",
                            ""vars.CERT_NAME"": ""base.testing.bwtsi.cn"",
                            ""vars.DISK_ENCRYPTION_KEY"": ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx"",
                            ""vars.ENVIRONMENT"": ""chinapay"",
                            ""vars.HOSTNAME"": ""docdb"",
                            ""vars.REGION_DNS"": ""cn-northwest-1.test.bwtsi.cn"",
                            ""vars.STACK_NAME"": ""pay""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.template""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""environment-common""
            ],
            ""outputs"": {
                ""cert_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""base.testing.bwtsi.cn""
                },
                ""domain_name_search"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test.bwtsi.cn""
                },
                ""environment_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""chinapay""
                },
                ""environment_shortname"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                },
                ""security_group_name_postfix"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": "".chinapay""
                },
                ""site"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""global-common""
            ],
            ""outputs"": {
                ""all_cidr_eu_west_1"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16,172.25.128.0/21,172.25.120.0/21,172.25.112.0/21,172.31.248.0/21,172.31.240.0/21,172.21.0.0/19,172.19.0.0/19,172.22.0.0/19,172.18.0.0/19""
                },
                ""base_tradeshift_net_account_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""694518486591""
                },
                ""gcsops_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.17.22.143/32""
                },
                ""gcsops_cn_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""54.223.95.7/32,54.223.198.170/32,54.223.211.136/32,52.80.34.103/32""
                },
                ""office_ips"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,178.49.148.100/32,87.243.3.34/32,109.166.189.50/32,78.40.84.83/32,4.53.137.82/32,173.247.199.142/32,58.211.225.90/32,202.181.248.19/32,109.70.48.99/32""
                },
                ""prod_base_tradeshift_net_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""prod.base.tradeshift.net""
                },
                ""prod_base_tradeshift_net_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16""
                },
                ""prod_base_tradeshift_net_vpc_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""vpc-264c9042""
                },
                ""prod_ts_sv_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.50.175.210/32,52.30.44.136/32,52.50.189.21/32""
                },
                ""test_bwtsi_cn_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/19""
                },
                ""test_bwtsi_cn_vpc_private_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.12.0/22,192.168.16.0/22""
                },
                ""test_bwtsi_cn_vpc_public_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/22,192.168.4.0/22""
                },
                ""tradeshift_com_public_zone_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""Z2OX0I8SM94425""
                },
                ""translation_service_clients"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,4.53.137.82/32,173.247.199.142/32,130.185.137.106/32,202.181.248.19/32,52.17.87.187/32,52.30.44.136/32,52.30.58.232/32,52.31.203.95/32,52.49.119.80/32,52.49.49.111/32,52.49.5.171/32,52.50.108.6/32,52.50.175.210/32,52.50.189.21/32,52.50.255.154/32,52.50.91.189/32,54.195.199.108/32,54.78.39.106/32,58.211.225.90/32,89.150.143.118/32,54.222.150.122/32,54.222.194.56/32,109.70.48.99/32""
                },
                ""truebn_org_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""34.253.176.198/32,34.241.59.39/32""
                },
                ""userdata_path"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/modules/eff596488a3055adf7024741dffb9ca1/..""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""regional-common""
            ],
            ""outputs"": {
                ""availability_zones"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1a,cn-northwest-1b""
                },
                ""backend_region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""base_ami_1604"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-6ec1d50c""
                },
                ""base_ami_1604_zfs"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-edf8ec8f""
                },
                ""chinapay_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""key_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""pay_china""
                },
                ""region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""region_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""region_env"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        }
    ]
}

-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go] DEBUG: Response s3/PutObject Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 200 OK
Connection: close
Content-Length: 0
Date: Thu, 26 Apr 2018 11:00:39 GMT
Etag: ""807c608ab629b9b73914da058c923c20""
Server: AmazonS3
X-Amz-Id-2: 5Af+DuU/y0Ngtkb6wCq1R0Oz+ZrOYi4apbPsCZTSlwhSqnqBNB64rFL4HfBG6WB9GETdRmQyKnw=
X-Amz-Request-Id: 7984823D8787C039
X-Amz-Server-Side-Encryption: AES256


-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go]
2018/04/26 19:00:38 [DEBUG] plugin: waiting for all plugin processes to complete...

Error: Error applying plan:

1 error(s) occurred:

* module.docdb.aws_instance.riak: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d

2018-04-26T19:00:38.547+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:38 [ERR] plugin: plugin server: accept unix /var/folders/k0/hk5r4k696x901sk4mh_vwcg40000gn/T/plugin243311916: use of closed network connection
Terraform does not automatically rollback in the face of errors.
Instead, your Terraform state file has been partially updated with
any resources that successfully completed. Please address the error
above and apply again to incrementally change your infrastructure.


2018-04-26T19:00:38.550+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-template_v1.0.0_x4
2018-04-26T19:00:38.551+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-aws_v1.16.0_x4
2018-04-26T19:00:38.555+0800 [DEBUG] plugin: plugin process exited: path=/usr/local/bin/terraform-provider-alicloud

```
# Expected Behavior
can create aws instance in China AWS
# Actual Behavior
I can create aws instance in China AWS with provider.aws v1.15.0
but I can't create aws instance with provider.aws v1.16.0",04110e3e4cd97aa3e89cfe2f03487922bfd6b6346ec6dfe3fbe8fad9755e18c2,https://github.com/hashicorp/terraform-provider-aws
34,4359,"# Terraform Version

Terraform v0.11.6
provider.aws v1.16.0

# Affected Resource(s)
aws_instance_ec2
# Terraform Configuration Files
module ""docdb"" {
  source = ""../../../../../../tradeshift-puppet/terraform/modules/aws/instances-cn/riak""
  environment = ""${var.pull_request}""
  stackname = ""${var.stackname}""
  role = ""docdb""
  owner = ""${var.owner}""
  decomission_date = ""${var.decomission_date}""
  instance_type = ""t2.large""
  instance_ami = ""${module.regional-common.base_ami_1604}""
  instance_key_name = ""${module.regional-common.key_name}""
  disable_api_termination = false
  ebs_volume_size = ""100""
  ebs_delete_on_termination = ""false""
  ebs_optimized = false
  vpc_security_groups = ""${data.terraform_remote_state.security_groups.stack_it_run_access_sg_id}""
  vpc_subnets = ""${data.terraform_remote_state.vpc.private_subnets}""
  postfix = "".${var.stackname}""
  dns_region_name = ""${module.regional-common.region_dns}""
  disk_encryption_key = ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx""
  count = ""1""
  cert_name = ""${module.environment-common.cert_name}""
}

# Debug Output
```
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 200 OK
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: text/xml;charset=UTF-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:36 GMT
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Vary: Accept-Encoding
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <DescribeInstanceAttributeResponse xmlns=""http://ec2.amazonaws.com/doc/2016-11-15/"">
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <requestId>35e6cd4e-cb70-4016-a250-53f0880cc9be</requestId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <instanceId>i-022a9894321a6d374</instanceId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:         <value>I2Nsb3VkLWNvbmZpZwptb3VudHM6CiAtIFtlcGhlbWVyYWwwLCBudWxsXQoKcHJlc2VydmVfaG9zdG5hbWU6IHRydWUKbWFuYWdlX2V0Y19ob3N0czogZmFsc2UKCmJvb3RjbWQ6CiAtICJlY2hvIHBheSA+IC9ldGMvdHJhZGVzaGlmdC9zdGFja25hbWUiCiAtICJlY2hvIGRvY2RiLSRJTlNUQU5DRV9JRCA+IC9ldGMvaG9zdG5hbWU7IGhvc3RuYW1lIC1GIC9ldGMvaG9zdG5hbWUiCiAtICJzZWQgLWkgLWUgJy9eMTI3LjAuMC4xL2QnIC9ldGMvaG9zdHM7IGVjaG8gMTI3LjAuMC4xIGRvY2RiLSRJTlNUQU5DRV9JRC5jbi1ub3J0aHdlc3QtMS50ZXN0LmJ3dHNpLmNuIGRvY2RiLSRJTlNUQU5DRV9JRCBsb2NhbGhvc3QgPj4gL2V0Yy9ob3N0cyIKICMgRGlzayBlbmNyeXB0aW9uIGtleSBmb3IgZXBoZW1lcmFsIGRpc2sgZHJpdmVzLCBzYXZlZCB0byByYW0gZHJpdmUKICMgVGhlIHNlZCBwYXJ0IHJlbW92ZXMgdGhlIChzdGRpbik9IG91dHB1dCBmcm9tIG9wZW5zc2wgZGdzdAogLSAiZWNobyAkSU5TVEFOQ0VfSUQgfCBvcGVuc3NsIGRnc3QgLXNoYTI1NiAtaG1hYyAnZHI2OVpVR1ZtMEVwMUVvL3hCb09UY2VmdUtWeCcgfCBzZWQgJ3MvXi4qPSAvLycgPiAvZGV2L3NobS9lbmNyeXB0ZWQtZGlzay5sdWtzLmtleSAmJiBjaG1vZCA0MDAgL2Rldi9zaG0vZW5jcnlwdGVkLWRpc2subHVrcy5rZXkiCgojIERvbid0IG92ZXJyaWRlIG91ciBhcHQgcmVwb3NpdG9yeSBsaXN0IG9uIGZpcnN0IGJvb3QKYXB0X3ByZXNlcnZlX3NvdXJjZXNfbGlzdDogdHJ1ZQoKIyBEb24ndCBwcmludCB0aGUgbmV3IHNzaCBrZXlzIG9uIHRoZSBjb25zb2xlCm5vX3NzaF9maW5nZXJwcmludHM6IHRydWUKCndyaXRlX2ZpbGVzOgogLSBwYXRoOiAvZXRjL3B1cHBldGxhYnMvcHVwcGV0L3B1cHBldC5jb25mCiAgIG93bmVyOiByb290OnJvb3QKICAgcGVybWlzc2lvbnM6ICcwNDQ0JwogICBjb250ZW50OiB8CiAgICAgW21haW5dCiAgICAgY2VydG5hbWUgPSBiYXNlLnRlc3RpbmcuYnd0c2kuY24KICAgICBlbnZpcm9ubWVudCA9IGNoaW5hcGF5CiAgICAgW2FnZW50XQogICAgIHJ1bmludGVydmFsID0gMTAweQogICAgIHNlcnZlciA9IHB1cHBldC5id3RzaS5jbgogICAgIG5vZGVfbmFtZSA9IGZhY3RlcgogICAgIG5vZGVfbmFtZV9mYWN0ID0gZnFkbgogICAgIHNwbGF5ID0gdHJ1ZQogICAgIHNwbGF5bGltaXQgPSA1bQo=</value>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     </userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: </DescribeInstanceAttributeResponse>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] DEBUG: Request ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ REQUEST POST-SIGN ]-----------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: POST / HTTP/1.1
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Host: ec2.cn-northwest-1.amazonaws.com.cn
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: User-Agent: aws-sdk-go/1.13.32 (go1.9.2; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.7
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Length: 95
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/ec2/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-security-token, Signature=60ac431f06b221bf7fe6d53ee72de1babb1aad5a5a4d17917e4d2f78a7533fef
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: application/x-www-form-urlencoded; charset=utf-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Date: 20180426T110036Z
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Accept-Encoding: gzip
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Action=DescribeInstanceCreditSpecifications&InstanceId.1=i-022a9894321a6d374&Version=2016-11-15
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Response ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 400 Bad Request
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:37 GMT
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <Response><Errors><Error><Code>UnsupportedOperation</Code><Message>The functionality you requested is not available in this region.</Message></Error></Errors><RequestID>53ace3cc-2597-49a0-99b2-3b9f1cb8567d</RequestID></Response>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Validate Response ec2/DescribeInstanceCreditSpecifications failed, not retrying, error UnsupportedOperation: The functionality you requested is not available in this region.
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalApplyPost, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalSequence, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [DEBUG] Uploading remote state to S3: {
  Body: buffer(0xc4203e17d0),
  Bucket: ""bwts-terraform-bucket-chinapay"",
  ContentLength: 20792,
  ContentType: ""application/json"",
  Key: ""cn-northwest-1/riak/terraform.tfstate"",
  ServerSideEncryption: ""AES256""
}
2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Request s3/PutObject Details:
---[ REQUEST POST-SIGN ]-----------------------------
PUT /cn-northwest-1/riak/terraform.tfstate HTTP/1.1
Host: bwts-terraform-bucket-chinapay.s3.cn-northwest-1.amazonaws.com.cn
User-Agent: aws-sdk-go/1.12.75 (go1.10.1; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.6
Content-Length: 20792
Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/s3/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-content-sha256;x-amz-date;x-amz-security-token;x-amz-server-side-encryption, Signature=8aa16110ae06a99b503e1f0546a4d6cf208fdf658ca29420baa2d649cec043e2
Content-Type: application/json
X-Amz-Content-Sha256: 04110e3e4cd97aa3e89cfe2f03487922bfd6b6346ec6dfe3fbe8fad9755e18c2
X-Amz-Date: 20180426T110037Z
X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
X-Amz-Server-Side-Encryption: AES256
Accept-Encoding: gzip

{
    ""version"": 3,
    ""terraform_version"": ""0.11.6"",
    ""serial"": 1,
    ""lineage"": ""b9c3c084-789e-7472-0b18-8698b4afc854"",
    ""modules"": [
        {
            ""path"": [
                ""root""
            ],
            ""outputs"": {},
            ""resources"": {
                ""data.terraform_remote_state.security_groups"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""bastion_host"": ""sg-e29feb8b"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/dev-stack-sgs/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""external_lb_sg_id"": ""sg-a55027cc"",
                            ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                            ""rundeck"": ""sg-b39eeada"",
                            ""stack_it_run_access_sg_id"": ""sg-9d5f28f4"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                },
                ""data.terraform_remote_state.vpc"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/vpc/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                            ""private_subnets"": ""subnet-454c962c,subnet-9722ddec"",
                            ""public_subnets"": ""subnet-5e4d9737,subnet-9022ddeb"",
                            ""vpc_cidr"": ""192.168.0.0/19"",
                            ""vpc_id"": ""vpc-34c61f5d"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""docdb""
            ],
            ""outputs"": {},
            ""resources"": {
                ""aws_instance.riak"": {
                    ""type"": ""aws_instance"",
                    ""depends_on"": [
                        ""data.template_file.cloud-init-riak""
                    ],
                    ""primary"": {
                        ""id"": ""i-022a9894321a6d374"",
                        ""attributes"": {
                            ""ami"": ""ami-6ec1d50c"",
                            ""associate_public_ip_address"": ""false"",
                            ""availability_zone"": ""cn-northwest-1a"",
                            ""disable_api_termination"": ""false"",
                            ""ebs_block_device.#"": ""4"",
                            ""ebs_block_device.3965576335.delete_on_termination"": ""false"",
                            ""ebs_block_device.3965576335.device_name"": ""/dev/xvdd"",
                            ""ebs_block_device.3965576335.encrypted"": ""false"",
                            ""ebs_block_device.3965576335.iops"": ""300"",
                            ""ebs_block_device.3965576335.snapshot_id"": """",
                            ""ebs_block_device.3965576335.volume_id"": ""vol-09cde364159031c5d"",
                            ""ebs_block_device.3965576335.volume_size"": ""100"",
                            ""ebs_block_device.3965576335.volume_type"": ""gp2"",
                            ""ebs_block_device.3986656952.delete_on_termination"": ""false"",
                            ""ebs_block_device.3986656952.device_name"": ""/dev/xvde"",
                            ""ebs_block_device.3986656952.encrypted"": ""false"",
                            ""ebs_block_device.3986656952.iops"": ""300"",
                            ""ebs_block_device.3986656952.snapshot_id"": """",
                            ""ebs_block_device.3986656952.volume_id"": ""vol-09c14e768bdd6dd4b"",
                            ""ebs_block_device.3986656952.volume_size"": ""100"",
                            ""ebs_block_device.3986656952.volume_type"": ""gp2"",
                            ""ebs_block_device.3994770134.delete_on_termination"": ""false"",
                            ""ebs_block_device.3994770134.device_name"": ""/dev/xvdg"",
                            ""ebs_block_device.3994770134.encrypted"": ""false"",
                            ""ebs_block_device.3994770134.iops"": ""300"",
                            ""ebs_block_device.3994770134.snapshot_id"": """",
                            ""ebs_block_device.3994770134.volume_id"": ""vol-0e1b3ff63114f3003"",
                            ""ebs_block_device.3994770134.volume_size"": ""100"",
                            ""ebs_block_device.3994770134.volume_type"": ""gp2"",
                            ""ebs_block_device.4023988449.delete_on_termination"": ""false"",
                            ""ebs_block_device.4023988449.device_name"": ""/dev/xvdf"",
                            ""ebs_block_device.4023988449.encrypted"": ""false"",
                            ""ebs_block_device.4023988449.iops"": ""300"",
                            ""ebs_block_device.4023988449.snapshot_id"": """",
                            ""ebs_block_device.4023988449.volume_id"": ""vol-015467a2fec64cfdd"",
                            ""ebs_block_device.4023988449.volume_size"": ""100"",
                            ""ebs_block_device.4023988449.volume_type"": ""gp2"",
                            ""ebs_optimized"": ""false"",
                            ""ephemeral_block_device.#"": ""0"",
                            ""get_password_data"": ""false"",
                            ""iam_instance_profile"": """",
                            ""id"": ""i-022a9894321a6d374"",
                            ""instance_state"": ""running"",
                            ""instance_type"": ""t2.large"",
                            ""ipv6_addresses.#"": ""0"",
                            ""key_name"": ""pay_china"",
                            ""monitoring"": ""false"",
                            ""network_interface.#"": ""0"",
                            ""network_interface_id"": ""eni-fd55c3a4"",
                            ""placement_group"": """",
                            ""primary_network_interface_id"": ""eni-fd55c3a4"",
                            ""private_dns"": ""ip-192-168-14-135.cn-northwest-1.compute.internal"",
                            ""private_ip"": ""192.168.14.135"",
                            ""public_dns"": """",
                            ""public_ip"": """",
                            ""root_block_device.#"": ""1"",
                            ""root_block_device.0.delete_on_termination"": ""true"",
                            ""root_block_device.0.iops"": ""100"",
                            ""root_block_device.0.volume_id"": ""vol-0884c92d17ea04d83"",
                            ""root_block_device.0.volume_size"": ""20"",
                            ""root_block_device.0.volume_type"": ""gp2"",
                            ""security_groups.#"": ""0"",
                            ""source_dest_check"": ""true"",
                            ""subnet_id"": ""subnet-454c962c"",
                            ""tags.%"": ""9"",
                            ""tags.Decomission_Date"": ""never"",
                            ""tags.Environment"": ""chinapay"",
                            ""tags.Name"": ""docdb.pay.cn-northwest-1.test.bwtsi.cn"",
                            ""tags.Owner"": ""operations"",
                            ""tags.Purpose"": ""Riak instance"",
                            ""tags.Role"": ""docdb"",
                            ""tags.Stackname"": ""pay"",
                            ""tags.Started_By"": ""operations"",
                            ""tags.Warning"": ""Managed by terraform, do not edit"",
                            ""tenancy"": ""default"",
                            ""user_data"": ""f35050bdeefa2a2d9f354c0e699a5f2d7c393365"",
                            ""volume_tags.%"": ""0"",
                            ""vpc_security_group_ids.#"": ""1"",
                            ""vpc_security_group_ids.2301982502"": ""sg-9d5f28f4""
                        },
                        ""meta"": {
                            ""e2bfb730-ecaa-11e6-8f88-34363bc7c4c0"": {
                                ""create"": 600000000000,
                                ""delete"": 1200000000000,
                                ""update"": 600000000000
                            },
                            ""schema_version"": ""1""
                        },
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.aws""
                },
                ""data.template_file.cloud-init-riak"": {
                    ""type"": ""template_file"",
                    ""depends_on"": [],
                    ""primary"": {
                        ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                        ""attributes"": {
                            ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                            ""rendered"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo pay \u003e /etc/tradeshift/stackname\""\n - \""echo docdb-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 docdb-$INSTANCE_ID.cn-northwest-1.test.bwtsi.cn docdb-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac 'dr69ZUGVm0Ep1Eo/xBoOTcefuKVx' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = base.testing.bwtsi.cn\n     environment = chinapay\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""template"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo ${STACK_NAME} \u003e /etc/tradeshift/stackname\""\n - \""echo ${HOSTNAME}-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 ${HOSTNAME}-$INSTANCE_ID.${REGION_DNS} ${HOSTNAME}-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac '${DISK_ENCRYPTION_KEY}' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = ${CERT_NAME}\n     environment = ${ENVIRONMENT}\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""vars.%"": ""6"",
                            ""vars.CERT_NAME"": ""base.testing.bwtsi.cn"",
                            ""vars.DISK_ENCRYPTION_KEY"": ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx"",
                            ""vars.ENVIRONMENT"": ""chinapay"",
                            ""vars.HOSTNAME"": ""docdb"",
                            ""vars.REGION_DNS"": ""cn-northwest-1.test.bwtsi.cn"",
                            ""vars.STACK_NAME"": ""pay""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.template""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""environment-common""
            ],
            ""outputs"": {
                ""cert_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""base.testing.bwtsi.cn""
                },
                ""domain_name_search"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test.bwtsi.cn""
                },
                ""environment_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""chinapay""
                },
                ""environment_shortname"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                },
                ""security_group_name_postfix"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": "".chinapay""
                },
                ""site"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""global-common""
            ],
            ""outputs"": {
                ""all_cidr_eu_west_1"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16,172.25.128.0/21,172.25.120.0/21,172.25.112.0/21,172.31.248.0/21,172.31.240.0/21,172.21.0.0/19,172.19.0.0/19,172.22.0.0/19,172.18.0.0/19""
                },
                ""base_tradeshift_net_account_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""694518486591""
                },
                ""gcsops_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.17.22.143/32""
                },
                ""gcsops_cn_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""54.223.95.7/32,54.223.198.170/32,54.223.211.136/32,52.80.34.103/32""
                },
                ""office_ips"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,178.49.148.100/32,87.243.3.34/32,109.166.189.50/32,78.40.84.83/32,4.53.137.82/32,173.247.199.142/32,58.211.225.90/32,202.181.248.19/32,109.70.48.99/32""
                },
                ""prod_base_tradeshift_net_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""prod.base.tradeshift.net""
                },
                ""prod_base_tradeshift_net_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16""
                },
                ""prod_base_tradeshift_net_vpc_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""vpc-264c9042""
                },
                ""prod_ts_sv_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.50.175.210/32,52.30.44.136/32,52.50.189.21/32""
                },
                ""test_bwtsi_cn_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/19""
                },
                ""test_bwtsi_cn_vpc_private_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.12.0/22,192.168.16.0/22""
                },
                ""test_bwtsi_cn_vpc_public_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/22,192.168.4.0/22""
                },
                ""tradeshift_com_public_zone_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""Z2OX0I8SM94425""
                },
                ""translation_service_clients"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,4.53.137.82/32,173.247.199.142/32,130.185.137.106/32,202.181.248.19/32,52.17.87.187/32,52.30.44.136/32,52.30.58.232/32,52.31.203.95/32,52.49.119.80/32,52.49.49.111/32,52.49.5.171/32,52.50.108.6/32,52.50.175.210/32,52.50.189.21/32,52.50.255.154/32,52.50.91.189/32,54.195.199.108/32,54.78.39.106/32,58.211.225.90/32,89.150.143.118/32,54.222.150.122/32,54.222.194.56/32,109.70.48.99/32""
                },
                ""truebn_org_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""34.253.176.198/32,34.241.59.39/32""
                },
                ""userdata_path"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/modules/eff596488a3055adf7024741dffb9ca1/..""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""regional-common""
            ],
            ""outputs"": {
                ""availability_zones"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1a,cn-northwest-1b""
                },
                ""backend_region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""base_ami_1604"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-6ec1d50c""
                },
                ""base_ami_1604_zfs"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-edf8ec8f""
                },
                ""chinapay_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""key_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""pay_china""
                },
                ""region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""region_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""region_env"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        }
    ]
}

-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go] DEBUG: Response s3/PutObject Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 200 OK
Connection: close
Content-Length: 0
Date: Thu, 26 Apr 2018 11:00:39 GMT
Etag: ""807c608ab629b9b73914da058c923c20""
Server: AmazonS3
X-Amz-Id-2: 5Af+DuU/y0Ngtkb6wCq1R0Oz+ZrOYi4apbPsCZTSlwhSqnqBNB64rFL4HfBG6WB9GETdRmQyKnw=
X-Amz-Request-Id: 7984823D8787C039
X-Amz-Server-Side-Encryption: AES256


-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go]
2018/04/26 19:00:38 [DEBUG] plugin: waiting for all plugin processes to complete...

Error: Error applying plan:

1 error(s) occurred:

* module.docdb.aws_instance.riak: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d

2018-04-26T19:00:38.547+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:38 [ERR] plugin: plugin server: accept unix /var/folders/k0/hk5r4k696x901sk4mh_vwcg40000gn/T/plugin243311916: use of closed network connection
Terraform does not automatically rollback in the face of errors.
Instead, your Terraform state file has been partially updated with
any resources that successfully completed. Please address the error
above and apply again to incrementally change your infrastructure.


2018-04-26T19:00:38.550+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-template_v1.0.0_x4
2018-04-26T19:00:38.551+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-aws_v1.16.0_x4
2018-04-26T19:00:38.555+0800 [DEBUG] plugin: plugin process exited: path=/usr/local/bin/terraform-provider-alicloud

```
# Expected Behavior
can create aws instance in China AWS
# Actual Behavior
I can create aws instance in China AWS with provider.aws v1.15.0
but I can't create aws instance with provider.aws v1.16.0",IC9ldGMvaG9zdG5hbWU7IGhvc3RuYW1lIC1GIC9ldGMvaG9zdG5hbWUiCiAtICJzZWQgLWkgLWUgJy9eMTI3LjAuMC4xL2QnIC9ldGMvaG9zdHM7IGVjaG8gMTI3LjAuMC4xIGRvY2RiLSRJTlNUQU5DRV9JRC5jbi1ub3J0aHdlc3QtMS50ZXN0LmJ3dHNpLmNuIGRvY2RiLSRJTlNUQU5DRV9JRCBsb2NhbGhvc3QgPj4gL2V0Yy9ob3N0cyIKICMgRGlzayBlbmNyeXB0aW9uIGtleSBmb3IgZXBoZW1lcmFsIGRpc2sgZHJpdmVzLCBzYXZlZCB0byByYW0gZHJpdmUKICMgVGhlIHNlZCBwYXJ0IHJlbW92ZXMgdGhlIChzdGRpbik9IG91dHB1dCBmcm9tIG9wZW5zc2wgZGdzdAogLSAiZWNobyAkSU5TVEFOQ0VfSUQgfCBvcGVuc3NsIGRnc3QgLXNoYTI1NiAtaG1hYyAnZHI2OVpVR1ZtMEVwMUVvL3hCb09UY2VmdUtWeCcgfCBzZWQgJ3MvXi4qPSAvLycgPiAvZGV2L3NobS9lbmNyeXB0ZWQtZGlzay5sdWtzLmtleSAmJiBjaG1vZCA0MDAgL2Rldi9zaG0vZW5jcnlwdGVkLWRpc2subHVrcy5rZXkiCgojIERvbid0IG92ZXJyaWRlIG91ciBhcHQgcmVwb3NpdG9yeSBsaXN0IG9uIGZpcnN0IGJvb3QKYXB0X3ByZXNlcnZlX3NvdXJjZXNfbGlzdDogdHJ1ZQoKIyBEb24ndCBwcmludCB0aGUgbmV3IHNzaCBrZXlzIG9uIHRoZSBjb25zb2xlCm5vX3NzaF9maW5nZXJwcmludHM6IHRydWUKCndyaXRlX2ZpbGVzOgogLSBwYXRoOiAvZXRjL3B1cHBldGxhYnMvcHVwcGV0L3B1cHBldC5jb25mCiAgIG93bmVyOiByb290OnJvb3QKICAgcGVybWlzc2lvbnM6ICcwNDQ0JwogICBjb250ZW50OiB8CiAgICAgW21haW5dCiAgICAgY2VydG5hbWUgPSBiYXNlLnRlc3RpbmcuYnd0c2kuY24KICAgICBlbnZpcm9ubWVudCA9IGNoaW5hcGF5CiAgICAgW2FnZW50XQogICAgIHJ1bmludGVydmFsID0gMTAweQogICAgIHNlcnZlciA9IHB1cHBldC5id3RzaS5jbgogICAgIG5vZGVfbmFtZSA9IGZhY3RlcgogICAgIG5vZGVfbmFtZV9mYWN0ID0gZnFkbgogICAgIHNwbGF5ID0gdHJ1ZQogICAgIHNwbGF5bGltaXQgPSA1bQo,https://github.com/hashicorp/terraform-provider-aws
35,4359,"# Terraform Version

Terraform v0.11.6
provider.aws v1.16.0

# Affected Resource(s)
aws_instance_ec2
# Terraform Configuration Files
module ""docdb"" {
  source = ""../../../../../../tradeshift-puppet/terraform/modules/aws/instances-cn/riak""
  environment = ""${var.pull_request}""
  stackname = ""${var.stackname}""
  role = ""docdb""
  owner = ""${var.owner}""
  decomission_date = ""${var.decomission_date}""
  instance_type = ""t2.large""
  instance_ami = ""${module.regional-common.base_ami_1604}""
  instance_key_name = ""${module.regional-common.key_name}""
  disable_api_termination = false
  ebs_volume_size = ""100""
  ebs_delete_on_termination = ""false""
  ebs_optimized = false
  vpc_security_groups = ""${data.terraform_remote_state.security_groups.stack_it_run_access_sg_id}""
  vpc_subnets = ""${data.terraform_remote_state.vpc.private_subnets}""
  postfix = "".${var.stackname}""
  dns_region_name = ""${module.regional-common.region_dns}""
  disk_encryption_key = ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx""
  count = ""1""
  cert_name = ""${module.environment-common.cert_name}""
}

# Debug Output
```
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 200 OK
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: text/xml;charset=UTF-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:36 GMT
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Vary: Accept-Encoding
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <DescribeInstanceAttributeResponse xmlns=""http://ec2.amazonaws.com/doc/2016-11-15/"">
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <requestId>35e6cd4e-cb70-4016-a250-53f0880cc9be</requestId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <instanceId>i-022a9894321a6d374</instanceId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:         <value>I2Nsb3VkLWNvbmZpZwptb3VudHM6CiAtIFtlcGhlbWVyYWwwLCBudWxsXQoKcHJlc2VydmVfaG9zdG5hbWU6IHRydWUKbWFuYWdlX2V0Y19ob3N0czogZmFsc2UKCmJvb3RjbWQ6CiAtICJlY2hvIHBheSA+IC9ldGMvdHJhZGVzaGlmdC9zdGFja25hbWUiCiAtICJlY2hvIGRvY2RiLSRJTlNUQU5DRV9JRCA+IC9ldGMvaG9zdG5hbWU7IGhvc3RuYW1lIC1GIC9ldGMvaG9zdG5hbWUiCiAtICJzZWQgLWkgLWUgJy9eMTI3LjAuMC4xL2QnIC9ldGMvaG9zdHM7IGVjaG8gMTI3LjAuMC4xIGRvY2RiLSRJTlNUQU5DRV9JRC5jbi1ub3J0aHdlc3QtMS50ZXN0LmJ3dHNpLmNuIGRvY2RiLSRJTlNUQU5DRV9JRCBsb2NhbGhvc3QgPj4gL2V0Yy9ob3N0cyIKICMgRGlzayBlbmNyeXB0aW9uIGtleSBmb3IgZXBoZW1lcmFsIGRpc2sgZHJpdmVzLCBzYXZlZCB0byByYW0gZHJpdmUKICMgVGhlIHNlZCBwYXJ0IHJlbW92ZXMgdGhlIChzdGRpbik9IG91dHB1dCBmcm9tIG9wZW5zc2wgZGdzdAogLSAiZWNobyAkSU5TVEFOQ0VfSUQgfCBvcGVuc3NsIGRnc3QgLXNoYTI1NiAtaG1hYyAnZHI2OVpVR1ZtMEVwMUVvL3hCb09UY2VmdUtWeCcgfCBzZWQgJ3MvXi4qPSAvLycgPiAvZGV2L3NobS9lbmNyeXB0ZWQtZGlzay5sdWtzLmtleSAmJiBjaG1vZCA0MDAgL2Rldi9zaG0vZW5jcnlwdGVkLWRpc2subHVrcy5rZXkiCgojIERvbid0IG92ZXJyaWRlIG91ciBhcHQgcmVwb3NpdG9yeSBsaXN0IG9uIGZpcnN0IGJvb3QKYXB0X3ByZXNlcnZlX3NvdXJjZXNfbGlzdDogdHJ1ZQoKIyBEb24ndCBwcmludCB0aGUgbmV3IHNzaCBrZXlzIG9uIHRoZSBjb25zb2xlCm5vX3NzaF9maW5nZXJwcmludHM6IHRydWUKCndyaXRlX2ZpbGVzOgogLSBwYXRoOiAvZXRjL3B1cHBldGxhYnMvcHVwcGV0L3B1cHBldC5jb25mCiAgIG93bmVyOiByb290OnJvb3QKICAgcGVybWlzc2lvbnM6ICcwNDQ0JwogICBjb250ZW50OiB8CiAgICAgW21haW5dCiAgICAgY2VydG5hbWUgPSBiYXNlLnRlc3RpbmcuYnd0c2kuY24KICAgICBlbnZpcm9ubWVudCA9IGNoaW5hcGF5CiAgICAgW2FnZW50XQogICAgIHJ1bmludGVydmFsID0gMTAweQogICAgIHNlcnZlciA9IHB1cHBldC5id3RzaS5jbgogICAgIG5vZGVfbmFtZSA9IGZhY3RlcgogICAgIG5vZGVfbmFtZV9mYWN0ID0gZnFkbgogICAgIHNwbGF5ID0gdHJ1ZQogICAgIHNwbGF5bGltaXQgPSA1bQo=</value>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     </userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: </DescribeInstanceAttributeResponse>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] DEBUG: Request ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ REQUEST POST-SIGN ]-----------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: POST / HTTP/1.1
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Host: ec2.cn-northwest-1.amazonaws.com.cn
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: User-Agent: aws-sdk-go/1.13.32 (go1.9.2; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.7
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Length: 95
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/ec2/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-security-token, Signature=60ac431f06b221bf7fe6d53ee72de1babb1aad5a5a4d17917e4d2f78a7533fef
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: application/x-www-form-urlencoded; charset=utf-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Date: 20180426T110036Z
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Accept-Encoding: gzip
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Action=DescribeInstanceCreditSpecifications&InstanceId.1=i-022a9894321a6d374&Version=2016-11-15
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Response ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 400 Bad Request
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:37 GMT
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <Response><Errors><Error><Code>UnsupportedOperation</Code><Message>The functionality you requested is not available in this region.</Message></Error></Errors><RequestID>53ace3cc-2597-49a0-99b2-3b9f1cb8567d</RequestID></Response>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Validate Response ec2/DescribeInstanceCreditSpecifications failed, not retrying, error UnsupportedOperation: The functionality you requested is not available in this region.
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalApplyPost, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalSequence, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [DEBUG] Uploading remote state to S3: {
  Body: buffer(0xc4203e17d0),
  Bucket: ""bwts-terraform-bucket-chinapay"",
  ContentLength: 20792,
  ContentType: ""application/json"",
  Key: ""cn-northwest-1/riak/terraform.tfstate"",
  ServerSideEncryption: ""AES256""
}
2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Request s3/PutObject Details:
---[ REQUEST POST-SIGN ]-----------------------------
PUT /cn-northwest-1/riak/terraform.tfstate HTTP/1.1
Host: bwts-terraform-bucket-chinapay.s3.cn-northwest-1.amazonaws.com.cn
User-Agent: aws-sdk-go/1.12.75 (go1.10.1; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.6
Content-Length: 20792
Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/s3/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-content-sha256;x-amz-date;x-amz-security-token;x-amz-server-side-encryption, Signature=8aa16110ae06a99b503e1f0546a4d6cf208fdf658ca29420baa2d649cec043e2
Content-Type: application/json
X-Amz-Content-Sha256: 04110e3e4cd97aa3e89cfe2f03487922bfd6b6346ec6dfe3fbe8fad9755e18c2
X-Amz-Date: 20180426T110037Z
X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
X-Amz-Server-Side-Encryption: AES256
Accept-Encoding: gzip

{
    ""version"": 3,
    ""terraform_version"": ""0.11.6"",
    ""serial"": 1,
    ""lineage"": ""b9c3c084-789e-7472-0b18-8698b4afc854"",
    ""modules"": [
        {
            ""path"": [
                ""root""
            ],
            ""outputs"": {},
            ""resources"": {
                ""data.terraform_remote_state.security_groups"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""bastion_host"": ""sg-e29feb8b"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/dev-stack-sgs/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""external_lb_sg_id"": ""sg-a55027cc"",
                            ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                            ""rundeck"": ""sg-b39eeada"",
                            ""stack_it_run_access_sg_id"": ""sg-9d5f28f4"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                },
                ""data.terraform_remote_state.vpc"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/vpc/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                            ""private_subnets"": ""subnet-454c962c,subnet-9722ddec"",
                            ""public_subnets"": ""subnet-5e4d9737,subnet-9022ddeb"",
                            ""vpc_cidr"": ""192.168.0.0/19"",
                            ""vpc_id"": ""vpc-34c61f5d"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""docdb""
            ],
            ""outputs"": {},
            ""resources"": {
                ""aws_instance.riak"": {
                    ""type"": ""aws_instance"",
                    ""depends_on"": [
                        ""data.template_file.cloud-init-riak""
                    ],
                    ""primary"": {
                        ""id"": ""i-022a9894321a6d374"",
                        ""attributes"": {
                            ""ami"": ""ami-6ec1d50c"",
                            ""associate_public_ip_address"": ""false"",
                            ""availability_zone"": ""cn-northwest-1a"",
                            ""disable_api_termination"": ""false"",
                            ""ebs_block_device.#"": ""4"",
                            ""ebs_block_device.3965576335.delete_on_termination"": ""false"",
                            ""ebs_block_device.3965576335.device_name"": ""/dev/xvdd"",
                            ""ebs_block_device.3965576335.encrypted"": ""false"",
                            ""ebs_block_device.3965576335.iops"": ""300"",
                            ""ebs_block_device.3965576335.snapshot_id"": """",
                            ""ebs_block_device.3965576335.volume_id"": ""vol-09cde364159031c5d"",
                            ""ebs_block_device.3965576335.volume_size"": ""100"",
                            ""ebs_block_device.3965576335.volume_type"": ""gp2"",
                            ""ebs_block_device.3986656952.delete_on_termination"": ""false"",
                            ""ebs_block_device.3986656952.device_name"": ""/dev/xvde"",
                            ""ebs_block_device.3986656952.encrypted"": ""false"",
                            ""ebs_block_device.3986656952.iops"": ""300"",
                            ""ebs_block_device.3986656952.snapshot_id"": """",
                            ""ebs_block_device.3986656952.volume_id"": ""vol-09c14e768bdd6dd4b"",
                            ""ebs_block_device.3986656952.volume_size"": ""100"",
                            ""ebs_block_device.3986656952.volume_type"": ""gp2"",
                            ""ebs_block_device.3994770134.delete_on_termination"": ""false"",
                            ""ebs_block_device.3994770134.device_name"": ""/dev/xvdg"",
                            ""ebs_block_device.3994770134.encrypted"": ""false"",
                            ""ebs_block_device.3994770134.iops"": ""300"",
                            ""ebs_block_device.3994770134.snapshot_id"": """",
                            ""ebs_block_device.3994770134.volume_id"": ""vol-0e1b3ff63114f3003"",
                            ""ebs_block_device.3994770134.volume_size"": ""100"",
                            ""ebs_block_device.3994770134.volume_type"": ""gp2"",
                            ""ebs_block_device.4023988449.delete_on_termination"": ""false"",
                            ""ebs_block_device.4023988449.device_name"": ""/dev/xvdf"",
                            ""ebs_block_device.4023988449.encrypted"": ""false"",
                            ""ebs_block_device.4023988449.iops"": ""300"",
                            ""ebs_block_device.4023988449.snapshot_id"": """",
                            ""ebs_block_device.4023988449.volume_id"": ""vol-015467a2fec64cfdd"",
                            ""ebs_block_device.4023988449.volume_size"": ""100"",
                            ""ebs_block_device.4023988449.volume_type"": ""gp2"",
                            ""ebs_optimized"": ""false"",
                            ""ephemeral_block_device.#"": ""0"",
                            ""get_password_data"": ""false"",
                            ""iam_instance_profile"": """",
                            ""id"": ""i-022a9894321a6d374"",
                            ""instance_state"": ""running"",
                            ""instance_type"": ""t2.large"",
                            ""ipv6_addresses.#"": ""0"",
                            ""key_name"": ""pay_china"",
                            ""monitoring"": ""false"",
                            ""network_interface.#"": ""0"",
                            ""network_interface_id"": ""eni-fd55c3a4"",
                            ""placement_group"": """",
                            ""primary_network_interface_id"": ""eni-fd55c3a4"",
                            ""private_dns"": ""ip-192-168-14-135.cn-northwest-1.compute.internal"",
                            ""private_ip"": ""192.168.14.135"",
                            ""public_dns"": """",
                            ""public_ip"": """",
                            ""root_block_device.#"": ""1"",
                            ""root_block_device.0.delete_on_termination"": ""true"",
                            ""root_block_device.0.iops"": ""100"",
                            ""root_block_device.0.volume_id"": ""vol-0884c92d17ea04d83"",
                            ""root_block_device.0.volume_size"": ""20"",
                            ""root_block_device.0.volume_type"": ""gp2"",
                            ""security_groups.#"": ""0"",
                            ""source_dest_check"": ""true"",
                            ""subnet_id"": ""subnet-454c962c"",
                            ""tags.%"": ""9"",
                            ""tags.Decomission_Date"": ""never"",
                            ""tags.Environment"": ""chinapay"",
                            ""tags.Name"": ""docdb.pay.cn-northwest-1.test.bwtsi.cn"",
                            ""tags.Owner"": ""operations"",
                            ""tags.Purpose"": ""Riak instance"",
                            ""tags.Role"": ""docdb"",
                            ""tags.Stackname"": ""pay"",
                            ""tags.Started_By"": ""operations"",
                            ""tags.Warning"": ""Managed by terraform, do not edit"",
                            ""tenancy"": ""default"",
                            ""user_data"": ""f35050bdeefa2a2d9f354c0e699a5f2d7c393365"",
                            ""volume_tags.%"": ""0"",
                            ""vpc_security_group_ids.#"": ""1"",
                            ""vpc_security_group_ids.2301982502"": ""sg-9d5f28f4""
                        },
                        ""meta"": {
                            ""e2bfb730-ecaa-11e6-8f88-34363bc7c4c0"": {
                                ""create"": 600000000000,
                                ""delete"": 1200000000000,
                                ""update"": 600000000000
                            },
                            ""schema_version"": ""1""
                        },
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.aws""
                },
                ""data.template_file.cloud-init-riak"": {
                    ""type"": ""template_file"",
                    ""depends_on"": [],
                    ""primary"": {
                        ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                        ""attributes"": {
                            ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                            ""rendered"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo pay \u003e /etc/tradeshift/stackname\""\n - \""echo docdb-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 docdb-$INSTANCE_ID.cn-northwest-1.test.bwtsi.cn docdb-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac 'dr69ZUGVm0Ep1Eo/xBoOTcefuKVx' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = base.testing.bwtsi.cn\n     environment = chinapay\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""template"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo ${STACK_NAME} \u003e /etc/tradeshift/stackname\""\n - \""echo ${HOSTNAME}-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 ${HOSTNAME}-$INSTANCE_ID.${REGION_DNS} ${HOSTNAME}-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac '${DISK_ENCRYPTION_KEY}' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = ${CERT_NAME}\n     environment = ${ENVIRONMENT}\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""vars.%"": ""6"",
                            ""vars.CERT_NAME"": ""base.testing.bwtsi.cn"",
                            ""vars.DISK_ENCRYPTION_KEY"": ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx"",
                            ""vars.ENVIRONMENT"": ""chinapay"",
                            ""vars.HOSTNAME"": ""docdb"",
                            ""vars.REGION_DNS"": ""cn-northwest-1.test.bwtsi.cn"",
                            ""vars.STACK_NAME"": ""pay""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.template""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""environment-common""
            ],
            ""outputs"": {
                ""cert_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""base.testing.bwtsi.cn""
                },
                ""domain_name_search"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test.bwtsi.cn""
                },
                ""environment_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""chinapay""
                },
                ""environment_shortname"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                },
                ""security_group_name_postfix"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": "".chinapay""
                },
                ""site"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""global-common""
            ],
            ""outputs"": {
                ""all_cidr_eu_west_1"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16,172.25.128.0/21,172.25.120.0/21,172.25.112.0/21,172.31.248.0/21,172.31.240.0/21,172.21.0.0/19,172.19.0.0/19,172.22.0.0/19,172.18.0.0/19""
                },
                ""base_tradeshift_net_account_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""694518486591""
                },
                ""gcsops_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.17.22.143/32""
                },
                ""gcsops_cn_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""54.223.95.7/32,54.223.198.170/32,54.223.211.136/32,52.80.34.103/32""
                },
                ""office_ips"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,178.49.148.100/32,87.243.3.34/32,109.166.189.50/32,78.40.84.83/32,4.53.137.82/32,173.247.199.142/32,58.211.225.90/32,202.181.248.19/32,109.70.48.99/32""
                },
                ""prod_base_tradeshift_net_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""prod.base.tradeshift.net""
                },
                ""prod_base_tradeshift_net_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16""
                },
                ""prod_base_tradeshift_net_vpc_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""vpc-264c9042""
                },
                ""prod_ts_sv_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.50.175.210/32,52.30.44.136/32,52.50.189.21/32""
                },
                ""test_bwtsi_cn_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/19""
                },
                ""test_bwtsi_cn_vpc_private_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.12.0/22,192.168.16.0/22""
                },
                ""test_bwtsi_cn_vpc_public_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/22,192.168.4.0/22""
                },
                ""tradeshift_com_public_zone_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""Z2OX0I8SM94425""
                },
                ""translation_service_clients"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,4.53.137.82/32,173.247.199.142/32,130.185.137.106/32,202.181.248.19/32,52.17.87.187/32,52.30.44.136/32,52.30.58.232/32,52.31.203.95/32,52.49.119.80/32,52.49.49.111/32,52.49.5.171/32,52.50.108.6/32,52.50.175.210/32,52.50.189.21/32,52.50.255.154/32,52.50.91.189/32,54.195.199.108/32,54.78.39.106/32,58.211.225.90/32,89.150.143.118/32,54.222.150.122/32,54.222.194.56/32,109.70.48.99/32""
                },
                ""truebn_org_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""34.253.176.198/32,34.241.59.39/32""
                },
                ""userdata_path"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/modules/eff596488a3055adf7024741dffb9ca1/..""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""regional-common""
            ],
            ""outputs"": {
                ""availability_zones"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1a,cn-northwest-1b""
                },
                ""backend_region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""base_ami_1604"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-6ec1d50c""
                },
                ""base_ami_1604_zfs"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-edf8ec8f""
                },
                ""chinapay_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""key_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""pay_china""
                },
                ""region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""region_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""region_env"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        }
    ]
}

-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go] DEBUG: Response s3/PutObject Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 200 OK
Connection: close
Content-Length: 0
Date: Thu, 26 Apr 2018 11:00:39 GMT
Etag: ""807c608ab629b9b73914da058c923c20""
Server: AmazonS3
X-Amz-Id-2: 5Af+DuU/y0Ngtkb6wCq1R0Oz+ZrOYi4apbPsCZTSlwhSqnqBNB64rFL4HfBG6WB9GETdRmQyKnw=
X-Amz-Request-Id: 7984823D8787C039
X-Amz-Server-Side-Encryption: AES256


-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go]
2018/04/26 19:00:38 [DEBUG] plugin: waiting for all plugin processes to complete...

Error: Error applying plan:

1 error(s) occurred:

* module.docdb.aws_instance.riak: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d

2018-04-26T19:00:38.547+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:38 [ERR] plugin: plugin server: accept unix /var/folders/k0/hk5r4k696x901sk4mh_vwcg40000gn/T/plugin243311916: use of closed network connection
Terraform does not automatically rollback in the face of errors.
Instead, your Terraform state file has been partially updated with
any resources that successfully completed. Please address the error
above and apply again to incrementally change your infrastructure.


2018-04-26T19:00:38.550+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-template_v1.0.0_x4
2018-04-26T19:00:38.551+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-aws_v1.16.0_x4
2018-04-26T19:00:38.555+0800 [DEBUG] plugin: plugin process exited: path=/usr/local/bin/terraform-provider-alicloud

```
# Expected Behavior
can create aws instance in China AWS
# Actual Behavior
I can create aws instance in China AWS with provider.aws v1.15.0
but I can't create aws instance with provider.aws v1.16.0",a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d,https://github.com/hashicorp/terraform-provider-aws
36,4359,"# Terraform Version

Terraform v0.11.6
provider.aws v1.16.0

# Affected Resource(s)
aws_instance_ec2
# Terraform Configuration Files
module ""docdb"" {
  source = ""../../../../../../tradeshift-puppet/terraform/modules/aws/instances-cn/riak""
  environment = ""${var.pull_request}""
  stackname = ""${var.stackname}""
  role = ""docdb""
  owner = ""${var.owner}""
  decomission_date = ""${var.decomission_date}""
  instance_type = ""t2.large""
  instance_ami = ""${module.regional-common.base_ami_1604}""
  instance_key_name = ""${module.regional-common.key_name}""
  disable_api_termination = false
  ebs_volume_size = ""100""
  ebs_delete_on_termination = ""false""
  ebs_optimized = false
  vpc_security_groups = ""${data.terraform_remote_state.security_groups.stack_it_run_access_sg_id}""
  vpc_subnets = ""${data.terraform_remote_state.vpc.private_subnets}""
  postfix = "".${var.stackname}""
  dns_region_name = ""${module.regional-common.region_dns}""
  disk_encryption_key = ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx""
  count = ""1""
  cert_name = ""${module.environment-common.cert_name}""
}

# Debug Output
```
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 200 OK
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: text/xml;charset=UTF-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:36 GMT
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Vary: Accept-Encoding
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <DescribeInstanceAttributeResponse xmlns=""http://ec2.amazonaws.com/doc/2016-11-15/"">
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <requestId>35e6cd4e-cb70-4016-a250-53f0880cc9be</requestId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <instanceId>i-022a9894321a6d374</instanceId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:         <value>I2Nsb3VkLWNvbmZpZwptb3VudHM6CiAtIFtlcGhlbWVyYWwwLCBudWxsXQoKcHJlc2VydmVfaG9zdG5hbWU6IHRydWUKbWFuYWdlX2V0Y19ob3N0czogZmFsc2UKCmJvb3RjbWQ6CiAtICJlY2hvIHBheSA+IC9ldGMvdHJhZGVzaGlmdC9zdGFja25hbWUiCiAtICJlY2hvIGRvY2RiLSRJTlNUQU5DRV9JRCA+IC9ldGMvaG9zdG5hbWU7IGhvc3RuYW1lIC1GIC9ldGMvaG9zdG5hbWUiCiAtICJzZWQgLWkgLWUgJy9eMTI3LjAuMC4xL2QnIC9ldGMvaG9zdHM7IGVjaG8gMTI3LjAuMC4xIGRvY2RiLSRJTlNUQU5DRV9JRC5jbi1ub3J0aHdlc3QtMS50ZXN0LmJ3dHNpLmNuIGRvY2RiLSRJTlNUQU5DRV9JRCBsb2NhbGhvc3QgPj4gL2V0Yy9ob3N0cyIKICMgRGlzayBlbmNyeXB0aW9uIGtleSBmb3IgZXBoZW1lcmFsIGRpc2sgZHJpdmVzLCBzYXZlZCB0byByYW0gZHJpdmUKICMgVGhlIHNlZCBwYXJ0IHJlbW92ZXMgdGhlIChzdGRpbik9IG91dHB1dCBmcm9tIG9wZW5zc2wgZGdzdAogLSAiZWNobyAkSU5TVEFOQ0VfSUQgfCBvcGVuc3NsIGRnc3QgLXNoYTI1NiAtaG1hYyAnZHI2OVpVR1ZtMEVwMUVvL3hCb09UY2VmdUtWeCcgfCBzZWQgJ3MvXi4qPSAvLycgPiAvZGV2L3NobS9lbmNyeXB0ZWQtZGlzay5sdWtzLmtleSAmJiBjaG1vZCA0MDAgL2Rldi9zaG0vZW5jcnlwdGVkLWRpc2subHVrcy5rZXkiCgojIERvbid0IG92ZXJyaWRlIG91ciBhcHQgcmVwb3NpdG9yeSBsaXN0IG9uIGZpcnN0IGJvb3QKYXB0X3ByZXNlcnZlX3NvdXJjZXNfbGlzdDogdHJ1ZQoKIyBEb24ndCBwcmludCB0aGUgbmV3IHNzaCBrZXlzIG9uIHRoZSBjb25zb2xlCm5vX3NzaF9maW5nZXJwcmludHM6IHRydWUKCndyaXRlX2ZpbGVzOgogLSBwYXRoOiAvZXRjL3B1cHBldGxhYnMvcHVwcGV0L3B1cHBldC5jb25mCiAgIG93bmVyOiByb290OnJvb3QKICAgcGVybWlzc2lvbnM6ICcwNDQ0JwogICBjb250ZW50OiB8CiAgICAgW21haW5dCiAgICAgY2VydG5hbWUgPSBiYXNlLnRlc3RpbmcuYnd0c2kuY24KICAgICBlbnZpcm9ubWVudCA9IGNoaW5hcGF5CiAgICAgW2FnZW50XQogICAgIHJ1bmludGVydmFsID0gMTAweQogICAgIHNlcnZlciA9IHB1cHBldC5id3RzaS5jbgogICAgIG5vZGVfbmFtZSA9IGZhY3RlcgogICAgIG5vZGVfbmFtZV9mYWN0ID0gZnFkbgogICAgIHNwbGF5ID0gdHJ1ZQogICAgIHNwbGF5bGltaXQgPSA1bQo=</value>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     </userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: </DescribeInstanceAttributeResponse>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] DEBUG: Request ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ REQUEST POST-SIGN ]-----------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: POST / HTTP/1.1
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Host: ec2.cn-northwest-1.amazonaws.com.cn
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: User-Agent: aws-sdk-go/1.13.32 (go1.9.2; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.7
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Length: 95
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/ec2/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-security-token, Signature=60ac431f06b221bf7fe6d53ee72de1babb1aad5a5a4d17917e4d2f78a7533fef
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: application/x-www-form-urlencoded; charset=utf-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Date: 20180426T110036Z
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Accept-Encoding: gzip
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Action=DescribeInstanceCreditSpecifications&InstanceId.1=i-022a9894321a6d374&Version=2016-11-15
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Response ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 400 Bad Request
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:37 GMT
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <Response><Errors><Error><Code>UnsupportedOperation</Code><Message>The functionality you requested is not available in this region.</Message></Error></Errors><RequestID>53ace3cc-2597-49a0-99b2-3b9f1cb8567d</RequestID></Response>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Validate Response ec2/DescribeInstanceCreditSpecifications failed, not retrying, error UnsupportedOperation: The functionality you requested is not available in this region.
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalApplyPost, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalSequence, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [DEBUG] Uploading remote state to S3: {
  Body: buffer(0xc4203e17d0),
  Bucket: ""bwts-terraform-bucket-chinapay"",
  ContentLength: 20792,
  ContentType: ""application/json"",
  Key: ""cn-northwest-1/riak/terraform.tfstate"",
  ServerSideEncryption: ""AES256""
}
2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Request s3/PutObject Details:
---[ REQUEST POST-SIGN ]-----------------------------
PUT /cn-northwest-1/riak/terraform.tfstate HTTP/1.1
Host: bwts-terraform-bucket-chinapay.s3.cn-northwest-1.amazonaws.com.cn
User-Agent: aws-sdk-go/1.12.75 (go1.10.1; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.6
Content-Length: 20792
Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/s3/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-content-sha256;x-amz-date;x-amz-security-token;x-amz-server-side-encryption, Signature=8aa16110ae06a99b503e1f0546a4d6cf208fdf658ca29420baa2d649cec043e2
Content-Type: application/json
X-Amz-Content-Sha256: 04110e3e4cd97aa3e89cfe2f03487922bfd6b6346ec6dfe3fbe8fad9755e18c2
X-Amz-Date: 20180426T110037Z
X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
X-Amz-Server-Side-Encryption: AES256
Accept-Encoding: gzip

{
    ""version"": 3,
    ""terraform_version"": ""0.11.6"",
    ""serial"": 1,
    ""lineage"": ""b9c3c084-789e-7472-0b18-8698b4afc854"",
    ""modules"": [
        {
            ""path"": [
                ""root""
            ],
            ""outputs"": {},
            ""resources"": {
                ""data.terraform_remote_state.security_groups"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""bastion_host"": ""sg-e29feb8b"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/dev-stack-sgs/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""external_lb_sg_id"": ""sg-a55027cc"",
                            ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                            ""rundeck"": ""sg-b39eeada"",
                            ""stack_it_run_access_sg_id"": ""sg-9d5f28f4"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                },
                ""data.terraform_remote_state.vpc"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/vpc/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                            ""private_subnets"": ""subnet-454c962c,subnet-9722ddec"",
                            ""public_subnets"": ""subnet-5e4d9737,subnet-9022ddeb"",
                            ""vpc_cidr"": ""192.168.0.0/19"",
                            ""vpc_id"": ""vpc-34c61f5d"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""docdb""
            ],
            ""outputs"": {},
            ""resources"": {
                ""aws_instance.riak"": {
                    ""type"": ""aws_instance"",
                    ""depends_on"": [
                        ""data.template_file.cloud-init-riak""
                    ],
                    ""primary"": {
                        ""id"": ""i-022a9894321a6d374"",
                        ""attributes"": {
                            ""ami"": ""ami-6ec1d50c"",
                            ""associate_public_ip_address"": ""false"",
                            ""availability_zone"": ""cn-northwest-1a"",
                            ""disable_api_termination"": ""false"",
                            ""ebs_block_device.#"": ""4"",
                            ""ebs_block_device.3965576335.delete_on_termination"": ""false"",
                            ""ebs_block_device.3965576335.device_name"": ""/dev/xvdd"",
                            ""ebs_block_device.3965576335.encrypted"": ""false"",
                            ""ebs_block_device.3965576335.iops"": ""300"",
                            ""ebs_block_device.3965576335.snapshot_id"": """",
                            ""ebs_block_device.3965576335.volume_id"": ""vol-09cde364159031c5d"",
                            ""ebs_block_device.3965576335.volume_size"": ""100"",
                            ""ebs_block_device.3965576335.volume_type"": ""gp2"",
                            ""ebs_block_device.3986656952.delete_on_termination"": ""false"",
                            ""ebs_block_device.3986656952.device_name"": ""/dev/xvde"",
                            ""ebs_block_device.3986656952.encrypted"": ""false"",
                            ""ebs_block_device.3986656952.iops"": ""300"",
                            ""ebs_block_device.3986656952.snapshot_id"": """",
                            ""ebs_block_device.3986656952.volume_id"": ""vol-09c14e768bdd6dd4b"",
                            ""ebs_block_device.3986656952.volume_size"": ""100"",
                            ""ebs_block_device.3986656952.volume_type"": ""gp2"",
                            ""ebs_block_device.3994770134.delete_on_termination"": ""false"",
                            ""ebs_block_device.3994770134.device_name"": ""/dev/xvdg"",
                            ""ebs_block_device.3994770134.encrypted"": ""false"",
                            ""ebs_block_device.3994770134.iops"": ""300"",
                            ""ebs_block_device.3994770134.snapshot_id"": """",
                            ""ebs_block_device.3994770134.volume_id"": ""vol-0e1b3ff63114f3003"",
                            ""ebs_block_device.3994770134.volume_size"": ""100"",
                            ""ebs_block_device.3994770134.volume_type"": ""gp2"",
                            ""ebs_block_device.4023988449.delete_on_termination"": ""false"",
                            ""ebs_block_device.4023988449.device_name"": ""/dev/xvdf"",
                            ""ebs_block_device.4023988449.encrypted"": ""false"",
                            ""ebs_block_device.4023988449.iops"": ""300"",
                            ""ebs_block_device.4023988449.snapshot_id"": """",
                            ""ebs_block_device.4023988449.volume_id"": ""vol-015467a2fec64cfdd"",
                            ""ebs_block_device.4023988449.volume_size"": ""100"",
                            ""ebs_block_device.4023988449.volume_type"": ""gp2"",
                            ""ebs_optimized"": ""false"",
                            ""ephemeral_block_device.#"": ""0"",
                            ""get_password_data"": ""false"",
                            ""iam_instance_profile"": """",
                            ""id"": ""i-022a9894321a6d374"",
                            ""instance_state"": ""running"",
                            ""instance_type"": ""t2.large"",
                            ""ipv6_addresses.#"": ""0"",
                            ""key_name"": ""pay_china"",
                            ""monitoring"": ""false"",
                            ""network_interface.#"": ""0"",
                            ""network_interface_id"": ""eni-fd55c3a4"",
                            ""placement_group"": """",
                            ""primary_network_interface_id"": ""eni-fd55c3a4"",
                            ""private_dns"": ""ip-192-168-14-135.cn-northwest-1.compute.internal"",
                            ""private_ip"": ""192.168.14.135"",
                            ""public_dns"": """",
                            ""public_ip"": """",
                            ""root_block_device.#"": ""1"",
                            ""root_block_device.0.delete_on_termination"": ""true"",
                            ""root_block_device.0.iops"": ""100"",
                            ""root_block_device.0.volume_id"": ""vol-0884c92d17ea04d83"",
                            ""root_block_device.0.volume_size"": ""20"",
                            ""root_block_device.0.volume_type"": ""gp2"",
                            ""security_groups.#"": ""0"",
                            ""source_dest_check"": ""true"",
                            ""subnet_id"": ""subnet-454c962c"",
                            ""tags.%"": ""9"",
                            ""tags.Decomission_Date"": ""never"",
                            ""tags.Environment"": ""chinapay"",
                            ""tags.Name"": ""docdb.pay.cn-northwest-1.test.bwtsi.cn"",
                            ""tags.Owner"": ""operations"",
                            ""tags.Purpose"": ""Riak instance"",
                            ""tags.Role"": ""docdb"",
                            ""tags.Stackname"": ""pay"",
                            ""tags.Started_By"": ""operations"",
                            ""tags.Warning"": ""Managed by terraform, do not edit"",
                            ""tenancy"": ""default"",
                            ""user_data"": ""f35050bdeefa2a2d9f354c0e699a5f2d7c393365"",
                            ""volume_tags.%"": ""0"",
                            ""vpc_security_group_ids.#"": ""1"",
                            ""vpc_security_group_ids.2301982502"": ""sg-9d5f28f4""
                        },
                        ""meta"": {
                            ""e2bfb730-ecaa-11e6-8f88-34363bc7c4c0"": {
                                ""create"": 600000000000,
                                ""delete"": 1200000000000,
                                ""update"": 600000000000
                            },
                            ""schema_version"": ""1""
                        },
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.aws""
                },
                ""data.template_file.cloud-init-riak"": {
                    ""type"": ""template_file"",
                    ""depends_on"": [],
                    ""primary"": {
                        ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                        ""attributes"": {
                            ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                            ""rendered"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo pay \u003e /etc/tradeshift/stackname\""\n - \""echo docdb-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 docdb-$INSTANCE_ID.cn-northwest-1.test.bwtsi.cn docdb-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac 'dr69ZUGVm0Ep1Eo/xBoOTcefuKVx' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = base.testing.bwtsi.cn\n     environment = chinapay\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""template"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo ${STACK_NAME} \u003e /etc/tradeshift/stackname\""\n - \""echo ${HOSTNAME}-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 ${HOSTNAME}-$INSTANCE_ID.${REGION_DNS} ${HOSTNAME}-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac '${DISK_ENCRYPTION_KEY}' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = ${CERT_NAME}\n     environment = ${ENVIRONMENT}\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""vars.%"": ""6"",
                            ""vars.CERT_NAME"": ""base.testing.bwtsi.cn"",
                            ""vars.DISK_ENCRYPTION_KEY"": ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx"",
                            ""vars.ENVIRONMENT"": ""chinapay"",
                            ""vars.HOSTNAME"": ""docdb"",
                            ""vars.REGION_DNS"": ""cn-northwest-1.test.bwtsi.cn"",
                            ""vars.STACK_NAME"": ""pay""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.template""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""environment-common""
            ],
            ""outputs"": {
                ""cert_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""base.testing.bwtsi.cn""
                },
                ""domain_name_search"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test.bwtsi.cn""
                },
                ""environment_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""chinapay""
                },
                ""environment_shortname"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                },
                ""security_group_name_postfix"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": "".chinapay""
                },
                ""site"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""global-common""
            ],
            ""outputs"": {
                ""all_cidr_eu_west_1"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16,172.25.128.0/21,172.25.120.0/21,172.25.112.0/21,172.31.248.0/21,172.31.240.0/21,172.21.0.0/19,172.19.0.0/19,172.22.0.0/19,172.18.0.0/19""
                },
                ""base_tradeshift_net_account_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""694518486591""
                },
                ""gcsops_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.17.22.143/32""
                },
                ""gcsops_cn_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""54.223.95.7/32,54.223.198.170/32,54.223.211.136/32,52.80.34.103/32""
                },
                ""office_ips"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,178.49.148.100/32,87.243.3.34/32,109.166.189.50/32,78.40.84.83/32,4.53.137.82/32,173.247.199.142/32,58.211.225.90/32,202.181.248.19/32,109.70.48.99/32""
                },
                ""prod_base_tradeshift_net_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""prod.base.tradeshift.net""
                },
                ""prod_base_tradeshift_net_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16""
                },
                ""prod_base_tradeshift_net_vpc_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""vpc-264c9042""
                },
                ""prod_ts_sv_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.50.175.210/32,52.30.44.136/32,52.50.189.21/32""
                },
                ""test_bwtsi_cn_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/19""
                },
                ""test_bwtsi_cn_vpc_private_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.12.0/22,192.168.16.0/22""
                },
                ""test_bwtsi_cn_vpc_public_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/22,192.168.4.0/22""
                },
                ""tradeshift_com_public_zone_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""Z2OX0I8SM94425""
                },
                ""translation_service_clients"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,4.53.137.82/32,173.247.199.142/32,130.185.137.106/32,202.181.248.19/32,52.17.87.187/32,52.30.44.136/32,52.30.58.232/32,52.31.203.95/32,52.49.119.80/32,52.49.49.111/32,52.49.5.171/32,52.50.108.6/32,52.50.175.210/32,52.50.189.21/32,52.50.255.154/32,52.50.91.189/32,54.195.199.108/32,54.78.39.106/32,58.211.225.90/32,89.150.143.118/32,54.222.150.122/32,54.222.194.56/32,109.70.48.99/32""
                },
                ""truebn_org_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""34.253.176.198/32,34.241.59.39/32""
                },
                ""userdata_path"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/modules/eff596488a3055adf7024741dffb9ca1/..""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""regional-common""
            ],
            ""outputs"": {
                ""availability_zones"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1a,cn-northwest-1b""
                },
                ""backend_region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""base_ami_1604"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-6ec1d50c""
                },
                ""base_ami_1604_zfs"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-edf8ec8f""
                },
                ""chinapay_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""key_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""pay_china""
                },
                ""region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""region_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""region_env"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        }
    ]
}

-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go] DEBUG: Response s3/PutObject Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 200 OK
Connection: close
Content-Length: 0
Date: Thu, 26 Apr 2018 11:00:39 GMT
Etag: ""807c608ab629b9b73914da058c923c20""
Server: AmazonS3
X-Amz-Id-2: 5Af+DuU/y0Ngtkb6wCq1R0Oz+ZrOYi4apbPsCZTSlwhSqnqBNB64rFL4HfBG6WB9GETdRmQyKnw=
X-Amz-Request-Id: 7984823D8787C039
X-Amz-Server-Side-Encryption: AES256


-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go]
2018/04/26 19:00:38 [DEBUG] plugin: waiting for all plugin processes to complete...

Error: Error applying plan:

1 error(s) occurred:

* module.docdb.aws_instance.riak: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d

2018-04-26T19:00:38.547+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:38 [ERR] plugin: plugin server: accept unix /var/folders/k0/hk5r4k696x901sk4mh_vwcg40000gn/T/plugin243311916: use of closed network connection
Terraform does not automatically rollback in the face of errors.
Instead, your Terraform state file has been partially updated with
any resources that successfully completed. Please address the error
above and apply again to incrementally change your infrastructure.


2018-04-26T19:00:38.550+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-template_v1.0.0_x4
2018-04-26T19:00:38.551+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-aws_v1.16.0_x4
2018-04-26T19:00:38.555+0800 [DEBUG] plugin: plugin process exited: path=/usr/local/bin/terraform-provider-alicloud

```
# Expected Behavior
can create aws instance in China AWS
# Actual Behavior
I can create aws instance in China AWS with provider.aws v1.15.0
but I can't create aws instance with provider.aws v1.16.0",8aa16110ae06a99b503e1f0546a4d6cf208fdf658ca29420baa2d649cec043e2,https://github.com/hashicorp/terraform-provider-aws
37,4359,"# Terraform Version

Terraform v0.11.6
provider.aws v1.16.0

# Affected Resource(s)
aws_instance_ec2
# Terraform Configuration Files
module ""docdb"" {
  source = ""../../../../../../tradeshift-puppet/terraform/modules/aws/instances-cn/riak""
  environment = ""${var.pull_request}""
  stackname = ""${var.stackname}""
  role = ""docdb""
  owner = ""${var.owner}""
  decomission_date = ""${var.decomission_date}""
  instance_type = ""t2.large""
  instance_ami = ""${module.regional-common.base_ami_1604}""
  instance_key_name = ""${module.regional-common.key_name}""
  disable_api_termination = false
  ebs_volume_size = ""100""
  ebs_delete_on_termination = ""false""
  ebs_optimized = false
  vpc_security_groups = ""${data.terraform_remote_state.security_groups.stack_it_run_access_sg_id}""
  vpc_subnets = ""${data.terraform_remote_state.vpc.private_subnets}""
  postfix = "".${var.stackname}""
  dns_region_name = ""${module.regional-common.region_dns}""
  disk_encryption_key = ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx""
  count = ""1""
  cert_name = ""${module.environment-common.cert_name}""
}

# Debug Output
```
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 200 OK
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: text/xml;charset=UTF-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:36 GMT
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Vary: Accept-Encoding
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <DescribeInstanceAttributeResponse xmlns=""http://ec2.amazonaws.com/doc/2016-11-15/"">
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <requestId>35e6cd4e-cb70-4016-a250-53f0880cc9be</requestId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <instanceId>i-022a9894321a6d374</instanceId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:         <value>I2Nsb3VkLWNvbmZpZwptb3VudHM6CiAtIFtlcGhlbWVyYWwwLCBudWxsXQoKcHJlc2VydmVfaG9zdG5hbWU6IHRydWUKbWFuYWdlX2V0Y19ob3N0czogZmFsc2UKCmJvb3RjbWQ6CiAtICJlY2hvIHBheSA+IC9ldGMvdHJhZGVzaGlmdC9zdGFja25hbWUiCiAtICJlY2hvIGRvY2RiLSRJTlNUQU5DRV9JRCA+IC9ldGMvaG9zdG5hbWU7IGhvc3RuYW1lIC1GIC9ldGMvaG9zdG5hbWUiCiAtICJzZWQgLWkgLWUgJy9eMTI3LjAuMC4xL2QnIC9ldGMvaG9zdHM7IGVjaG8gMTI3LjAuMC4xIGRvY2RiLSRJTlNUQU5DRV9JRC5jbi1ub3J0aHdlc3QtMS50ZXN0LmJ3dHNpLmNuIGRvY2RiLSRJTlNUQU5DRV9JRCBsb2NhbGhvc3QgPj4gL2V0Yy9ob3N0cyIKICMgRGlzayBlbmNyeXB0aW9uIGtleSBmb3IgZXBoZW1lcmFsIGRpc2sgZHJpdmVzLCBzYXZlZCB0byByYW0gZHJpdmUKICMgVGhlIHNlZCBwYXJ0IHJlbW92ZXMgdGhlIChzdGRpbik9IG91dHB1dCBmcm9tIG9wZW5zc2wgZGdzdAogLSAiZWNobyAkSU5TVEFOQ0VfSUQgfCBvcGVuc3NsIGRnc3QgLXNoYTI1NiAtaG1hYyAnZHI2OVpVR1ZtMEVwMUVvL3hCb09UY2VmdUtWeCcgfCBzZWQgJ3MvXi4qPSAvLycgPiAvZGV2L3NobS9lbmNyeXB0ZWQtZGlzay5sdWtzLmtleSAmJiBjaG1vZCA0MDAgL2Rldi9zaG0vZW5jcnlwdGVkLWRpc2subHVrcy5rZXkiCgojIERvbid0IG92ZXJyaWRlIG91ciBhcHQgcmVwb3NpdG9yeSBsaXN0IG9uIGZpcnN0IGJvb3QKYXB0X3ByZXNlcnZlX3NvdXJjZXNfbGlzdDogdHJ1ZQoKIyBEb24ndCBwcmludCB0aGUgbmV3IHNzaCBrZXlzIG9uIHRoZSBjb25zb2xlCm5vX3NzaF9maW5nZXJwcmludHM6IHRydWUKCndyaXRlX2ZpbGVzOgogLSBwYXRoOiAvZXRjL3B1cHBldGxhYnMvcHVwcGV0L3B1cHBldC5jb25mCiAgIG93bmVyOiByb290OnJvb3QKICAgcGVybWlzc2lvbnM6ICcwNDQ0JwogICBjb250ZW50OiB8CiAgICAgW21haW5dCiAgICAgY2VydG5hbWUgPSBiYXNlLnRlc3RpbmcuYnd0c2kuY24KICAgICBlbnZpcm9ubWVudCA9IGNoaW5hcGF5CiAgICAgW2FnZW50XQogICAgIHJ1bmludGVydmFsID0gMTAweQogICAgIHNlcnZlciA9IHB1cHBldC5id3RzaS5jbgogICAgIG5vZGVfbmFtZSA9IGZhY3RlcgogICAgIG5vZGVfbmFtZV9mYWN0ID0gZnFkbgogICAgIHNwbGF5ID0gdHJ1ZQogICAgIHNwbGF5bGltaXQgPSA1bQo=</value>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     </userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: </DescribeInstanceAttributeResponse>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] DEBUG: Request ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ REQUEST POST-SIGN ]-----------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: POST / HTTP/1.1
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Host: ec2.cn-northwest-1.amazonaws.com.cn
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: User-Agent: aws-sdk-go/1.13.32 (go1.9.2; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.7
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Length: 95
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/ec2/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-security-token, Signature=60ac431f06b221bf7fe6d53ee72de1babb1aad5a5a4d17917e4d2f78a7533fef
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: application/x-www-form-urlencoded; charset=utf-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Date: 20180426T110036Z
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Accept-Encoding: gzip
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Action=DescribeInstanceCreditSpecifications&InstanceId.1=i-022a9894321a6d374&Version=2016-11-15
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Response ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 400 Bad Request
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:37 GMT
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <Response><Errors><Error><Code>UnsupportedOperation</Code><Message>The functionality you requested is not available in this region.</Message></Error></Errors><RequestID>53ace3cc-2597-49a0-99b2-3b9f1cb8567d</RequestID></Response>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Validate Response ec2/DescribeInstanceCreditSpecifications failed, not retrying, error UnsupportedOperation: The functionality you requested is not available in this region.
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalApplyPost, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalSequence, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [DEBUG] Uploading remote state to S3: {
  Body: buffer(0xc4203e17d0),
  Bucket: ""bwts-terraform-bucket-chinapay"",
  ContentLength: 20792,
  ContentType: ""application/json"",
  Key: ""cn-northwest-1/riak/terraform.tfstate"",
  ServerSideEncryption: ""AES256""
}
2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Request s3/PutObject Details:
---[ REQUEST POST-SIGN ]-----------------------------
PUT /cn-northwest-1/riak/terraform.tfstate HTTP/1.1
Host: bwts-terraform-bucket-chinapay.s3.cn-northwest-1.amazonaws.com.cn
User-Agent: aws-sdk-go/1.12.75 (go1.10.1; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.6
Content-Length: 20792
Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/s3/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-content-sha256;x-amz-date;x-amz-security-token;x-amz-server-side-encryption, Signature=8aa16110ae06a99b503e1f0546a4d6cf208fdf658ca29420baa2d649cec043e2
Content-Type: application/json
X-Amz-Content-Sha256: 04110e3e4cd97aa3e89cfe2f03487922bfd6b6346ec6dfe3fbe8fad9755e18c2
X-Amz-Date: 20180426T110037Z
X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
X-Amz-Server-Side-Encryption: AES256
Accept-Encoding: gzip

{
    ""version"": 3,
    ""terraform_version"": ""0.11.6"",
    ""serial"": 1,
    ""lineage"": ""b9c3c084-789e-7472-0b18-8698b4afc854"",
    ""modules"": [
        {
            ""path"": [
                ""root""
            ],
            ""outputs"": {},
            ""resources"": {
                ""data.terraform_remote_state.security_groups"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""bastion_host"": ""sg-e29feb8b"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/dev-stack-sgs/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""external_lb_sg_id"": ""sg-a55027cc"",
                            ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                            ""rundeck"": ""sg-b39eeada"",
                            ""stack_it_run_access_sg_id"": ""sg-9d5f28f4"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                },
                ""data.terraform_remote_state.vpc"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/vpc/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                            ""private_subnets"": ""subnet-454c962c,subnet-9722ddec"",
                            ""public_subnets"": ""subnet-5e4d9737,subnet-9022ddeb"",
                            ""vpc_cidr"": ""192.168.0.0/19"",
                            ""vpc_id"": ""vpc-34c61f5d"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""docdb""
            ],
            ""outputs"": {},
            ""resources"": {
                ""aws_instance.riak"": {
                    ""type"": ""aws_instance"",
                    ""depends_on"": [
                        ""data.template_file.cloud-init-riak""
                    ],
                    ""primary"": {
                        ""id"": ""i-022a9894321a6d374"",
                        ""attributes"": {
                            ""ami"": ""ami-6ec1d50c"",
                            ""associate_public_ip_address"": ""false"",
                            ""availability_zone"": ""cn-northwest-1a"",
                            ""disable_api_termination"": ""false"",
                            ""ebs_block_device.#"": ""4"",
                            ""ebs_block_device.3965576335.delete_on_termination"": ""false"",
                            ""ebs_block_device.3965576335.device_name"": ""/dev/xvdd"",
                            ""ebs_block_device.3965576335.encrypted"": ""false"",
                            ""ebs_block_device.3965576335.iops"": ""300"",
                            ""ebs_block_device.3965576335.snapshot_id"": """",
                            ""ebs_block_device.3965576335.volume_id"": ""vol-09cde364159031c5d"",
                            ""ebs_block_device.3965576335.volume_size"": ""100"",
                            ""ebs_block_device.3965576335.volume_type"": ""gp2"",
                            ""ebs_block_device.3986656952.delete_on_termination"": ""false"",
                            ""ebs_block_device.3986656952.device_name"": ""/dev/xvde"",
                            ""ebs_block_device.3986656952.encrypted"": ""false"",
                            ""ebs_block_device.3986656952.iops"": ""300"",
                            ""ebs_block_device.3986656952.snapshot_id"": """",
                            ""ebs_block_device.3986656952.volume_id"": ""vol-09c14e768bdd6dd4b"",
                            ""ebs_block_device.3986656952.volume_size"": ""100"",
                            ""ebs_block_device.3986656952.volume_type"": ""gp2"",
                            ""ebs_block_device.3994770134.delete_on_termination"": ""false"",
                            ""ebs_block_device.3994770134.device_name"": ""/dev/xvdg"",
                            ""ebs_block_device.3994770134.encrypted"": ""false"",
                            ""ebs_block_device.3994770134.iops"": ""300"",
                            ""ebs_block_device.3994770134.snapshot_id"": """",
                            ""ebs_block_device.3994770134.volume_id"": ""vol-0e1b3ff63114f3003"",
                            ""ebs_block_device.3994770134.volume_size"": ""100"",
                            ""ebs_block_device.3994770134.volume_type"": ""gp2"",
                            ""ebs_block_device.4023988449.delete_on_termination"": ""false"",
                            ""ebs_block_device.4023988449.device_name"": ""/dev/xvdf"",
                            ""ebs_block_device.4023988449.encrypted"": ""false"",
                            ""ebs_block_device.4023988449.iops"": ""300"",
                            ""ebs_block_device.4023988449.snapshot_id"": """",
                            ""ebs_block_device.4023988449.volume_id"": ""vol-015467a2fec64cfdd"",
                            ""ebs_block_device.4023988449.volume_size"": ""100"",
                            ""ebs_block_device.4023988449.volume_type"": ""gp2"",
                            ""ebs_optimized"": ""false"",
                            ""ephemeral_block_device.#"": ""0"",
                            ""get_password_data"": ""false"",
                            ""iam_instance_profile"": """",
                            ""id"": ""i-022a9894321a6d374"",
                            ""instance_state"": ""running"",
                            ""instance_type"": ""t2.large"",
                            ""ipv6_addresses.#"": ""0"",
                            ""key_name"": ""pay_china"",
                            ""monitoring"": ""false"",
                            ""network_interface.#"": ""0"",
                            ""network_interface_id"": ""eni-fd55c3a4"",
                            ""placement_group"": """",
                            ""primary_network_interface_id"": ""eni-fd55c3a4"",
                            ""private_dns"": ""ip-192-168-14-135.cn-northwest-1.compute.internal"",
                            ""private_ip"": ""192.168.14.135"",
                            ""public_dns"": """",
                            ""public_ip"": """",
                            ""root_block_device.#"": ""1"",
                            ""root_block_device.0.delete_on_termination"": ""true"",
                            ""root_block_device.0.iops"": ""100"",
                            ""root_block_device.0.volume_id"": ""vol-0884c92d17ea04d83"",
                            ""root_block_device.0.volume_size"": ""20"",
                            ""root_block_device.0.volume_type"": ""gp2"",
                            ""security_groups.#"": ""0"",
                            ""source_dest_check"": ""true"",
                            ""subnet_id"": ""subnet-454c962c"",
                            ""tags.%"": ""9"",
                            ""tags.Decomission_Date"": ""never"",
                            ""tags.Environment"": ""chinapay"",
                            ""tags.Name"": ""docdb.pay.cn-northwest-1.test.bwtsi.cn"",
                            ""tags.Owner"": ""operations"",
                            ""tags.Purpose"": ""Riak instance"",
                            ""tags.Role"": ""docdb"",
                            ""tags.Stackname"": ""pay"",
                            ""tags.Started_By"": ""operations"",
                            ""tags.Warning"": ""Managed by terraform, do not edit"",
                            ""tenancy"": ""default"",
                            ""user_data"": ""f35050bdeefa2a2d9f354c0e699a5f2d7c393365"",
                            ""volume_tags.%"": ""0"",
                            ""vpc_security_group_ids.#"": ""1"",
                            ""vpc_security_group_ids.2301982502"": ""sg-9d5f28f4""
                        },
                        ""meta"": {
                            ""e2bfb730-ecaa-11e6-8f88-34363bc7c4c0"": {
                                ""create"": 600000000000,
                                ""delete"": 1200000000000,
                                ""update"": 600000000000
                            },
                            ""schema_version"": ""1""
                        },
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.aws""
                },
                ""data.template_file.cloud-init-riak"": {
                    ""type"": ""template_file"",
                    ""depends_on"": [],
                    ""primary"": {
                        ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                        ""attributes"": {
                            ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                            ""rendered"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo pay \u003e /etc/tradeshift/stackname\""\n - \""echo docdb-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 docdb-$INSTANCE_ID.cn-northwest-1.test.bwtsi.cn docdb-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac 'dr69ZUGVm0Ep1Eo/xBoOTcefuKVx' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = base.testing.bwtsi.cn\n     environment = chinapay\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""template"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo ${STACK_NAME} \u003e /etc/tradeshift/stackname\""\n - \""echo ${HOSTNAME}-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 ${HOSTNAME}-$INSTANCE_ID.${REGION_DNS} ${HOSTNAME}-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac '${DISK_ENCRYPTION_KEY}' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = ${CERT_NAME}\n     environment = ${ENVIRONMENT}\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""vars.%"": ""6"",
                            ""vars.CERT_NAME"": ""base.testing.bwtsi.cn"",
                            ""vars.DISK_ENCRYPTION_KEY"": ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx"",
                            ""vars.ENVIRONMENT"": ""chinapay"",
                            ""vars.HOSTNAME"": ""docdb"",
                            ""vars.REGION_DNS"": ""cn-northwest-1.test.bwtsi.cn"",
                            ""vars.STACK_NAME"": ""pay""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.template""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""environment-common""
            ],
            ""outputs"": {
                ""cert_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""base.testing.bwtsi.cn""
                },
                ""domain_name_search"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test.bwtsi.cn""
                },
                ""environment_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""chinapay""
                },
                ""environment_shortname"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                },
                ""security_group_name_postfix"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": "".chinapay""
                },
                ""site"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""global-common""
            ],
            ""outputs"": {
                ""all_cidr_eu_west_1"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16,172.25.128.0/21,172.25.120.0/21,172.25.112.0/21,172.31.248.0/21,172.31.240.0/21,172.21.0.0/19,172.19.0.0/19,172.22.0.0/19,172.18.0.0/19""
                },
                ""base_tradeshift_net_account_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""694518486591""
                },
                ""gcsops_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.17.22.143/32""
                },
                ""gcsops_cn_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""54.223.95.7/32,54.223.198.170/32,54.223.211.136/32,52.80.34.103/32""
                },
                ""office_ips"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,178.49.148.100/32,87.243.3.34/32,109.166.189.50/32,78.40.84.83/32,4.53.137.82/32,173.247.199.142/32,58.211.225.90/32,202.181.248.19/32,109.70.48.99/32""
                },
                ""prod_base_tradeshift_net_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""prod.base.tradeshift.net""
                },
                ""prod_base_tradeshift_net_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16""
                },
                ""prod_base_tradeshift_net_vpc_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""vpc-264c9042""
                },
                ""prod_ts_sv_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.50.175.210/32,52.30.44.136/32,52.50.189.21/32""
                },
                ""test_bwtsi_cn_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/19""
                },
                ""test_bwtsi_cn_vpc_private_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.12.0/22,192.168.16.0/22""
                },
                ""test_bwtsi_cn_vpc_public_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/22,192.168.4.0/22""
                },
                ""tradeshift_com_public_zone_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""Z2OX0I8SM94425""
                },
                ""translation_service_clients"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,4.53.137.82/32,173.247.199.142/32,130.185.137.106/32,202.181.248.19/32,52.17.87.187/32,52.30.44.136/32,52.30.58.232/32,52.31.203.95/32,52.49.119.80/32,52.49.49.111/32,52.49.5.171/32,52.50.108.6/32,52.50.175.210/32,52.50.189.21/32,52.50.255.154/32,52.50.91.189/32,54.195.199.108/32,54.78.39.106/32,58.211.225.90/32,89.150.143.118/32,54.222.150.122/32,54.222.194.56/32,109.70.48.99/32""
                },
                ""truebn_org_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""34.253.176.198/32,34.241.59.39/32""
                },
                ""userdata_path"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/modules/eff596488a3055adf7024741dffb9ca1/..""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""regional-common""
            ],
            ""outputs"": {
                ""availability_zones"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1a,cn-northwest-1b""
                },
                ""backend_region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""base_ami_1604"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-6ec1d50c""
                },
                ""base_ami_1604_zfs"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-edf8ec8f""
                },
                ""chinapay_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""key_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""pay_china""
                },
                ""region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""region_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""region_env"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        }
    ]
}

-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go] DEBUG: Response s3/PutObject Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 200 OK
Connection: close
Content-Length: 0
Date: Thu, 26 Apr 2018 11:00:39 GMT
Etag: ""807c608ab629b9b73914da058c923c20""
Server: AmazonS3
X-Amz-Id-2: 5Af+DuU/y0Ngtkb6wCq1R0Oz+ZrOYi4apbPsCZTSlwhSqnqBNB64rFL4HfBG6WB9GETdRmQyKnw=
X-Amz-Request-Id: 7984823D8787C039
X-Amz-Server-Side-Encryption: AES256


-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go]
2018/04/26 19:00:38 [DEBUG] plugin: waiting for all plugin processes to complete...

Error: Error applying plan:

1 error(s) occurred:

* module.docdb.aws_instance.riak: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d

2018-04-26T19:00:38.547+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:38 [ERR] plugin: plugin server: accept unix /var/folders/k0/hk5r4k696x901sk4mh_vwcg40000gn/T/plugin243311916: use of closed network connection
Terraform does not automatically rollback in the face of errors.
Instead, your Terraform state file has been partially updated with
any resources that successfully completed. Please address the error
above and apply again to incrementally change your infrastructure.


2018-04-26T19:00:38.550+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-template_v1.0.0_x4
2018-04-26T19:00:38.551+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-aws_v1.16.0_x4
2018-04-26T19:00:38.555+0800 [DEBUG] plugin: plugin process exited: path=/usr/local/bin/terraform-provider-alicloud

```
# Expected Behavior
can create aws instance in China AWS
# Actual Behavior
I can create aws instance in China AWS with provider.aws v1.15.0
but I can't create aws instance with provider.aws v1.16.0",ASIAOS43C3BRNG62F4KQ,https://github.com/hashicorp/terraform-provider-aws
38,4359,"# Terraform Version

Terraform v0.11.6
provider.aws v1.16.0

# Affected Resource(s)
aws_instance_ec2
# Terraform Configuration Files
module ""docdb"" {
  source = ""../../../../../../tradeshift-puppet/terraform/modules/aws/instances-cn/riak""
  environment = ""${var.pull_request}""
  stackname = ""${var.stackname}""
  role = ""docdb""
  owner = ""${var.owner}""
  decomission_date = ""${var.decomission_date}""
  instance_type = ""t2.large""
  instance_ami = ""${module.regional-common.base_ami_1604}""
  instance_key_name = ""${module.regional-common.key_name}""
  disable_api_termination = false
  ebs_volume_size = ""100""
  ebs_delete_on_termination = ""false""
  ebs_optimized = false
  vpc_security_groups = ""${data.terraform_remote_state.security_groups.stack_it_run_access_sg_id}""
  vpc_subnets = ""${data.terraform_remote_state.vpc.private_subnets}""
  postfix = "".${var.stackname}""
  dns_region_name = ""${module.regional-common.region_dns}""
  disk_encryption_key = ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx""
  count = ""1""
  cert_name = ""${module.environment-common.cert_name}""
}

# Debug Output
```
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 200 OK
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: text/xml;charset=UTF-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:36 GMT
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Vary: Accept-Encoding
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <DescribeInstanceAttributeResponse xmlns=""http://ec2.amazonaws.com/doc/2016-11-15/"">
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <requestId>35e6cd4e-cb70-4016-a250-53f0880cc9be</requestId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <instanceId>i-022a9894321a6d374</instanceId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:         <value>I2Nsb3VkLWNvbmZpZwptb3VudHM6CiAtIFtlcGhlbWVyYWwwLCBudWxsXQoKcHJlc2VydmVfaG9zdG5hbWU6IHRydWUKbWFuYWdlX2V0Y19ob3N0czogZmFsc2UKCmJvb3RjbWQ6CiAtICJlY2hvIHBheSA+IC9ldGMvdHJhZGVzaGlmdC9zdGFja25hbWUiCiAtICJlY2hvIGRvY2RiLSRJTlNUQU5DRV9JRCA+IC9ldGMvaG9zdG5hbWU7IGhvc3RuYW1lIC1GIC9ldGMvaG9zdG5hbWUiCiAtICJzZWQgLWkgLWUgJy9eMTI3LjAuMC4xL2QnIC9ldGMvaG9zdHM7IGVjaG8gMTI3LjAuMC4xIGRvY2RiLSRJTlNUQU5DRV9JRC5jbi1ub3J0aHdlc3QtMS50ZXN0LmJ3dHNpLmNuIGRvY2RiLSRJTlNUQU5DRV9JRCBsb2NhbGhvc3QgPj4gL2V0Yy9ob3N0cyIKICMgRGlzayBlbmNyeXB0aW9uIGtleSBmb3IgZXBoZW1lcmFsIGRpc2sgZHJpdmVzLCBzYXZlZCB0byByYW0gZHJpdmUKICMgVGhlIHNlZCBwYXJ0IHJlbW92ZXMgdGhlIChzdGRpbik9IG91dHB1dCBmcm9tIG9wZW5zc2wgZGdzdAogLSAiZWNobyAkSU5TVEFOQ0VfSUQgfCBvcGVuc3NsIGRnc3QgLXNoYTI1NiAtaG1hYyAnZHI2OVpVR1ZtMEVwMUVvL3hCb09UY2VmdUtWeCcgfCBzZWQgJ3MvXi4qPSAvLycgPiAvZGV2L3NobS9lbmNyeXB0ZWQtZGlzay5sdWtzLmtleSAmJiBjaG1vZCA0MDAgL2Rldi9zaG0vZW5jcnlwdGVkLWRpc2subHVrcy5rZXkiCgojIERvbid0IG92ZXJyaWRlIG91ciBhcHQgcmVwb3NpdG9yeSBsaXN0IG9uIGZpcnN0IGJvb3QKYXB0X3ByZXNlcnZlX3NvdXJjZXNfbGlzdDogdHJ1ZQoKIyBEb24ndCBwcmludCB0aGUgbmV3IHNzaCBrZXlzIG9uIHRoZSBjb25zb2xlCm5vX3NzaF9maW5nZXJwcmludHM6IHRydWUKCndyaXRlX2ZpbGVzOgogLSBwYXRoOiAvZXRjL3B1cHBldGxhYnMvcHVwcGV0L3B1cHBldC5jb25mCiAgIG93bmVyOiByb290OnJvb3QKICAgcGVybWlzc2lvbnM6ICcwNDQ0JwogICBjb250ZW50OiB8CiAgICAgW21haW5dCiAgICAgY2VydG5hbWUgPSBiYXNlLnRlc3RpbmcuYnd0c2kuY24KICAgICBlbnZpcm9ubWVudCA9IGNoaW5hcGF5CiAgICAgW2FnZW50XQogICAgIHJ1bmludGVydmFsID0gMTAweQogICAgIHNlcnZlciA9IHB1cHBldC5id3RzaS5jbgogICAgIG5vZGVfbmFtZSA9IGZhY3RlcgogICAgIG5vZGVfbmFtZV9mYWN0ID0gZnFkbgogICAgIHNwbGF5ID0gdHJ1ZQogICAgIHNwbGF5bGltaXQgPSA1bQo=</value>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     </userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: </DescribeInstanceAttributeResponse>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] DEBUG: Request ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ REQUEST POST-SIGN ]-----------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: POST / HTTP/1.1
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Host: ec2.cn-northwest-1.amazonaws.com.cn
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: User-Agent: aws-sdk-go/1.13.32 (go1.9.2; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.7
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Length: 95
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/ec2/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-security-token, Signature=60ac431f06b221bf7fe6d53ee72de1babb1aad5a5a4d17917e4d2f78a7533fef
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: application/x-www-form-urlencoded; charset=utf-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Date: 20180426T110036Z
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Accept-Encoding: gzip
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Action=DescribeInstanceCreditSpecifications&InstanceId.1=i-022a9894321a6d374&Version=2016-11-15
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Response ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 400 Bad Request
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:37 GMT
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <Response><Errors><Error><Code>UnsupportedOperation</Code><Message>The functionality you requested is not available in this region.</Message></Error></Errors><RequestID>53ace3cc-2597-49a0-99b2-3b9f1cb8567d</RequestID></Response>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Validate Response ec2/DescribeInstanceCreditSpecifications failed, not retrying, error UnsupportedOperation: The functionality you requested is not available in this region.
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalApplyPost, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalSequence, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [DEBUG] Uploading remote state to S3: {
  Body: buffer(0xc4203e17d0),
  Bucket: ""bwts-terraform-bucket-chinapay"",
  ContentLength: 20792,
  ContentType: ""application/json"",
  Key: ""cn-northwest-1/riak/terraform.tfstate"",
  ServerSideEncryption: ""AES256""
}
2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Request s3/PutObject Details:
---[ REQUEST POST-SIGN ]-----------------------------
PUT /cn-northwest-1/riak/terraform.tfstate HTTP/1.1
Host: bwts-terraform-bucket-chinapay.s3.cn-northwest-1.amazonaws.com.cn
User-Agent: aws-sdk-go/1.12.75 (go1.10.1; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.6
Content-Length: 20792
Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/s3/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-content-sha256;x-amz-date;x-amz-security-token;x-amz-server-side-encryption, Signature=8aa16110ae06a99b503e1f0546a4d6cf208fdf658ca29420baa2d649cec043e2
Content-Type: application/json
X-Amz-Content-Sha256: 04110e3e4cd97aa3e89cfe2f03487922bfd6b6346ec6dfe3fbe8fad9755e18c2
X-Amz-Date: 20180426T110037Z
X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
X-Amz-Server-Side-Encryption: AES256
Accept-Encoding: gzip

{
    ""version"": 3,
    ""terraform_version"": ""0.11.6"",
    ""serial"": 1,
    ""lineage"": ""b9c3c084-789e-7472-0b18-8698b4afc854"",
    ""modules"": [
        {
            ""path"": [
                ""root""
            ],
            ""outputs"": {},
            ""resources"": {
                ""data.terraform_remote_state.security_groups"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""bastion_host"": ""sg-e29feb8b"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/dev-stack-sgs/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""external_lb_sg_id"": ""sg-a55027cc"",
                            ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                            ""rundeck"": ""sg-b39eeada"",
                            ""stack_it_run_access_sg_id"": ""sg-9d5f28f4"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                },
                ""data.terraform_remote_state.vpc"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/vpc/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                            ""private_subnets"": ""subnet-454c962c,subnet-9722ddec"",
                            ""public_subnets"": ""subnet-5e4d9737,subnet-9022ddeb"",
                            ""vpc_cidr"": ""192.168.0.0/19"",
                            ""vpc_id"": ""vpc-34c61f5d"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""docdb""
            ],
            ""outputs"": {},
            ""resources"": {
                ""aws_instance.riak"": {
                    ""type"": ""aws_instance"",
                    ""depends_on"": [
                        ""data.template_file.cloud-init-riak""
                    ],
                    ""primary"": {
                        ""id"": ""i-022a9894321a6d374"",
                        ""attributes"": {
                            ""ami"": ""ami-6ec1d50c"",
                            ""associate_public_ip_address"": ""false"",
                            ""availability_zone"": ""cn-northwest-1a"",
                            ""disable_api_termination"": ""false"",
                            ""ebs_block_device.#"": ""4"",
                            ""ebs_block_device.3965576335.delete_on_termination"": ""false"",
                            ""ebs_block_device.3965576335.device_name"": ""/dev/xvdd"",
                            ""ebs_block_device.3965576335.encrypted"": ""false"",
                            ""ebs_block_device.3965576335.iops"": ""300"",
                            ""ebs_block_device.3965576335.snapshot_id"": """",
                            ""ebs_block_device.3965576335.volume_id"": ""vol-09cde364159031c5d"",
                            ""ebs_block_device.3965576335.volume_size"": ""100"",
                            ""ebs_block_device.3965576335.volume_type"": ""gp2"",
                            ""ebs_block_device.3986656952.delete_on_termination"": ""false"",
                            ""ebs_block_device.3986656952.device_name"": ""/dev/xvde"",
                            ""ebs_block_device.3986656952.encrypted"": ""false"",
                            ""ebs_block_device.3986656952.iops"": ""300"",
                            ""ebs_block_device.3986656952.snapshot_id"": """",
                            ""ebs_block_device.3986656952.volume_id"": ""vol-09c14e768bdd6dd4b"",
                            ""ebs_block_device.3986656952.volume_size"": ""100"",
                            ""ebs_block_device.3986656952.volume_type"": ""gp2"",
                            ""ebs_block_device.3994770134.delete_on_termination"": ""false"",
                            ""ebs_block_device.3994770134.device_name"": ""/dev/xvdg"",
                            ""ebs_block_device.3994770134.encrypted"": ""false"",
                            ""ebs_block_device.3994770134.iops"": ""300"",
                            ""ebs_block_device.3994770134.snapshot_id"": """",
                            ""ebs_block_device.3994770134.volume_id"": ""vol-0e1b3ff63114f3003"",
                            ""ebs_block_device.3994770134.volume_size"": ""100"",
                            ""ebs_block_device.3994770134.volume_type"": ""gp2"",
                            ""ebs_block_device.4023988449.delete_on_termination"": ""false"",
                            ""ebs_block_device.4023988449.device_name"": ""/dev/xvdf"",
                            ""ebs_block_device.4023988449.encrypted"": ""false"",
                            ""ebs_block_device.4023988449.iops"": ""300"",
                            ""ebs_block_device.4023988449.snapshot_id"": """",
                            ""ebs_block_device.4023988449.volume_id"": ""vol-015467a2fec64cfdd"",
                            ""ebs_block_device.4023988449.volume_size"": ""100"",
                            ""ebs_block_device.4023988449.volume_type"": ""gp2"",
                            ""ebs_optimized"": ""false"",
                            ""ephemeral_block_device.#"": ""0"",
                            ""get_password_data"": ""false"",
                            ""iam_instance_profile"": """",
                            ""id"": ""i-022a9894321a6d374"",
                            ""instance_state"": ""running"",
                            ""instance_type"": ""t2.large"",
                            ""ipv6_addresses.#"": ""0"",
                            ""key_name"": ""pay_china"",
                            ""monitoring"": ""false"",
                            ""network_interface.#"": ""0"",
                            ""network_interface_id"": ""eni-fd55c3a4"",
                            ""placement_group"": """",
                            ""primary_network_interface_id"": ""eni-fd55c3a4"",
                            ""private_dns"": ""ip-192-168-14-135.cn-northwest-1.compute.internal"",
                            ""private_ip"": ""192.168.14.135"",
                            ""public_dns"": """",
                            ""public_ip"": """",
                            ""root_block_device.#"": ""1"",
                            ""root_block_device.0.delete_on_termination"": ""true"",
                            ""root_block_device.0.iops"": ""100"",
                            ""root_block_device.0.volume_id"": ""vol-0884c92d17ea04d83"",
                            ""root_block_device.0.volume_size"": ""20"",
                            ""root_block_device.0.volume_type"": ""gp2"",
                            ""security_groups.#"": ""0"",
                            ""source_dest_check"": ""true"",
                            ""subnet_id"": ""subnet-454c962c"",
                            ""tags.%"": ""9"",
                            ""tags.Decomission_Date"": ""never"",
                            ""tags.Environment"": ""chinapay"",
                            ""tags.Name"": ""docdb.pay.cn-northwest-1.test.bwtsi.cn"",
                            ""tags.Owner"": ""operations"",
                            ""tags.Purpose"": ""Riak instance"",
                            ""tags.Role"": ""docdb"",
                            ""tags.Stackname"": ""pay"",
                            ""tags.Started_By"": ""operations"",
                            ""tags.Warning"": ""Managed by terraform, do not edit"",
                            ""tenancy"": ""default"",
                            ""user_data"": ""f35050bdeefa2a2d9f354c0e699a5f2d7c393365"",
                            ""volume_tags.%"": ""0"",
                            ""vpc_security_group_ids.#"": ""1"",
                            ""vpc_security_group_ids.2301982502"": ""sg-9d5f28f4""
                        },
                        ""meta"": {
                            ""e2bfb730-ecaa-11e6-8f88-34363bc7c4c0"": {
                                ""create"": 600000000000,
                                ""delete"": 1200000000000,
                                ""update"": 600000000000
                            },
                            ""schema_version"": ""1""
                        },
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.aws""
                },
                ""data.template_file.cloud-init-riak"": {
                    ""type"": ""template_file"",
                    ""depends_on"": [],
                    ""primary"": {
                        ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                        ""attributes"": {
                            ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                            ""rendered"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo pay \u003e /etc/tradeshift/stackname\""\n - \""echo docdb-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 docdb-$INSTANCE_ID.cn-northwest-1.test.bwtsi.cn docdb-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac 'dr69ZUGVm0Ep1Eo/xBoOTcefuKVx' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = base.testing.bwtsi.cn\n     environment = chinapay\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""template"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo ${STACK_NAME} \u003e /etc/tradeshift/stackname\""\n - \""echo ${HOSTNAME}-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 ${HOSTNAME}-$INSTANCE_ID.${REGION_DNS} ${HOSTNAME}-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac '${DISK_ENCRYPTION_KEY}' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = ${CERT_NAME}\n     environment = ${ENVIRONMENT}\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""vars.%"": ""6"",
                            ""vars.CERT_NAME"": ""base.testing.bwtsi.cn"",
                            ""vars.DISK_ENCRYPTION_KEY"": ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx"",
                            ""vars.ENVIRONMENT"": ""chinapay"",
                            ""vars.HOSTNAME"": ""docdb"",
                            ""vars.REGION_DNS"": ""cn-northwest-1.test.bwtsi.cn"",
                            ""vars.STACK_NAME"": ""pay""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.template""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""environment-common""
            ],
            ""outputs"": {
                ""cert_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""base.testing.bwtsi.cn""
                },
                ""domain_name_search"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test.bwtsi.cn""
                },
                ""environment_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""chinapay""
                },
                ""environment_shortname"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                },
                ""security_group_name_postfix"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": "".chinapay""
                },
                ""site"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""global-common""
            ],
            ""outputs"": {
                ""all_cidr_eu_west_1"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16,172.25.128.0/21,172.25.120.0/21,172.25.112.0/21,172.31.248.0/21,172.31.240.0/21,172.21.0.0/19,172.19.0.0/19,172.22.0.0/19,172.18.0.0/19""
                },
                ""base_tradeshift_net_account_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""694518486591""
                },
                ""gcsops_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.17.22.143/32""
                },
                ""gcsops_cn_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""54.223.95.7/32,54.223.198.170/32,54.223.211.136/32,52.80.34.103/32""
                },
                ""office_ips"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,178.49.148.100/32,87.243.3.34/32,109.166.189.50/32,78.40.84.83/32,4.53.137.82/32,173.247.199.142/32,58.211.225.90/32,202.181.248.19/32,109.70.48.99/32""
                },
                ""prod_base_tradeshift_net_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""prod.base.tradeshift.net""
                },
                ""prod_base_tradeshift_net_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16""
                },
                ""prod_base_tradeshift_net_vpc_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""vpc-264c9042""
                },
                ""prod_ts_sv_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.50.175.210/32,52.30.44.136/32,52.50.189.21/32""
                },
                ""test_bwtsi_cn_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/19""
                },
                ""test_bwtsi_cn_vpc_private_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.12.0/22,192.168.16.0/22""
                },
                ""test_bwtsi_cn_vpc_public_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/22,192.168.4.0/22""
                },
                ""tradeshift_com_public_zone_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""Z2OX0I8SM94425""
                },
                ""translation_service_clients"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,4.53.137.82/32,173.247.199.142/32,130.185.137.106/32,202.181.248.19/32,52.17.87.187/32,52.30.44.136/32,52.30.58.232/32,52.31.203.95/32,52.49.119.80/32,52.49.49.111/32,52.49.5.171/32,52.50.108.6/32,52.50.175.210/32,52.50.189.21/32,52.50.255.154/32,52.50.91.189/32,54.195.199.108/32,54.78.39.106/32,58.211.225.90/32,89.150.143.118/32,54.222.150.122/32,54.222.194.56/32,109.70.48.99/32""
                },
                ""truebn_org_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""34.253.176.198/32,34.241.59.39/32""
                },
                ""userdata_path"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/modules/eff596488a3055adf7024741dffb9ca1/..""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""regional-common""
            ],
            ""outputs"": {
                ""availability_zones"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1a,cn-northwest-1b""
                },
                ""backend_region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""base_ami_1604"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-6ec1d50c""
                },
                ""base_ami_1604_zfs"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-edf8ec8f""
                },
                ""chinapay_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""key_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""pay_china""
                },
                ""region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""region_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""region_env"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        }
    ]
}

-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go] DEBUG: Response s3/PutObject Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 200 OK
Connection: close
Content-Length: 0
Date: Thu, 26 Apr 2018 11:00:39 GMT
Etag: ""807c608ab629b9b73914da058c923c20""
Server: AmazonS3
X-Amz-Id-2: 5Af+DuU/y0Ngtkb6wCq1R0Oz+ZrOYi4apbPsCZTSlwhSqnqBNB64rFL4HfBG6WB9GETdRmQyKnw=
X-Amz-Request-Id: 7984823D8787C039
X-Amz-Server-Side-Encryption: AES256


-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go]
2018/04/26 19:00:38 [DEBUG] plugin: waiting for all plugin processes to complete...

Error: Error applying plan:

1 error(s) occurred:

* module.docdb.aws_instance.riak: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d

2018-04-26T19:00:38.547+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:38 [ERR] plugin: plugin server: accept unix /var/folders/k0/hk5r4k696x901sk4mh_vwcg40000gn/T/plugin243311916: use of closed network connection
Terraform does not automatically rollback in the face of errors.
Instead, your Terraform state file has been partially updated with
any resources that successfully completed. Please address the error
above and apply again to incrementally change your infrastructure.


2018-04-26T19:00:38.550+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-template_v1.0.0_x4
2018-04-26T19:00:38.551+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-aws_v1.16.0_x4
2018-04-26T19:00:38.555+0800 [DEBUG] plugin: plugin process exited: path=/usr/local/bin/terraform-provider-alicloud

```
# Expected Behavior
can create aws instance in China AWS
# Actual Behavior
I can create aws instance in China AWS with provider.aws v1.15.0
but I can't create aws instance with provider.aws v1.16.0",disable_api_termination,https://github.com/hashicorp/terraform-provider-aws
39,4359,"# Terraform Version

Terraform v0.11.6
provider.aws v1.16.0

# Affected Resource(s)
aws_instance_ec2
# Terraform Configuration Files
module ""docdb"" {
  source = ""../../../../../../tradeshift-puppet/terraform/modules/aws/instances-cn/riak""
  environment = ""${var.pull_request}""
  stackname = ""${var.stackname}""
  role = ""docdb""
  owner = ""${var.owner}""
  decomission_date = ""${var.decomission_date}""
  instance_type = ""t2.large""
  instance_ami = ""${module.regional-common.base_ami_1604}""
  instance_key_name = ""${module.regional-common.key_name}""
  disable_api_termination = false
  ebs_volume_size = ""100""
  ebs_delete_on_termination = ""false""
  ebs_optimized = false
  vpc_security_groups = ""${data.terraform_remote_state.security_groups.stack_it_run_access_sg_id}""
  vpc_subnets = ""${data.terraform_remote_state.vpc.private_subnets}""
  postfix = "".${var.stackname}""
  dns_region_name = ""${module.regional-common.region_dns}""
  disk_encryption_key = ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx""
  count = ""1""
  cert_name = ""${module.environment-common.cert_name}""
}

# Debug Output
```
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 200 OK
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: text/xml;charset=UTF-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:36 GMT
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Vary: Accept-Encoding
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <DescribeInstanceAttributeResponse xmlns=""http://ec2.amazonaws.com/doc/2016-11-15/"">
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <requestId>35e6cd4e-cb70-4016-a250-53f0880cc9be</requestId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <instanceId>i-022a9894321a6d374</instanceId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:         <value>I2Nsb3VkLWNvbmZpZwptb3VudHM6CiAtIFtlcGhlbWVyYWwwLCBudWxsXQoKcHJlc2VydmVfaG9zdG5hbWU6IHRydWUKbWFuYWdlX2V0Y19ob3N0czogZmFsc2UKCmJvb3RjbWQ6CiAtICJlY2hvIHBheSA+IC9ldGMvdHJhZGVzaGlmdC9zdGFja25hbWUiCiAtICJlY2hvIGRvY2RiLSRJTlNUQU5DRV9JRCA+IC9ldGMvaG9zdG5hbWU7IGhvc3RuYW1lIC1GIC9ldGMvaG9zdG5hbWUiCiAtICJzZWQgLWkgLWUgJy9eMTI3LjAuMC4xL2QnIC9ldGMvaG9zdHM7IGVjaG8gMTI3LjAuMC4xIGRvY2RiLSRJTlNUQU5DRV9JRC5jbi1ub3J0aHdlc3QtMS50ZXN0LmJ3dHNpLmNuIGRvY2RiLSRJTlNUQU5DRV9JRCBsb2NhbGhvc3QgPj4gL2V0Yy9ob3N0cyIKICMgRGlzayBlbmNyeXB0aW9uIGtleSBmb3IgZXBoZW1lcmFsIGRpc2sgZHJpdmVzLCBzYXZlZCB0byByYW0gZHJpdmUKICMgVGhlIHNlZCBwYXJ0IHJlbW92ZXMgdGhlIChzdGRpbik9IG91dHB1dCBmcm9tIG9wZW5zc2wgZGdzdAogLSAiZWNobyAkSU5TVEFOQ0VfSUQgfCBvcGVuc3NsIGRnc3QgLXNoYTI1NiAtaG1hYyAnZHI2OVpVR1ZtMEVwMUVvL3hCb09UY2VmdUtWeCcgfCBzZWQgJ3MvXi4qPSAvLycgPiAvZGV2L3NobS9lbmNyeXB0ZWQtZGlzay5sdWtzLmtleSAmJiBjaG1vZCA0MDAgL2Rldi9zaG0vZW5jcnlwdGVkLWRpc2subHVrcy5rZXkiCgojIERvbid0IG92ZXJyaWRlIG91ciBhcHQgcmVwb3NpdG9yeSBsaXN0IG9uIGZpcnN0IGJvb3QKYXB0X3ByZXNlcnZlX3NvdXJjZXNfbGlzdDogdHJ1ZQoKIyBEb24ndCBwcmludCB0aGUgbmV3IHNzaCBrZXlzIG9uIHRoZSBjb25zb2xlCm5vX3NzaF9maW5nZXJwcmludHM6IHRydWUKCndyaXRlX2ZpbGVzOgogLSBwYXRoOiAvZXRjL3B1cHBldGxhYnMvcHVwcGV0L3B1cHBldC5jb25mCiAgIG93bmVyOiByb290OnJvb3QKICAgcGVybWlzc2lvbnM6ICcwNDQ0JwogICBjb250ZW50OiB8CiAgICAgW21haW5dCiAgICAgY2VydG5hbWUgPSBiYXNlLnRlc3RpbmcuYnd0c2kuY24KICAgICBlbnZpcm9ubWVudCA9IGNoaW5hcGF5CiAgICAgW2FnZW50XQogICAgIHJ1bmludGVydmFsID0gMTAweQogICAgIHNlcnZlciA9IHB1cHBldC5id3RzaS5jbgogICAgIG5vZGVfbmFtZSA9IGZhY3RlcgogICAgIG5vZGVfbmFtZV9mYWN0ID0gZnFkbgogICAgIHNwbGF5ID0gdHJ1ZQogICAgIHNwbGF5bGltaXQgPSA1bQo=</value>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     </userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: </DescribeInstanceAttributeResponse>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] DEBUG: Request ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ REQUEST POST-SIGN ]-----------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: POST / HTTP/1.1
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Host: ec2.cn-northwest-1.amazonaws.com.cn
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: User-Agent: aws-sdk-go/1.13.32 (go1.9.2; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.7
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Length: 95
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/ec2/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-security-token, Signature=60ac431f06b221bf7fe6d53ee72de1babb1aad5a5a4d17917e4d2f78a7533fef
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: application/x-www-form-urlencoded; charset=utf-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Date: 20180426T110036Z
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Accept-Encoding: gzip
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Action=DescribeInstanceCreditSpecifications&InstanceId.1=i-022a9894321a6d374&Version=2016-11-15
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Response ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 400 Bad Request
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:37 GMT
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <Response><Errors><Error><Code>UnsupportedOperation</Code><Message>The functionality you requested is not available in this region.</Message></Error></Errors><RequestID>53ace3cc-2597-49a0-99b2-3b9f1cb8567d</RequestID></Response>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Validate Response ec2/DescribeInstanceCreditSpecifications failed, not retrying, error UnsupportedOperation: The functionality you requested is not available in this region.
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalApplyPost, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalSequence, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [DEBUG] Uploading remote state to S3: {
  Body: buffer(0xc4203e17d0),
  Bucket: ""bwts-terraform-bucket-chinapay"",
  ContentLength: 20792,
  ContentType: ""application/json"",
  Key: ""cn-northwest-1/riak/terraform.tfstate"",
  ServerSideEncryption: ""AES256""
}
2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Request s3/PutObject Details:
---[ REQUEST POST-SIGN ]-----------------------------
PUT /cn-northwest-1/riak/terraform.tfstate HTTP/1.1
Host: bwts-terraform-bucket-chinapay.s3.cn-northwest-1.amazonaws.com.cn
User-Agent: aws-sdk-go/1.12.75 (go1.10.1; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.6
Content-Length: 20792
Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/s3/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-content-sha256;x-amz-date;x-amz-security-token;x-amz-server-side-encryption, Signature=8aa16110ae06a99b503e1f0546a4d6cf208fdf658ca29420baa2d649cec043e2
Content-Type: application/json
X-Amz-Content-Sha256: 04110e3e4cd97aa3e89cfe2f03487922bfd6b6346ec6dfe3fbe8fad9755e18c2
X-Amz-Date: 20180426T110037Z
X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
X-Amz-Server-Side-Encryption: AES256
Accept-Encoding: gzip

{
    ""version"": 3,
    ""terraform_version"": ""0.11.6"",
    ""serial"": 1,
    ""lineage"": ""b9c3c084-789e-7472-0b18-8698b4afc854"",
    ""modules"": [
        {
            ""path"": [
                ""root""
            ],
            ""outputs"": {},
            ""resources"": {
                ""data.terraform_remote_state.security_groups"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""bastion_host"": ""sg-e29feb8b"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/dev-stack-sgs/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""external_lb_sg_id"": ""sg-a55027cc"",
                            ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                            ""rundeck"": ""sg-b39eeada"",
                            ""stack_it_run_access_sg_id"": ""sg-9d5f28f4"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                },
                ""data.terraform_remote_state.vpc"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/vpc/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                            ""private_subnets"": ""subnet-454c962c,subnet-9722ddec"",
                            ""public_subnets"": ""subnet-5e4d9737,subnet-9022ddeb"",
                            ""vpc_cidr"": ""192.168.0.0/19"",
                            ""vpc_id"": ""vpc-34c61f5d"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""docdb""
            ],
            ""outputs"": {},
            ""resources"": {
                ""aws_instance.riak"": {
                    ""type"": ""aws_instance"",
                    ""depends_on"": [
                        ""data.template_file.cloud-init-riak""
                    ],
                    ""primary"": {
                        ""id"": ""i-022a9894321a6d374"",
                        ""attributes"": {
                            ""ami"": ""ami-6ec1d50c"",
                            ""associate_public_ip_address"": ""false"",
                            ""availability_zone"": ""cn-northwest-1a"",
                            ""disable_api_termination"": ""false"",
                            ""ebs_block_device.#"": ""4"",
                            ""ebs_block_device.3965576335.delete_on_termination"": ""false"",
                            ""ebs_block_device.3965576335.device_name"": ""/dev/xvdd"",
                            ""ebs_block_device.3965576335.encrypted"": ""false"",
                            ""ebs_block_device.3965576335.iops"": ""300"",
                            ""ebs_block_device.3965576335.snapshot_id"": """",
                            ""ebs_block_device.3965576335.volume_id"": ""vol-09cde364159031c5d"",
                            ""ebs_block_device.3965576335.volume_size"": ""100"",
                            ""ebs_block_device.3965576335.volume_type"": ""gp2"",
                            ""ebs_block_device.3986656952.delete_on_termination"": ""false"",
                            ""ebs_block_device.3986656952.device_name"": ""/dev/xvde"",
                            ""ebs_block_device.3986656952.encrypted"": ""false"",
                            ""ebs_block_device.3986656952.iops"": ""300"",
                            ""ebs_block_device.3986656952.snapshot_id"": """",
                            ""ebs_block_device.3986656952.volume_id"": ""vol-09c14e768bdd6dd4b"",
                            ""ebs_block_device.3986656952.volume_size"": ""100"",
                            ""ebs_block_device.3986656952.volume_type"": ""gp2"",
                            ""ebs_block_device.3994770134.delete_on_termination"": ""false"",
                            ""ebs_block_device.3994770134.device_name"": ""/dev/xvdg"",
                            ""ebs_block_device.3994770134.encrypted"": ""false"",
                            ""ebs_block_device.3994770134.iops"": ""300"",
                            ""ebs_block_device.3994770134.snapshot_id"": """",
                            ""ebs_block_device.3994770134.volume_id"": ""vol-0e1b3ff63114f3003"",
                            ""ebs_block_device.3994770134.volume_size"": ""100"",
                            ""ebs_block_device.3994770134.volume_type"": ""gp2"",
                            ""ebs_block_device.4023988449.delete_on_termination"": ""false"",
                            ""ebs_block_device.4023988449.device_name"": ""/dev/xvdf"",
                            ""ebs_block_device.4023988449.encrypted"": ""false"",
                            ""ebs_block_device.4023988449.iops"": ""300"",
                            ""ebs_block_device.4023988449.snapshot_id"": """",
                            ""ebs_block_device.4023988449.volume_id"": ""vol-015467a2fec64cfdd"",
                            ""ebs_block_device.4023988449.volume_size"": ""100"",
                            ""ebs_block_device.4023988449.volume_type"": ""gp2"",
                            ""ebs_optimized"": ""false"",
                            ""ephemeral_block_device.#"": ""0"",
                            ""get_password_data"": ""false"",
                            ""iam_instance_profile"": """",
                            ""id"": ""i-022a9894321a6d374"",
                            ""instance_state"": ""running"",
                            ""instance_type"": ""t2.large"",
                            ""ipv6_addresses.#"": ""0"",
                            ""key_name"": ""pay_china"",
                            ""monitoring"": ""false"",
                            ""network_interface.#"": ""0"",
                            ""network_interface_id"": ""eni-fd55c3a4"",
                            ""placement_group"": """",
                            ""primary_network_interface_id"": ""eni-fd55c3a4"",
                            ""private_dns"": ""ip-192-168-14-135.cn-northwest-1.compute.internal"",
                            ""private_ip"": ""192.168.14.135"",
                            ""public_dns"": """",
                            ""public_ip"": """",
                            ""root_block_device.#"": ""1"",
                            ""root_block_device.0.delete_on_termination"": ""true"",
                            ""root_block_device.0.iops"": ""100"",
                            ""root_block_device.0.volume_id"": ""vol-0884c92d17ea04d83"",
                            ""root_block_device.0.volume_size"": ""20"",
                            ""root_block_device.0.volume_type"": ""gp2"",
                            ""security_groups.#"": ""0"",
                            ""source_dest_check"": ""true"",
                            ""subnet_id"": ""subnet-454c962c"",
                            ""tags.%"": ""9"",
                            ""tags.Decomission_Date"": ""never"",
                            ""tags.Environment"": ""chinapay"",
                            ""tags.Name"": ""docdb.pay.cn-northwest-1.test.bwtsi.cn"",
                            ""tags.Owner"": ""operations"",
                            ""tags.Purpose"": ""Riak instance"",
                            ""tags.Role"": ""docdb"",
                            ""tags.Stackname"": ""pay"",
                            ""tags.Started_By"": ""operations"",
                            ""tags.Warning"": ""Managed by terraform, do not edit"",
                            ""tenancy"": ""default"",
                            ""user_data"": ""f35050bdeefa2a2d9f354c0e699a5f2d7c393365"",
                            ""volume_tags.%"": ""0"",
                            ""vpc_security_group_ids.#"": ""1"",
                            ""vpc_security_group_ids.2301982502"": ""sg-9d5f28f4""
                        },
                        ""meta"": {
                            ""e2bfb730-ecaa-11e6-8f88-34363bc7c4c0"": {
                                ""create"": 600000000000,
                                ""delete"": 1200000000000,
                                ""update"": 600000000000
                            },
                            ""schema_version"": ""1""
                        },
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.aws""
                },
                ""data.template_file.cloud-init-riak"": {
                    ""type"": ""template_file"",
                    ""depends_on"": [],
                    ""primary"": {
                        ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                        ""attributes"": {
                            ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                            ""rendered"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo pay \u003e /etc/tradeshift/stackname\""\n - \""echo docdb-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 docdb-$INSTANCE_ID.cn-northwest-1.test.bwtsi.cn docdb-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac 'dr69ZUGVm0Ep1Eo/xBoOTcefuKVx' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = base.testing.bwtsi.cn\n     environment = chinapay\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""template"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo ${STACK_NAME} \u003e /etc/tradeshift/stackname\""\n - \""echo ${HOSTNAME}-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 ${HOSTNAME}-$INSTANCE_ID.${REGION_DNS} ${HOSTNAME}-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac '${DISK_ENCRYPTION_KEY}' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = ${CERT_NAME}\n     environment = ${ENVIRONMENT}\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""vars.%"": ""6"",
                            ""vars.CERT_NAME"": ""base.testing.bwtsi.cn"",
                            ""vars.DISK_ENCRYPTION_KEY"": ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx"",
                            ""vars.ENVIRONMENT"": ""chinapay"",
                            ""vars.HOSTNAME"": ""docdb"",
                            ""vars.REGION_DNS"": ""cn-northwest-1.test.bwtsi.cn"",
                            ""vars.STACK_NAME"": ""pay""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.template""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""environment-common""
            ],
            ""outputs"": {
                ""cert_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""base.testing.bwtsi.cn""
                },
                ""domain_name_search"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test.bwtsi.cn""
                },
                ""environment_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""chinapay""
                },
                ""environment_shortname"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                },
                ""security_group_name_postfix"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": "".chinapay""
                },
                ""site"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""global-common""
            ],
            ""outputs"": {
                ""all_cidr_eu_west_1"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16,172.25.128.0/21,172.25.120.0/21,172.25.112.0/21,172.31.248.0/21,172.31.240.0/21,172.21.0.0/19,172.19.0.0/19,172.22.0.0/19,172.18.0.0/19""
                },
                ""base_tradeshift_net_account_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""694518486591""
                },
                ""gcsops_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.17.22.143/32""
                },
                ""gcsops_cn_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""54.223.95.7/32,54.223.198.170/32,54.223.211.136/32,52.80.34.103/32""
                },
                ""office_ips"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,178.49.148.100/32,87.243.3.34/32,109.166.189.50/32,78.40.84.83/32,4.53.137.82/32,173.247.199.142/32,58.211.225.90/32,202.181.248.19/32,109.70.48.99/32""
                },
                ""prod_base_tradeshift_net_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""prod.base.tradeshift.net""
                },
                ""prod_base_tradeshift_net_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16""
                },
                ""prod_base_tradeshift_net_vpc_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""vpc-264c9042""
                },
                ""prod_ts_sv_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.50.175.210/32,52.30.44.136/32,52.50.189.21/32""
                },
                ""test_bwtsi_cn_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/19""
                },
                ""test_bwtsi_cn_vpc_private_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.12.0/22,192.168.16.0/22""
                },
                ""test_bwtsi_cn_vpc_public_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/22,192.168.4.0/22""
                },
                ""tradeshift_com_public_zone_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""Z2OX0I8SM94425""
                },
                ""translation_service_clients"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,4.53.137.82/32,173.247.199.142/32,130.185.137.106/32,202.181.248.19/32,52.17.87.187/32,52.30.44.136/32,52.30.58.232/32,52.31.203.95/32,52.49.119.80/32,52.49.49.111/32,52.49.5.171/32,52.50.108.6/32,52.50.175.210/32,52.50.189.21/32,52.50.255.154/32,52.50.91.189/32,54.195.199.108/32,54.78.39.106/32,58.211.225.90/32,89.150.143.118/32,54.222.150.122/32,54.222.194.56/32,109.70.48.99/32""
                },
                ""truebn_org_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""34.253.176.198/32,34.241.59.39/32""
                },
                ""userdata_path"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/modules/eff596488a3055adf7024741dffb9ca1/..""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""regional-common""
            ],
            ""outputs"": {
                ""availability_zones"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1a,cn-northwest-1b""
                },
                ""backend_region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""base_ami_1604"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-6ec1d50c""
                },
                ""base_ami_1604_zfs"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-edf8ec8f""
                },
                ""chinapay_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""key_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""pay_china""
                },
                ""region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""region_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""region_env"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        }
    ]
}

-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go] DEBUG: Response s3/PutObject Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 200 OK
Connection: close
Content-Length: 0
Date: Thu, 26 Apr 2018 11:00:39 GMT
Etag: ""807c608ab629b9b73914da058c923c20""
Server: AmazonS3
X-Amz-Id-2: 5Af+DuU/y0Ngtkb6wCq1R0Oz+ZrOYi4apbPsCZTSlwhSqnqBNB64rFL4HfBG6WB9GETdRmQyKnw=
X-Amz-Request-Id: 7984823D8787C039
X-Amz-Server-Side-Encryption: AES256


-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go]
2018/04/26 19:00:38 [DEBUG] plugin: waiting for all plugin processes to complete...

Error: Error applying plan:

1 error(s) occurred:

* module.docdb.aws_instance.riak: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d

2018-04-26T19:00:38.547+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:38 [ERR] plugin: plugin server: accept unix /var/folders/k0/hk5r4k696x901sk4mh_vwcg40000gn/T/plugin243311916: use of closed network connection
Terraform does not automatically rollback in the face of errors.
Instead, your Terraform state file has been partially updated with
any resources that successfully completed. Please address the error
above and apply again to incrementally change your infrastructure.


2018-04-26T19:00:38.550+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-template_v1.0.0_x4
2018-04-26T19:00:38.551+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-aws_v1.16.0_x4
2018-04-26T19:00:38.555+0800 [DEBUG] plugin: plugin process exited: path=/usr/local/bin/terraform-provider-alicloud

```
# Expected Behavior
can create aws instance in China AWS
# Actual Behavior
I can create aws instance in China AWS with provider.aws v1.15.0
but I can't create aws instance with provider.aws v1.16.0",SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-,https://github.com/hashicorp/terraform-provider-aws
40,4359,"# Terraform Version

Terraform v0.11.6
provider.aws v1.16.0

# Affected Resource(s)
aws_instance_ec2
# Terraform Configuration Files
module ""docdb"" {
  source = ""../../../../../../tradeshift-puppet/terraform/modules/aws/instances-cn/riak""
  environment = ""${var.pull_request}""
  stackname = ""${var.stackname}""
  role = ""docdb""
  owner = ""${var.owner}""
  decomission_date = ""${var.decomission_date}""
  instance_type = ""t2.large""
  instance_ami = ""${module.regional-common.base_ami_1604}""
  instance_key_name = ""${module.regional-common.key_name}""
  disable_api_termination = false
  ebs_volume_size = ""100""
  ebs_delete_on_termination = ""false""
  ebs_optimized = false
  vpc_security_groups = ""${data.terraform_remote_state.security_groups.stack_it_run_access_sg_id}""
  vpc_subnets = ""${data.terraform_remote_state.vpc.private_subnets}""
  postfix = "".${var.stackname}""
  dns_region_name = ""${module.regional-common.region_dns}""
  disk_encryption_key = ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx""
  count = ""1""
  cert_name = ""${module.environment-common.cert_name}""
}

# Debug Output
```
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 200 OK
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: text/xml;charset=UTF-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:36 GMT
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Vary: Accept-Encoding
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <DescribeInstanceAttributeResponse xmlns=""http://ec2.amazonaws.com/doc/2016-11-15/"">
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <requestId>35e6cd4e-cb70-4016-a250-53f0880cc9be</requestId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <instanceId>i-022a9894321a6d374</instanceId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:         <value>I2Nsb3VkLWNvbmZpZwptb3VudHM6CiAtIFtlcGhlbWVyYWwwLCBudWxsXQoKcHJlc2VydmVfaG9zdG5hbWU6IHRydWUKbWFuYWdlX2V0Y19ob3N0czogZmFsc2UKCmJvb3RjbWQ6CiAtICJlY2hvIHBheSA+IC9ldGMvdHJhZGVzaGlmdC9zdGFja25hbWUiCiAtICJlY2hvIGRvY2RiLSRJTlNUQU5DRV9JRCA+IC9ldGMvaG9zdG5hbWU7IGhvc3RuYW1lIC1GIC9ldGMvaG9zdG5hbWUiCiAtICJzZWQgLWkgLWUgJy9eMTI3LjAuMC4xL2QnIC9ldGMvaG9zdHM7IGVjaG8gMTI3LjAuMC4xIGRvY2RiLSRJTlNUQU5DRV9JRC5jbi1ub3J0aHdlc3QtMS50ZXN0LmJ3dHNpLmNuIGRvY2RiLSRJTlNUQU5DRV9JRCBsb2NhbGhvc3QgPj4gL2V0Yy9ob3N0cyIKICMgRGlzayBlbmNyeXB0aW9uIGtleSBmb3IgZXBoZW1lcmFsIGRpc2sgZHJpdmVzLCBzYXZlZCB0byByYW0gZHJpdmUKICMgVGhlIHNlZCBwYXJ0IHJlbW92ZXMgdGhlIChzdGRpbik9IG91dHB1dCBmcm9tIG9wZW5zc2wgZGdzdAogLSAiZWNobyAkSU5TVEFOQ0VfSUQgfCBvcGVuc3NsIGRnc3QgLXNoYTI1NiAtaG1hYyAnZHI2OVpVR1ZtMEVwMUVvL3hCb09UY2VmdUtWeCcgfCBzZWQgJ3MvXi4qPSAvLycgPiAvZGV2L3NobS9lbmNyeXB0ZWQtZGlzay5sdWtzLmtleSAmJiBjaG1vZCA0MDAgL2Rldi9zaG0vZW5jcnlwdGVkLWRpc2subHVrcy5rZXkiCgojIERvbid0IG92ZXJyaWRlIG91ciBhcHQgcmVwb3NpdG9yeSBsaXN0IG9uIGZpcnN0IGJvb3QKYXB0X3ByZXNlcnZlX3NvdXJjZXNfbGlzdDogdHJ1ZQoKIyBEb24ndCBwcmludCB0aGUgbmV3IHNzaCBrZXlzIG9uIHRoZSBjb25zb2xlCm5vX3NzaF9maW5nZXJwcmludHM6IHRydWUKCndyaXRlX2ZpbGVzOgogLSBwYXRoOiAvZXRjL3B1cHBldGxhYnMvcHVwcGV0L3B1cHBldC5jb25mCiAgIG93bmVyOiByb290OnJvb3QKICAgcGVybWlzc2lvbnM6ICcwNDQ0JwogICBjb250ZW50OiB8CiAgICAgW21haW5dCiAgICAgY2VydG5hbWUgPSBiYXNlLnRlc3RpbmcuYnd0c2kuY24KICAgICBlbnZpcm9ubWVudCA9IGNoaW5hcGF5CiAgICAgW2FnZW50XQogICAgIHJ1bmludGVydmFsID0gMTAweQogICAgIHNlcnZlciA9IHB1cHBldC5id3RzaS5jbgogICAgIG5vZGVfbmFtZSA9IGZhY3RlcgogICAgIG5vZGVfbmFtZV9mYWN0ID0gZnFkbgogICAgIHNwbGF5ID0gdHJ1ZQogICAgIHNwbGF5bGltaXQgPSA1bQo=</value>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     </userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: </DescribeInstanceAttributeResponse>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] DEBUG: Request ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ REQUEST POST-SIGN ]-----------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: POST / HTTP/1.1
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Host: ec2.cn-northwest-1.amazonaws.com.cn
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: User-Agent: aws-sdk-go/1.13.32 (go1.9.2; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.7
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Length: 95
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/ec2/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-security-token, Signature=60ac431f06b221bf7fe6d53ee72de1babb1aad5a5a4d17917e4d2f78a7533fef
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: application/x-www-form-urlencoded; charset=utf-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Date: 20180426T110036Z
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Accept-Encoding: gzip
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Action=DescribeInstanceCreditSpecifications&InstanceId.1=i-022a9894321a6d374&Version=2016-11-15
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Response ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 400 Bad Request
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:37 GMT
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <Response><Errors><Error><Code>UnsupportedOperation</Code><Message>The functionality you requested is not available in this region.</Message></Error></Errors><RequestID>53ace3cc-2597-49a0-99b2-3b9f1cb8567d</RequestID></Response>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Validate Response ec2/DescribeInstanceCreditSpecifications failed, not retrying, error UnsupportedOperation: The functionality you requested is not available in this region.
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalApplyPost, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalSequence, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [DEBUG] Uploading remote state to S3: {
  Body: buffer(0xc4203e17d0),
  Bucket: ""bwts-terraform-bucket-chinapay"",
  ContentLength: 20792,
  ContentType: ""application/json"",
  Key: ""cn-northwest-1/riak/terraform.tfstate"",
  ServerSideEncryption: ""AES256""
}
2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Request s3/PutObject Details:
---[ REQUEST POST-SIGN ]-----------------------------
PUT /cn-northwest-1/riak/terraform.tfstate HTTP/1.1
Host: bwts-terraform-bucket-chinapay.s3.cn-northwest-1.amazonaws.com.cn
User-Agent: aws-sdk-go/1.12.75 (go1.10.1; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.6
Content-Length: 20792
Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/s3/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-content-sha256;x-amz-date;x-amz-security-token;x-amz-server-side-encryption, Signature=8aa16110ae06a99b503e1f0546a4d6cf208fdf658ca29420baa2d649cec043e2
Content-Type: application/json
X-Amz-Content-Sha256: 04110e3e4cd97aa3e89cfe2f03487922bfd6b6346ec6dfe3fbe8fad9755e18c2
X-Amz-Date: 20180426T110037Z
X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
X-Amz-Server-Side-Encryption: AES256
Accept-Encoding: gzip

{
    ""version"": 3,
    ""terraform_version"": ""0.11.6"",
    ""serial"": 1,
    ""lineage"": ""b9c3c084-789e-7472-0b18-8698b4afc854"",
    ""modules"": [
        {
            ""path"": [
                ""root""
            ],
            ""outputs"": {},
            ""resources"": {
                ""data.terraform_remote_state.security_groups"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""bastion_host"": ""sg-e29feb8b"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/dev-stack-sgs/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""external_lb_sg_id"": ""sg-a55027cc"",
                            ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                            ""rundeck"": ""sg-b39eeada"",
                            ""stack_it_run_access_sg_id"": ""sg-9d5f28f4"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                },
                ""data.terraform_remote_state.vpc"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/vpc/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                            ""private_subnets"": ""subnet-454c962c,subnet-9722ddec"",
                            ""public_subnets"": ""subnet-5e4d9737,subnet-9022ddeb"",
                            ""vpc_cidr"": ""192.168.0.0/19"",
                            ""vpc_id"": ""vpc-34c61f5d"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""docdb""
            ],
            ""outputs"": {},
            ""resources"": {
                ""aws_instance.riak"": {
                    ""type"": ""aws_instance"",
                    ""depends_on"": [
                        ""data.template_file.cloud-init-riak""
                    ],
                    ""primary"": {
                        ""id"": ""i-022a9894321a6d374"",
                        ""attributes"": {
                            ""ami"": ""ami-6ec1d50c"",
                            ""associate_public_ip_address"": ""false"",
                            ""availability_zone"": ""cn-northwest-1a"",
                            ""disable_api_termination"": ""false"",
                            ""ebs_block_device.#"": ""4"",
                            ""ebs_block_device.3965576335.delete_on_termination"": ""false"",
                            ""ebs_block_device.3965576335.device_name"": ""/dev/xvdd"",
                            ""ebs_block_device.3965576335.encrypted"": ""false"",
                            ""ebs_block_device.3965576335.iops"": ""300"",
                            ""ebs_block_device.3965576335.snapshot_id"": """",
                            ""ebs_block_device.3965576335.volume_id"": ""vol-09cde364159031c5d"",
                            ""ebs_block_device.3965576335.volume_size"": ""100"",
                            ""ebs_block_device.3965576335.volume_type"": ""gp2"",
                            ""ebs_block_device.3986656952.delete_on_termination"": ""false"",
                            ""ebs_block_device.3986656952.device_name"": ""/dev/xvde"",
                            ""ebs_block_device.3986656952.encrypted"": ""false"",
                            ""ebs_block_device.3986656952.iops"": ""300"",
                            ""ebs_block_device.3986656952.snapshot_id"": """",
                            ""ebs_block_device.3986656952.volume_id"": ""vol-09c14e768bdd6dd4b"",
                            ""ebs_block_device.3986656952.volume_size"": ""100"",
                            ""ebs_block_device.3986656952.volume_type"": ""gp2"",
                            ""ebs_block_device.3994770134.delete_on_termination"": ""false"",
                            ""ebs_block_device.3994770134.device_name"": ""/dev/xvdg"",
                            ""ebs_block_device.3994770134.encrypted"": ""false"",
                            ""ebs_block_device.3994770134.iops"": ""300"",
                            ""ebs_block_device.3994770134.snapshot_id"": """",
                            ""ebs_block_device.3994770134.volume_id"": ""vol-0e1b3ff63114f3003"",
                            ""ebs_block_device.3994770134.volume_size"": ""100"",
                            ""ebs_block_device.3994770134.volume_type"": ""gp2"",
                            ""ebs_block_device.4023988449.delete_on_termination"": ""false"",
                            ""ebs_block_device.4023988449.device_name"": ""/dev/xvdf"",
                            ""ebs_block_device.4023988449.encrypted"": ""false"",
                            ""ebs_block_device.4023988449.iops"": ""300"",
                            ""ebs_block_device.4023988449.snapshot_id"": """",
                            ""ebs_block_device.4023988449.volume_id"": ""vol-015467a2fec64cfdd"",
                            ""ebs_block_device.4023988449.volume_size"": ""100"",
                            ""ebs_block_device.4023988449.volume_type"": ""gp2"",
                            ""ebs_optimized"": ""false"",
                            ""ephemeral_block_device.#"": ""0"",
                            ""get_password_data"": ""false"",
                            ""iam_instance_profile"": """",
                            ""id"": ""i-022a9894321a6d374"",
                            ""instance_state"": ""running"",
                            ""instance_type"": ""t2.large"",
                            ""ipv6_addresses.#"": ""0"",
                            ""key_name"": ""pay_china"",
                            ""monitoring"": ""false"",
                            ""network_interface.#"": ""0"",
                            ""network_interface_id"": ""eni-fd55c3a4"",
                            ""placement_group"": """",
                            ""primary_network_interface_id"": ""eni-fd55c3a4"",
                            ""private_dns"": ""ip-192-168-14-135.cn-northwest-1.compute.internal"",
                            ""private_ip"": ""192.168.14.135"",
                            ""public_dns"": """",
                            ""public_ip"": """",
                            ""root_block_device.#"": ""1"",
                            ""root_block_device.0.delete_on_termination"": ""true"",
                            ""root_block_device.0.iops"": ""100"",
                            ""root_block_device.0.volume_id"": ""vol-0884c92d17ea04d83"",
                            ""root_block_device.0.volume_size"": ""20"",
                            ""root_block_device.0.volume_type"": ""gp2"",
                            ""security_groups.#"": ""0"",
                            ""source_dest_check"": ""true"",
                            ""subnet_id"": ""subnet-454c962c"",
                            ""tags.%"": ""9"",
                            ""tags.Decomission_Date"": ""never"",
                            ""tags.Environment"": ""chinapay"",
                            ""tags.Name"": ""docdb.pay.cn-northwest-1.test.bwtsi.cn"",
                            ""tags.Owner"": ""operations"",
                            ""tags.Purpose"": ""Riak instance"",
                            ""tags.Role"": ""docdb"",
                            ""tags.Stackname"": ""pay"",
                            ""tags.Started_By"": ""operations"",
                            ""tags.Warning"": ""Managed by terraform, do not edit"",
                            ""tenancy"": ""default"",
                            ""user_data"": ""f35050bdeefa2a2d9f354c0e699a5f2d7c393365"",
                            ""volume_tags.%"": ""0"",
                            ""vpc_security_group_ids.#"": ""1"",
                            ""vpc_security_group_ids.2301982502"": ""sg-9d5f28f4""
                        },
                        ""meta"": {
                            ""e2bfb730-ecaa-11e6-8f88-34363bc7c4c0"": {
                                ""create"": 600000000000,
                                ""delete"": 1200000000000,
                                ""update"": 600000000000
                            },
                            ""schema_version"": ""1""
                        },
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.aws""
                },
                ""data.template_file.cloud-init-riak"": {
                    ""type"": ""template_file"",
                    ""depends_on"": [],
                    ""primary"": {
                        ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                        ""attributes"": {
                            ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                            ""rendered"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo pay \u003e /etc/tradeshift/stackname\""\n - \""echo docdb-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 docdb-$INSTANCE_ID.cn-northwest-1.test.bwtsi.cn docdb-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac 'dr69ZUGVm0Ep1Eo/xBoOTcefuKVx' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = base.testing.bwtsi.cn\n     environment = chinapay\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""template"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo ${STACK_NAME} \u003e /etc/tradeshift/stackname\""\n - \""echo ${HOSTNAME}-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 ${HOSTNAME}-$INSTANCE_ID.${REGION_DNS} ${HOSTNAME}-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac '${DISK_ENCRYPTION_KEY}' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = ${CERT_NAME}\n     environment = ${ENVIRONMENT}\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""vars.%"": ""6"",
                            ""vars.CERT_NAME"": ""base.testing.bwtsi.cn"",
                            ""vars.DISK_ENCRYPTION_KEY"": ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx"",
                            ""vars.ENVIRONMENT"": ""chinapay"",
                            ""vars.HOSTNAME"": ""docdb"",
                            ""vars.REGION_DNS"": ""cn-northwest-1.test.bwtsi.cn"",
                            ""vars.STACK_NAME"": ""pay""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.template""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""environment-common""
            ],
            ""outputs"": {
                ""cert_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""base.testing.bwtsi.cn""
                },
                ""domain_name_search"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test.bwtsi.cn""
                },
                ""environment_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""chinapay""
                },
                ""environment_shortname"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                },
                ""security_group_name_postfix"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": "".chinapay""
                },
                ""site"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""global-common""
            ],
            ""outputs"": {
                ""all_cidr_eu_west_1"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16,172.25.128.0/21,172.25.120.0/21,172.25.112.0/21,172.31.248.0/21,172.31.240.0/21,172.21.0.0/19,172.19.0.0/19,172.22.0.0/19,172.18.0.0/19""
                },
                ""base_tradeshift_net_account_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""694518486591""
                },
                ""gcsops_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.17.22.143/32""
                },
                ""gcsops_cn_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""54.223.95.7/32,54.223.198.170/32,54.223.211.136/32,52.80.34.103/32""
                },
                ""office_ips"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,178.49.148.100/32,87.243.3.34/32,109.166.189.50/32,78.40.84.83/32,4.53.137.82/32,173.247.199.142/32,58.211.225.90/32,202.181.248.19/32,109.70.48.99/32""
                },
                ""prod_base_tradeshift_net_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""prod.base.tradeshift.net""
                },
                ""prod_base_tradeshift_net_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16""
                },
                ""prod_base_tradeshift_net_vpc_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""vpc-264c9042""
                },
                ""prod_ts_sv_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.50.175.210/32,52.30.44.136/32,52.50.189.21/32""
                },
                ""test_bwtsi_cn_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/19""
                },
                ""test_bwtsi_cn_vpc_private_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.12.0/22,192.168.16.0/22""
                },
                ""test_bwtsi_cn_vpc_public_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/22,192.168.4.0/22""
                },
                ""tradeshift_com_public_zone_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""Z2OX0I8SM94425""
                },
                ""translation_service_clients"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,4.53.137.82/32,173.247.199.142/32,130.185.137.106/32,202.181.248.19/32,52.17.87.187/32,52.30.44.136/32,52.30.58.232/32,52.31.203.95/32,52.49.119.80/32,52.49.49.111/32,52.49.5.171/32,52.50.108.6/32,52.50.175.210/32,52.50.189.21/32,52.50.255.154/32,52.50.91.189/32,54.195.199.108/32,54.78.39.106/32,58.211.225.90/32,89.150.143.118/32,54.222.150.122/32,54.222.194.56/32,109.70.48.99/32""
                },
                ""truebn_org_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""34.253.176.198/32,34.241.59.39/32""
                },
                ""userdata_path"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/modules/eff596488a3055adf7024741dffb9ca1/..""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""regional-common""
            ],
            ""outputs"": {
                ""availability_zones"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1a,cn-northwest-1b""
                },
                ""backend_region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""base_ami_1604"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-6ec1d50c""
                },
                ""base_ami_1604_zfs"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-edf8ec8f""
                },
                ""chinapay_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""key_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""pay_china""
                },
                ""region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""region_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""region_env"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        }
    ]
}

-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go] DEBUG: Response s3/PutObject Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 200 OK
Connection: close
Content-Length: 0
Date: Thu, 26 Apr 2018 11:00:39 GMT
Etag: ""807c608ab629b9b73914da058c923c20""
Server: AmazonS3
X-Amz-Id-2: 5Af+DuU/y0Ngtkb6wCq1R0Oz+ZrOYi4apbPsCZTSlwhSqnqBNB64rFL4HfBG6WB9GETdRmQyKnw=
X-Amz-Request-Id: 7984823D8787C039
X-Amz-Server-Side-Encryption: AES256


-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go]
2018/04/26 19:00:38 [DEBUG] plugin: waiting for all plugin processes to complete...

Error: Error applying plan:

1 error(s) occurred:

* module.docdb.aws_instance.riak: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d

2018-04-26T19:00:38.547+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:38 [ERR] plugin: plugin server: accept unix /var/folders/k0/hk5r4k696x901sk4mh_vwcg40000gn/T/plugin243311916: use of closed network connection
Terraform does not automatically rollback in the face of errors.
Instead, your Terraform state file has been partially updated with
any resources that successfully completed. Please address the error
above and apply again to incrementally change your infrastructure.


2018-04-26T19:00:38.550+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-template_v1.0.0_x4
2018-04-26T19:00:38.551+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-aws_v1.16.0_x4
2018-04-26T19:00:38.555+0800 [DEBUG] plugin: plugin process exited: path=/usr/local/bin/terraform-provider-alicloud

```
# Expected Behavior
can create aws instance in China AWS
# Actual Behavior
I can create aws instance in China AWS with provider.aws v1.15.0
but I can't create aws instance with provider.aws v1.16.0",-side-encryption,https://github.com/hashicorp/terraform-provider-aws
41,4359,"# Terraform Version

Terraform v0.11.6
provider.aws v1.16.0

# Affected Resource(s)
aws_instance_ec2
# Terraform Configuration Files
module ""docdb"" {
  source = ""../../../../../../tradeshift-puppet/terraform/modules/aws/instances-cn/riak""
  environment = ""${var.pull_request}""
  stackname = ""${var.stackname}""
  role = ""docdb""
  owner = ""${var.owner}""
  decomission_date = ""${var.decomission_date}""
  instance_type = ""t2.large""
  instance_ami = ""${module.regional-common.base_ami_1604}""
  instance_key_name = ""${module.regional-common.key_name}""
  disable_api_termination = false
  ebs_volume_size = ""100""
  ebs_delete_on_termination = ""false""
  ebs_optimized = false
  vpc_security_groups = ""${data.terraform_remote_state.security_groups.stack_it_run_access_sg_id}""
  vpc_subnets = ""${data.terraform_remote_state.vpc.private_subnets}""
  postfix = "".${var.stackname}""
  dns_region_name = ""${module.regional-common.region_dns}""
  disk_encryption_key = ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx""
  count = ""1""
  cert_name = ""${module.environment-common.cert_name}""
}

# Debug Output
```
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 200 OK
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: text/xml;charset=UTF-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:36 GMT
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Vary: Accept-Encoding
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <DescribeInstanceAttributeResponse xmlns=""http://ec2.amazonaws.com/doc/2016-11-15/"">
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <requestId>35e6cd4e-cb70-4016-a250-53f0880cc9be</requestId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <instanceId>i-022a9894321a6d374</instanceId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:         <value>I2Nsb3VkLWNvbmZpZwptb3VudHM6CiAtIFtlcGhlbWVyYWwwLCBudWxsXQoKcHJlc2VydmVfaG9zdG5hbWU6IHRydWUKbWFuYWdlX2V0Y19ob3N0czogZmFsc2UKCmJvb3RjbWQ6CiAtICJlY2hvIHBheSA+IC9ldGMvdHJhZGVzaGlmdC9zdGFja25hbWUiCiAtICJlY2hvIGRvY2RiLSRJTlNUQU5DRV9JRCA+IC9ldGMvaG9zdG5hbWU7IGhvc3RuYW1lIC1GIC9ldGMvaG9zdG5hbWUiCiAtICJzZWQgLWkgLWUgJy9eMTI3LjAuMC4xL2QnIC9ldGMvaG9zdHM7IGVjaG8gMTI3LjAuMC4xIGRvY2RiLSRJTlNUQU5DRV9JRC5jbi1ub3J0aHdlc3QtMS50ZXN0LmJ3dHNpLmNuIGRvY2RiLSRJTlNUQU5DRV9JRCBsb2NhbGhvc3QgPj4gL2V0Yy9ob3N0cyIKICMgRGlzayBlbmNyeXB0aW9uIGtleSBmb3IgZXBoZW1lcmFsIGRpc2sgZHJpdmVzLCBzYXZlZCB0byByYW0gZHJpdmUKICMgVGhlIHNlZCBwYXJ0IHJlbW92ZXMgdGhlIChzdGRpbik9IG91dHB1dCBmcm9tIG9wZW5zc2wgZGdzdAogLSAiZWNobyAkSU5TVEFOQ0VfSUQgfCBvcGVuc3NsIGRnc3QgLXNoYTI1NiAtaG1hYyAnZHI2OVpVR1ZtMEVwMUVvL3hCb09UY2VmdUtWeCcgfCBzZWQgJ3MvXi4qPSAvLycgPiAvZGV2L3NobS9lbmNyeXB0ZWQtZGlzay5sdWtzLmtleSAmJiBjaG1vZCA0MDAgL2Rldi9zaG0vZW5jcnlwdGVkLWRpc2subHVrcy5rZXkiCgojIERvbid0IG92ZXJyaWRlIG91ciBhcHQgcmVwb3NpdG9yeSBsaXN0IG9uIGZpcnN0IGJvb3QKYXB0X3ByZXNlcnZlX3NvdXJjZXNfbGlzdDogdHJ1ZQoKIyBEb24ndCBwcmludCB0aGUgbmV3IHNzaCBrZXlzIG9uIHRoZSBjb25zb2xlCm5vX3NzaF9maW5nZXJwcmludHM6IHRydWUKCndyaXRlX2ZpbGVzOgogLSBwYXRoOiAvZXRjL3B1cHBldGxhYnMvcHVwcGV0L3B1cHBldC5jb25mCiAgIG93bmVyOiByb290OnJvb3QKICAgcGVybWlzc2lvbnM6ICcwNDQ0JwogICBjb250ZW50OiB8CiAgICAgW21haW5dCiAgICAgY2VydG5hbWUgPSBiYXNlLnRlc3RpbmcuYnd0c2kuY24KICAgICBlbnZpcm9ubWVudCA9IGNoaW5hcGF5CiAgICAgW2FnZW50XQogICAgIHJ1bmludGVydmFsID0gMTAweQogICAgIHNlcnZlciA9IHB1cHBldC5id3RzaS5jbgogICAgIG5vZGVfbmFtZSA9IGZhY3RlcgogICAgIG5vZGVfbmFtZV9mYWN0ID0gZnFkbgogICAgIHNwbGF5ID0gdHJ1ZQogICAgIHNwbGF5bGltaXQgPSA1bQo=</value>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     </userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: </DescribeInstanceAttributeResponse>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] DEBUG: Request ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ REQUEST POST-SIGN ]-----------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: POST / HTTP/1.1
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Host: ec2.cn-northwest-1.amazonaws.com.cn
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: User-Agent: aws-sdk-go/1.13.32 (go1.9.2; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.7
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Length: 95
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/ec2/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-security-token, Signature=60ac431f06b221bf7fe6d53ee72de1babb1aad5a5a4d17917e4d2f78a7533fef
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: application/x-www-form-urlencoded; charset=utf-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Date: 20180426T110036Z
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Accept-Encoding: gzip
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Action=DescribeInstanceCreditSpecifications&InstanceId.1=i-022a9894321a6d374&Version=2016-11-15
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Response ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 400 Bad Request
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:37 GMT
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <Response><Errors><Error><Code>UnsupportedOperation</Code><Message>The functionality you requested is not available in this region.</Message></Error></Errors><RequestID>53ace3cc-2597-49a0-99b2-3b9f1cb8567d</RequestID></Response>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Validate Response ec2/DescribeInstanceCreditSpecifications failed, not retrying, error UnsupportedOperation: The functionality you requested is not available in this region.
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalApplyPost, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalSequence, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [DEBUG] Uploading remote state to S3: {
  Body: buffer(0xc4203e17d0),
  Bucket: ""bwts-terraform-bucket-chinapay"",
  ContentLength: 20792,
  ContentType: ""application/json"",
  Key: ""cn-northwest-1/riak/terraform.tfstate"",
  ServerSideEncryption: ""AES256""
}
2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Request s3/PutObject Details:
---[ REQUEST POST-SIGN ]-----------------------------
PUT /cn-northwest-1/riak/terraform.tfstate HTTP/1.1
Host: bwts-terraform-bucket-chinapay.s3.cn-northwest-1.amazonaws.com.cn
User-Agent: aws-sdk-go/1.12.75 (go1.10.1; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.6
Content-Length: 20792
Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/s3/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-content-sha256;x-amz-date;x-amz-security-token;x-amz-server-side-encryption, Signature=8aa16110ae06a99b503e1f0546a4d6cf208fdf658ca29420baa2d649cec043e2
Content-Type: application/json
X-Amz-Content-Sha256: 04110e3e4cd97aa3e89cfe2f03487922bfd6b6346ec6dfe3fbe8fad9755e18c2
X-Amz-Date: 20180426T110037Z
X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
X-Amz-Server-Side-Encryption: AES256
Accept-Encoding: gzip

{
    ""version"": 3,
    ""terraform_version"": ""0.11.6"",
    ""serial"": 1,
    ""lineage"": ""b9c3c084-789e-7472-0b18-8698b4afc854"",
    ""modules"": [
        {
            ""path"": [
                ""root""
            ],
            ""outputs"": {},
            ""resources"": {
                ""data.terraform_remote_state.security_groups"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""bastion_host"": ""sg-e29feb8b"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/dev-stack-sgs/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""external_lb_sg_id"": ""sg-a55027cc"",
                            ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                            ""rundeck"": ""sg-b39eeada"",
                            ""stack_it_run_access_sg_id"": ""sg-9d5f28f4"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                },
                ""data.terraform_remote_state.vpc"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/vpc/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                            ""private_subnets"": ""subnet-454c962c,subnet-9722ddec"",
                            ""public_subnets"": ""subnet-5e4d9737,subnet-9022ddeb"",
                            ""vpc_cidr"": ""192.168.0.0/19"",
                            ""vpc_id"": ""vpc-34c61f5d"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""docdb""
            ],
            ""outputs"": {},
            ""resources"": {
                ""aws_instance.riak"": {
                    ""type"": ""aws_instance"",
                    ""depends_on"": [
                        ""data.template_file.cloud-init-riak""
                    ],
                    ""primary"": {
                        ""id"": ""i-022a9894321a6d374"",
                        ""attributes"": {
                            ""ami"": ""ami-6ec1d50c"",
                            ""associate_public_ip_address"": ""false"",
                            ""availability_zone"": ""cn-northwest-1a"",
                            ""disable_api_termination"": ""false"",
                            ""ebs_block_device.#"": ""4"",
                            ""ebs_block_device.3965576335.delete_on_termination"": ""false"",
                            ""ebs_block_device.3965576335.device_name"": ""/dev/xvdd"",
                            ""ebs_block_device.3965576335.encrypted"": ""false"",
                            ""ebs_block_device.3965576335.iops"": ""300"",
                            ""ebs_block_device.3965576335.snapshot_id"": """",
                            ""ebs_block_device.3965576335.volume_id"": ""vol-09cde364159031c5d"",
                            ""ebs_block_device.3965576335.volume_size"": ""100"",
                            ""ebs_block_device.3965576335.volume_type"": ""gp2"",
                            ""ebs_block_device.3986656952.delete_on_termination"": ""false"",
                            ""ebs_block_device.3986656952.device_name"": ""/dev/xvde"",
                            ""ebs_block_device.3986656952.encrypted"": ""false"",
                            ""ebs_block_device.3986656952.iops"": ""300"",
                            ""ebs_block_device.3986656952.snapshot_id"": """",
                            ""ebs_block_device.3986656952.volume_id"": ""vol-09c14e768bdd6dd4b"",
                            ""ebs_block_device.3986656952.volume_size"": ""100"",
                            ""ebs_block_device.3986656952.volume_type"": ""gp2"",
                            ""ebs_block_device.3994770134.delete_on_termination"": ""false"",
                            ""ebs_block_device.3994770134.device_name"": ""/dev/xvdg"",
                            ""ebs_block_device.3994770134.encrypted"": ""false"",
                            ""ebs_block_device.3994770134.iops"": ""300"",
                            ""ebs_block_device.3994770134.snapshot_id"": """",
                            ""ebs_block_device.3994770134.volume_id"": ""vol-0e1b3ff63114f3003"",
                            ""ebs_block_device.3994770134.volume_size"": ""100"",
                            ""ebs_block_device.3994770134.volume_type"": ""gp2"",
                            ""ebs_block_device.4023988449.delete_on_termination"": ""false"",
                            ""ebs_block_device.4023988449.device_name"": ""/dev/xvdf"",
                            ""ebs_block_device.4023988449.encrypted"": ""false"",
                            ""ebs_block_device.4023988449.iops"": ""300"",
                            ""ebs_block_device.4023988449.snapshot_id"": """",
                            ""ebs_block_device.4023988449.volume_id"": ""vol-015467a2fec64cfdd"",
                            ""ebs_block_device.4023988449.volume_size"": ""100"",
                            ""ebs_block_device.4023988449.volume_type"": ""gp2"",
                            ""ebs_optimized"": ""false"",
                            ""ephemeral_block_device.#"": ""0"",
                            ""get_password_data"": ""false"",
                            ""iam_instance_profile"": """",
                            ""id"": ""i-022a9894321a6d374"",
                            ""instance_state"": ""running"",
                            ""instance_type"": ""t2.large"",
                            ""ipv6_addresses.#"": ""0"",
                            ""key_name"": ""pay_china"",
                            ""monitoring"": ""false"",
                            ""network_interface.#"": ""0"",
                            ""network_interface_id"": ""eni-fd55c3a4"",
                            ""placement_group"": """",
                            ""primary_network_interface_id"": ""eni-fd55c3a4"",
                            ""private_dns"": ""ip-192-168-14-135.cn-northwest-1.compute.internal"",
                            ""private_ip"": ""192.168.14.135"",
                            ""public_dns"": """",
                            ""public_ip"": """",
                            ""root_block_device.#"": ""1"",
                            ""root_block_device.0.delete_on_termination"": ""true"",
                            ""root_block_device.0.iops"": ""100"",
                            ""root_block_device.0.volume_id"": ""vol-0884c92d17ea04d83"",
                            ""root_block_device.0.volume_size"": ""20"",
                            ""root_block_device.0.volume_type"": ""gp2"",
                            ""security_groups.#"": ""0"",
                            ""source_dest_check"": ""true"",
                            ""subnet_id"": ""subnet-454c962c"",
                            ""tags.%"": ""9"",
                            ""tags.Decomission_Date"": ""never"",
                            ""tags.Environment"": ""chinapay"",
                            ""tags.Name"": ""docdb.pay.cn-northwest-1.test.bwtsi.cn"",
                            ""tags.Owner"": ""operations"",
                            ""tags.Purpose"": ""Riak instance"",
                            ""tags.Role"": ""docdb"",
                            ""tags.Stackname"": ""pay"",
                            ""tags.Started_By"": ""operations"",
                            ""tags.Warning"": ""Managed by terraform, do not edit"",
                            ""tenancy"": ""default"",
                            ""user_data"": ""f35050bdeefa2a2d9f354c0e699a5f2d7c393365"",
                            ""volume_tags.%"": ""0"",
                            ""vpc_security_group_ids.#"": ""1"",
                            ""vpc_security_group_ids.2301982502"": ""sg-9d5f28f4""
                        },
                        ""meta"": {
                            ""e2bfb730-ecaa-11e6-8f88-34363bc7c4c0"": {
                                ""create"": 600000000000,
                                ""delete"": 1200000000000,
                                ""update"": 600000000000
                            },
                            ""schema_version"": ""1""
                        },
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.aws""
                },
                ""data.template_file.cloud-init-riak"": {
                    ""type"": ""template_file"",
                    ""depends_on"": [],
                    ""primary"": {
                        ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                        ""attributes"": {
                            ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                            ""rendered"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo pay \u003e /etc/tradeshift/stackname\""\n - \""echo docdb-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 docdb-$INSTANCE_ID.cn-northwest-1.test.bwtsi.cn docdb-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac 'dr69ZUGVm0Ep1Eo/xBoOTcefuKVx' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = base.testing.bwtsi.cn\n     environment = chinapay\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""template"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo ${STACK_NAME} \u003e /etc/tradeshift/stackname\""\n - \""echo ${HOSTNAME}-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 ${HOSTNAME}-$INSTANCE_ID.${REGION_DNS} ${HOSTNAME}-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac '${DISK_ENCRYPTION_KEY}' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = ${CERT_NAME}\n     environment = ${ENVIRONMENT}\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""vars.%"": ""6"",
                            ""vars.CERT_NAME"": ""base.testing.bwtsi.cn"",
                            ""vars.DISK_ENCRYPTION_KEY"": ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx"",
                            ""vars.ENVIRONMENT"": ""chinapay"",
                            ""vars.HOSTNAME"": ""docdb"",
                            ""vars.REGION_DNS"": ""cn-northwest-1.test.bwtsi.cn"",
                            ""vars.STACK_NAME"": ""pay""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.template""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""environment-common""
            ],
            ""outputs"": {
                ""cert_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""base.testing.bwtsi.cn""
                },
                ""domain_name_search"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test.bwtsi.cn""
                },
                ""environment_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""chinapay""
                },
                ""environment_shortname"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                },
                ""security_group_name_postfix"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": "".chinapay""
                },
                ""site"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""global-common""
            ],
            ""outputs"": {
                ""all_cidr_eu_west_1"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16,172.25.128.0/21,172.25.120.0/21,172.25.112.0/21,172.31.248.0/21,172.31.240.0/21,172.21.0.0/19,172.19.0.0/19,172.22.0.0/19,172.18.0.0/19""
                },
                ""base_tradeshift_net_account_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""694518486591""
                },
                ""gcsops_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.17.22.143/32""
                },
                ""gcsops_cn_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""54.223.95.7/32,54.223.198.170/32,54.223.211.136/32,52.80.34.103/32""
                },
                ""office_ips"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,178.49.148.100/32,87.243.3.34/32,109.166.189.50/32,78.40.84.83/32,4.53.137.82/32,173.247.199.142/32,58.211.225.90/32,202.181.248.19/32,109.70.48.99/32""
                },
                ""prod_base_tradeshift_net_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""prod.base.tradeshift.net""
                },
                ""prod_base_tradeshift_net_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16""
                },
                ""prod_base_tradeshift_net_vpc_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""vpc-264c9042""
                },
                ""prod_ts_sv_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.50.175.210/32,52.30.44.136/32,52.50.189.21/32""
                },
                ""test_bwtsi_cn_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/19""
                },
                ""test_bwtsi_cn_vpc_private_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.12.0/22,192.168.16.0/22""
                },
                ""test_bwtsi_cn_vpc_public_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/22,192.168.4.0/22""
                },
                ""tradeshift_com_public_zone_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""Z2OX0I8SM94425""
                },
                ""translation_service_clients"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,4.53.137.82/32,173.247.199.142/32,130.185.137.106/32,202.181.248.19/32,52.17.87.187/32,52.30.44.136/32,52.30.58.232/32,52.31.203.95/32,52.49.119.80/32,52.49.49.111/32,52.49.5.171/32,52.50.108.6/32,52.50.175.210/32,52.50.189.21/32,52.50.255.154/32,52.50.91.189/32,54.195.199.108/32,54.78.39.106/32,58.211.225.90/32,89.150.143.118/32,54.222.150.122/32,54.222.194.56/32,109.70.48.99/32""
                },
                ""truebn_org_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""34.253.176.198/32,34.241.59.39/32""
                },
                ""userdata_path"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/modules/eff596488a3055adf7024741dffb9ca1/..""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""regional-common""
            ],
            ""outputs"": {
                ""availability_zones"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1a,cn-northwest-1b""
                },
                ""backend_region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""base_ami_1604"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-6ec1d50c""
                },
                ""base_ami_1604_zfs"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-edf8ec8f""
                },
                ""chinapay_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""key_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""pay_china""
                },
                ""region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""region_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""region_env"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        }
    ]
}

-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go] DEBUG: Response s3/PutObject Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 200 OK
Connection: close
Content-Length: 0
Date: Thu, 26 Apr 2018 11:00:39 GMT
Etag: ""807c608ab629b9b73914da058c923c20""
Server: AmazonS3
X-Amz-Id-2: 5Af+DuU/y0Ngtkb6wCq1R0Oz+ZrOYi4apbPsCZTSlwhSqnqBNB64rFL4HfBG6WB9GETdRmQyKnw=
X-Amz-Request-Id: 7984823D8787C039
X-Amz-Server-Side-Encryption: AES256


-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go]
2018/04/26 19:00:38 [DEBUG] plugin: waiting for all plugin processes to complete...

Error: Error applying plan:

1 error(s) occurred:

* module.docdb.aws_instance.riak: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d

2018-04-26T19:00:38.547+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:38 [ERR] plugin: plugin server: accept unix /var/folders/k0/hk5r4k696x901sk4mh_vwcg40000gn/T/plugin243311916: use of closed network connection
Terraform does not automatically rollback in the face of errors.
Instead, your Terraform state file has been partially updated with
any resources that successfully completed. Please address the error
above and apply again to incrementally change your infrastructure.


2018-04-26T19:00:38.550+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-template_v1.0.0_x4
2018-04-26T19:00:38.551+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-aws_v1.16.0_x4
2018-04-26T19:00:38.555+0800 [DEBUG] plugin: plugin process exited: path=/usr/local/bin/terraform-provider-alicloud

```
# Expected Behavior
can create aws instance in China AWS
# Actual Behavior
I can create aws instance in China AWS with provider.aws v1.15.0
but I can't create aws instance with provider.aws v1.16.0",yqOKaSKBAunC9koGEWSi+,https://github.com/hashicorp/terraform-provider-aws
42,4359,"# Terraform Version

Terraform v0.11.6
provider.aws v1.16.0

# Affected Resource(s)
aws_instance_ec2
# Terraform Configuration Files
module ""docdb"" {
  source = ""../../../../../../tradeshift-puppet/terraform/modules/aws/instances-cn/riak""
  environment = ""${var.pull_request}""
  stackname = ""${var.stackname}""
  role = ""docdb""
  owner = ""${var.owner}""
  decomission_date = ""${var.decomission_date}""
  instance_type = ""t2.large""
  instance_ami = ""${module.regional-common.base_ami_1604}""
  instance_key_name = ""${module.regional-common.key_name}""
  disable_api_termination = false
  ebs_volume_size = ""100""
  ebs_delete_on_termination = ""false""
  ebs_optimized = false
  vpc_security_groups = ""${data.terraform_remote_state.security_groups.stack_it_run_access_sg_id}""
  vpc_subnets = ""${data.terraform_remote_state.vpc.private_subnets}""
  postfix = "".${var.stackname}""
  dns_region_name = ""${module.regional-common.region_dns}""
  disk_encryption_key = ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx""
  count = ""1""
  cert_name = ""${module.environment-common.cert_name}""
}

# Debug Output
```
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 200 OK
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: text/xml;charset=UTF-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:36 GMT
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Vary: Accept-Encoding
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <DescribeInstanceAttributeResponse xmlns=""http://ec2.amazonaws.com/doc/2016-11-15/"">
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <requestId>35e6cd4e-cb70-4016-a250-53f0880cc9be</requestId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <instanceId>i-022a9894321a6d374</instanceId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:         <value>I2Nsb3VkLWNvbmZpZwptb3VudHM6CiAtIFtlcGhlbWVyYWwwLCBudWxsXQoKcHJlc2VydmVfaG9zdG5hbWU6IHRydWUKbWFuYWdlX2V0Y19ob3N0czogZmFsc2UKCmJvb3RjbWQ6CiAtICJlY2hvIHBheSA+IC9ldGMvdHJhZGVzaGlmdC9zdGFja25hbWUiCiAtICJlY2hvIGRvY2RiLSRJTlNUQU5DRV9JRCA+IC9ldGMvaG9zdG5hbWU7IGhvc3RuYW1lIC1GIC9ldGMvaG9zdG5hbWUiCiAtICJzZWQgLWkgLWUgJy9eMTI3LjAuMC4xL2QnIC9ldGMvaG9zdHM7IGVjaG8gMTI3LjAuMC4xIGRvY2RiLSRJTlNUQU5DRV9JRC5jbi1ub3J0aHdlc3QtMS50ZXN0LmJ3dHNpLmNuIGRvY2RiLSRJTlNUQU5DRV9JRCBsb2NhbGhvc3QgPj4gL2V0Yy9ob3N0cyIKICMgRGlzayBlbmNyeXB0aW9uIGtleSBmb3IgZXBoZW1lcmFsIGRpc2sgZHJpdmVzLCBzYXZlZCB0byByYW0gZHJpdmUKICMgVGhlIHNlZCBwYXJ0IHJlbW92ZXMgdGhlIChzdGRpbik9IG91dHB1dCBmcm9tIG9wZW5zc2wgZGdzdAogLSAiZWNobyAkSU5TVEFOQ0VfSUQgfCBvcGVuc3NsIGRnc3QgLXNoYTI1NiAtaG1hYyAnZHI2OVpVR1ZtMEVwMUVvL3hCb09UY2VmdUtWeCcgfCBzZWQgJ3MvXi4qPSAvLycgPiAvZGV2L3NobS9lbmNyeXB0ZWQtZGlzay5sdWtzLmtleSAmJiBjaG1vZCA0MDAgL2Rldi9zaG0vZW5jcnlwdGVkLWRpc2subHVrcy5rZXkiCgojIERvbid0IG92ZXJyaWRlIG91ciBhcHQgcmVwb3NpdG9yeSBsaXN0IG9uIGZpcnN0IGJvb3QKYXB0X3ByZXNlcnZlX3NvdXJjZXNfbGlzdDogdHJ1ZQoKIyBEb24ndCBwcmludCB0aGUgbmV3IHNzaCBrZXlzIG9uIHRoZSBjb25zb2xlCm5vX3NzaF9maW5nZXJwcmludHM6IHRydWUKCndyaXRlX2ZpbGVzOgogLSBwYXRoOiAvZXRjL3B1cHBldGxhYnMvcHVwcGV0L3B1cHBldC5jb25mCiAgIG93bmVyOiByb290OnJvb3QKICAgcGVybWlzc2lvbnM6ICcwNDQ0JwogICBjb250ZW50OiB8CiAgICAgW21haW5dCiAgICAgY2VydG5hbWUgPSBiYXNlLnRlc3RpbmcuYnd0c2kuY24KICAgICBlbnZpcm9ubWVudCA9IGNoaW5hcGF5CiAgICAgW2FnZW50XQogICAgIHJ1bmludGVydmFsID0gMTAweQogICAgIHNlcnZlciA9IHB1cHBldC5id3RzaS5jbgogICAgIG5vZGVfbmFtZSA9IGZhY3RlcgogICAgIG5vZGVfbmFtZV9mYWN0ID0gZnFkbgogICAgIHNwbGF5ID0gdHJ1ZQogICAgIHNwbGF5bGltaXQgPSA1bQo=</value>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     </userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: </DescribeInstanceAttributeResponse>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] DEBUG: Request ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ REQUEST POST-SIGN ]-----------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: POST / HTTP/1.1
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Host: ec2.cn-northwest-1.amazonaws.com.cn
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: User-Agent: aws-sdk-go/1.13.32 (go1.9.2; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.7
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Length: 95
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/ec2/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-security-token, Signature=60ac431f06b221bf7fe6d53ee72de1babb1aad5a5a4d17917e4d2f78a7533fef
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: application/x-www-form-urlencoded; charset=utf-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Date: 20180426T110036Z
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Accept-Encoding: gzip
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Action=DescribeInstanceCreditSpecifications&InstanceId.1=i-022a9894321a6d374&Version=2016-11-15
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Response ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 400 Bad Request
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:37 GMT
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <Response><Errors><Error><Code>UnsupportedOperation</Code><Message>The functionality you requested is not available in this region.</Message></Error></Errors><RequestID>53ace3cc-2597-49a0-99b2-3b9f1cb8567d</RequestID></Response>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Validate Response ec2/DescribeInstanceCreditSpecifications failed, not retrying, error UnsupportedOperation: The functionality you requested is not available in this region.
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalApplyPost, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalSequence, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [DEBUG] Uploading remote state to S3: {
  Body: buffer(0xc4203e17d0),
  Bucket: ""bwts-terraform-bucket-chinapay"",
  ContentLength: 20792,
  ContentType: ""application/json"",
  Key: ""cn-northwest-1/riak/terraform.tfstate"",
  ServerSideEncryption: ""AES256""
}
2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Request s3/PutObject Details:
---[ REQUEST POST-SIGN ]-----------------------------
PUT /cn-northwest-1/riak/terraform.tfstate HTTP/1.1
Host: bwts-terraform-bucket-chinapay.s3.cn-northwest-1.amazonaws.com.cn
User-Agent: aws-sdk-go/1.12.75 (go1.10.1; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.6
Content-Length: 20792
Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/s3/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-content-sha256;x-amz-date;x-amz-security-token;x-amz-server-side-encryption, Signature=8aa16110ae06a99b503e1f0546a4d6cf208fdf658ca29420baa2d649cec043e2
Content-Type: application/json
X-Amz-Content-Sha256: 04110e3e4cd97aa3e89cfe2f03487922bfd6b6346ec6dfe3fbe8fad9755e18c2
X-Amz-Date: 20180426T110037Z
X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
X-Amz-Server-Side-Encryption: AES256
Accept-Encoding: gzip

{
    ""version"": 3,
    ""terraform_version"": ""0.11.6"",
    ""serial"": 1,
    ""lineage"": ""b9c3c084-789e-7472-0b18-8698b4afc854"",
    ""modules"": [
        {
            ""path"": [
                ""root""
            ],
            ""outputs"": {},
            ""resources"": {
                ""data.terraform_remote_state.security_groups"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""bastion_host"": ""sg-e29feb8b"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/dev-stack-sgs/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""external_lb_sg_id"": ""sg-a55027cc"",
                            ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                            ""rundeck"": ""sg-b39eeada"",
                            ""stack_it_run_access_sg_id"": ""sg-9d5f28f4"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                },
                ""data.terraform_remote_state.vpc"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/vpc/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                            ""private_subnets"": ""subnet-454c962c,subnet-9722ddec"",
                            ""public_subnets"": ""subnet-5e4d9737,subnet-9022ddeb"",
                            ""vpc_cidr"": ""192.168.0.0/19"",
                            ""vpc_id"": ""vpc-34c61f5d"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""docdb""
            ],
            ""outputs"": {},
            ""resources"": {
                ""aws_instance.riak"": {
                    ""type"": ""aws_instance"",
                    ""depends_on"": [
                        ""data.template_file.cloud-init-riak""
                    ],
                    ""primary"": {
                        ""id"": ""i-022a9894321a6d374"",
                        ""attributes"": {
                            ""ami"": ""ami-6ec1d50c"",
                            ""associate_public_ip_address"": ""false"",
                            ""availability_zone"": ""cn-northwest-1a"",
                            ""disable_api_termination"": ""false"",
                            ""ebs_block_device.#"": ""4"",
                            ""ebs_block_device.3965576335.delete_on_termination"": ""false"",
                            ""ebs_block_device.3965576335.device_name"": ""/dev/xvdd"",
                            ""ebs_block_device.3965576335.encrypted"": ""false"",
                            ""ebs_block_device.3965576335.iops"": ""300"",
                            ""ebs_block_device.3965576335.snapshot_id"": """",
                            ""ebs_block_device.3965576335.volume_id"": ""vol-09cde364159031c5d"",
                            ""ebs_block_device.3965576335.volume_size"": ""100"",
                            ""ebs_block_device.3965576335.volume_type"": ""gp2"",
                            ""ebs_block_device.3986656952.delete_on_termination"": ""false"",
                            ""ebs_block_device.3986656952.device_name"": ""/dev/xvde"",
                            ""ebs_block_device.3986656952.encrypted"": ""false"",
                            ""ebs_block_device.3986656952.iops"": ""300"",
                            ""ebs_block_device.3986656952.snapshot_id"": """",
                            ""ebs_block_device.3986656952.volume_id"": ""vol-09c14e768bdd6dd4b"",
                            ""ebs_block_device.3986656952.volume_size"": ""100"",
                            ""ebs_block_device.3986656952.volume_type"": ""gp2"",
                            ""ebs_block_device.3994770134.delete_on_termination"": ""false"",
                            ""ebs_block_device.3994770134.device_name"": ""/dev/xvdg"",
                            ""ebs_block_device.3994770134.encrypted"": ""false"",
                            ""ebs_block_device.3994770134.iops"": ""300"",
                            ""ebs_block_device.3994770134.snapshot_id"": """",
                            ""ebs_block_device.3994770134.volume_id"": ""vol-0e1b3ff63114f3003"",
                            ""ebs_block_device.3994770134.volume_size"": ""100"",
                            ""ebs_block_device.3994770134.volume_type"": ""gp2"",
                            ""ebs_block_device.4023988449.delete_on_termination"": ""false"",
                            ""ebs_block_device.4023988449.device_name"": ""/dev/xvdf"",
                            ""ebs_block_device.4023988449.encrypted"": ""false"",
                            ""ebs_block_device.4023988449.iops"": ""300"",
                            ""ebs_block_device.4023988449.snapshot_id"": """",
                            ""ebs_block_device.4023988449.volume_id"": ""vol-015467a2fec64cfdd"",
                            ""ebs_block_device.4023988449.volume_size"": ""100"",
                            ""ebs_block_device.4023988449.volume_type"": ""gp2"",
                            ""ebs_optimized"": ""false"",
                            ""ephemeral_block_device.#"": ""0"",
                            ""get_password_data"": ""false"",
                            ""iam_instance_profile"": """",
                            ""id"": ""i-022a9894321a6d374"",
                            ""instance_state"": ""running"",
                            ""instance_type"": ""t2.large"",
                            ""ipv6_addresses.#"": ""0"",
                            ""key_name"": ""pay_china"",
                            ""monitoring"": ""false"",
                            ""network_interface.#"": ""0"",
                            ""network_interface_id"": ""eni-fd55c3a4"",
                            ""placement_group"": """",
                            ""primary_network_interface_id"": ""eni-fd55c3a4"",
                            ""private_dns"": ""ip-192-168-14-135.cn-northwest-1.compute.internal"",
                            ""private_ip"": ""192.168.14.135"",
                            ""public_dns"": """",
                            ""public_ip"": """",
                            ""root_block_device.#"": ""1"",
                            ""root_block_device.0.delete_on_termination"": ""true"",
                            ""root_block_device.0.iops"": ""100"",
                            ""root_block_device.0.volume_id"": ""vol-0884c92d17ea04d83"",
                            ""root_block_device.0.volume_size"": ""20"",
                            ""root_block_device.0.volume_type"": ""gp2"",
                            ""security_groups.#"": ""0"",
                            ""source_dest_check"": ""true"",
                            ""subnet_id"": ""subnet-454c962c"",
                            ""tags.%"": ""9"",
                            ""tags.Decomission_Date"": ""never"",
                            ""tags.Environment"": ""chinapay"",
                            ""tags.Name"": ""docdb.pay.cn-northwest-1.test.bwtsi.cn"",
                            ""tags.Owner"": ""operations"",
                            ""tags.Purpose"": ""Riak instance"",
                            ""tags.Role"": ""docdb"",
                            ""tags.Stackname"": ""pay"",
                            ""tags.Started_By"": ""operations"",
                            ""tags.Warning"": ""Managed by terraform, do not edit"",
                            ""tenancy"": ""default"",
                            ""user_data"": ""f35050bdeefa2a2d9f354c0e699a5f2d7c393365"",
                            ""volume_tags.%"": ""0"",
                            ""vpc_security_group_ids.#"": ""1"",
                            ""vpc_security_group_ids.2301982502"": ""sg-9d5f28f4""
                        },
                        ""meta"": {
                            ""e2bfb730-ecaa-11e6-8f88-34363bc7c4c0"": {
                                ""create"": 600000000000,
                                ""delete"": 1200000000000,
                                ""update"": 600000000000
                            },
                            ""schema_version"": ""1""
                        },
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.aws""
                },
                ""data.template_file.cloud-init-riak"": {
                    ""type"": ""template_file"",
                    ""depends_on"": [],
                    ""primary"": {
                        ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                        ""attributes"": {
                            ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                            ""rendered"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo pay \u003e /etc/tradeshift/stackname\""\n - \""echo docdb-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 docdb-$INSTANCE_ID.cn-northwest-1.test.bwtsi.cn docdb-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac 'dr69ZUGVm0Ep1Eo/xBoOTcefuKVx' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = base.testing.bwtsi.cn\n     environment = chinapay\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""template"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo ${STACK_NAME} \u003e /etc/tradeshift/stackname\""\n - \""echo ${HOSTNAME}-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 ${HOSTNAME}-$INSTANCE_ID.${REGION_DNS} ${HOSTNAME}-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac '${DISK_ENCRYPTION_KEY}' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = ${CERT_NAME}\n     environment = ${ENVIRONMENT}\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""vars.%"": ""6"",
                            ""vars.CERT_NAME"": ""base.testing.bwtsi.cn"",
                            ""vars.DISK_ENCRYPTION_KEY"": ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx"",
                            ""vars.ENVIRONMENT"": ""chinapay"",
                            ""vars.HOSTNAME"": ""docdb"",
                            ""vars.REGION_DNS"": ""cn-northwest-1.test.bwtsi.cn"",
                            ""vars.STACK_NAME"": ""pay""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.template""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""environment-common""
            ],
            ""outputs"": {
                ""cert_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""base.testing.bwtsi.cn""
                },
                ""domain_name_search"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test.bwtsi.cn""
                },
                ""environment_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""chinapay""
                },
                ""environment_shortname"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                },
                ""security_group_name_postfix"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": "".chinapay""
                },
                ""site"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""global-common""
            ],
            ""outputs"": {
                ""all_cidr_eu_west_1"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16,172.25.128.0/21,172.25.120.0/21,172.25.112.0/21,172.31.248.0/21,172.31.240.0/21,172.21.0.0/19,172.19.0.0/19,172.22.0.0/19,172.18.0.0/19""
                },
                ""base_tradeshift_net_account_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""694518486591""
                },
                ""gcsops_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.17.22.143/32""
                },
                ""gcsops_cn_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""54.223.95.7/32,54.223.198.170/32,54.223.211.136/32,52.80.34.103/32""
                },
                ""office_ips"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,178.49.148.100/32,87.243.3.34/32,109.166.189.50/32,78.40.84.83/32,4.53.137.82/32,173.247.199.142/32,58.211.225.90/32,202.181.248.19/32,109.70.48.99/32""
                },
                ""prod_base_tradeshift_net_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""prod.base.tradeshift.net""
                },
                ""prod_base_tradeshift_net_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16""
                },
                ""prod_base_tradeshift_net_vpc_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""vpc-264c9042""
                },
                ""prod_ts_sv_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.50.175.210/32,52.30.44.136/32,52.50.189.21/32""
                },
                ""test_bwtsi_cn_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/19""
                },
                ""test_bwtsi_cn_vpc_private_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.12.0/22,192.168.16.0/22""
                },
                ""test_bwtsi_cn_vpc_public_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/22,192.168.4.0/22""
                },
                ""tradeshift_com_public_zone_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""Z2OX0I8SM94425""
                },
                ""translation_service_clients"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,4.53.137.82/32,173.247.199.142/32,130.185.137.106/32,202.181.248.19/32,52.17.87.187/32,52.30.44.136/32,52.30.58.232/32,52.31.203.95/32,52.49.119.80/32,52.49.49.111/32,52.49.5.171/32,52.50.108.6/32,52.50.175.210/32,52.50.189.21/32,52.50.255.154/32,52.50.91.189/32,54.195.199.108/32,54.78.39.106/32,58.211.225.90/32,89.150.143.118/32,54.222.150.122/32,54.222.194.56/32,109.70.48.99/32""
                },
                ""truebn_org_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""34.253.176.198/32,34.241.59.39/32""
                },
                ""userdata_path"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/modules/eff596488a3055adf7024741dffb9ca1/..""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""regional-common""
            ],
            ""outputs"": {
                ""availability_zones"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1a,cn-northwest-1b""
                },
                ""backend_region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""base_ami_1604"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-6ec1d50c""
                },
                ""base_ami_1604_zfs"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-edf8ec8f""
                },
                ""chinapay_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""key_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""pay_china""
                },
                ""region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""region_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""region_env"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        }
    ]
}

-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go] DEBUG: Response s3/PutObject Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 200 OK
Connection: close
Content-Length: 0
Date: Thu, 26 Apr 2018 11:00:39 GMT
Etag: ""807c608ab629b9b73914da058c923c20""
Server: AmazonS3
X-Amz-Id-2: 5Af+DuU/y0Ngtkb6wCq1R0Oz+ZrOYi4apbPsCZTSlwhSqnqBNB64rFL4HfBG6WB9GETdRmQyKnw=
X-Amz-Request-Id: 7984823D8787C039
X-Amz-Server-Side-Encryption: AES256


-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go]
2018/04/26 19:00:38 [DEBUG] plugin: waiting for all plugin processes to complete...

Error: Error applying plan:

1 error(s) occurred:

* module.docdb.aws_instance.riak: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d

2018-04-26T19:00:38.547+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:38 [ERR] plugin: plugin server: accept unix /var/folders/k0/hk5r4k696x901sk4mh_vwcg40000gn/T/plugin243311916: use of closed network connection
Terraform does not automatically rollback in the face of errors.
Instead, your Terraform state file has been partially updated with
any resources that successfully completed. Please address the error
above and apply again to incrementally change your infrastructure.


2018-04-26T19:00:38.550+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-template_v1.0.0_x4
2018-04-26T19:00:38.551+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-aws_v1.16.0_x4
2018-04-26T19:00:38.555+0800 [DEBUG] plugin: plugin process exited: path=/usr/local/bin/terraform-provider-alicloud

```
# Expected Behavior
can create aws instance in China AWS
# Actual Behavior
I can create aws instance in China AWS with provider.aws v1.15.0
but I can't create aws instance with provider.aws v1.16.0",ServerSideEncryption,https://github.com/hashicorp/terraform-provider-aws
43,4359,"# Terraform Version

Terraform v0.11.6
provider.aws v1.16.0

# Affected Resource(s)
aws_instance_ec2
# Terraform Configuration Files
module ""docdb"" {
  source = ""../../../../../../tradeshift-puppet/terraform/modules/aws/instances-cn/riak""
  environment = ""${var.pull_request}""
  stackname = ""${var.stackname}""
  role = ""docdb""
  owner = ""${var.owner}""
  decomission_date = ""${var.decomission_date}""
  instance_type = ""t2.large""
  instance_ami = ""${module.regional-common.base_ami_1604}""
  instance_key_name = ""${module.regional-common.key_name}""
  disable_api_termination = false
  ebs_volume_size = ""100""
  ebs_delete_on_termination = ""false""
  ebs_optimized = false
  vpc_security_groups = ""${data.terraform_remote_state.security_groups.stack_it_run_access_sg_id}""
  vpc_subnets = ""${data.terraform_remote_state.vpc.private_subnets}""
  postfix = "".${var.stackname}""
  dns_region_name = ""${module.regional-common.region_dns}""
  disk_encryption_key = ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx""
  count = ""1""
  cert_name = ""${module.environment-common.cert_name}""
}

# Debug Output
```
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 200 OK
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: text/xml;charset=UTF-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:36 GMT
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Vary: Accept-Encoding
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <DescribeInstanceAttributeResponse xmlns=""http://ec2.amazonaws.com/doc/2016-11-15/"">
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <requestId>35e6cd4e-cb70-4016-a250-53f0880cc9be</requestId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <instanceId>i-022a9894321a6d374</instanceId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:         <value>I2Nsb3VkLWNvbmZpZwptb3VudHM6CiAtIFtlcGhlbWVyYWwwLCBudWxsXQoKcHJlc2VydmVfaG9zdG5hbWU6IHRydWUKbWFuYWdlX2V0Y19ob3N0czogZmFsc2UKCmJvb3RjbWQ6CiAtICJlY2hvIHBheSA+IC9ldGMvdHJhZGVzaGlmdC9zdGFja25hbWUiCiAtICJlY2hvIGRvY2RiLSRJTlNUQU5DRV9JRCA+IC9ldGMvaG9zdG5hbWU7IGhvc3RuYW1lIC1GIC9ldGMvaG9zdG5hbWUiCiAtICJzZWQgLWkgLWUgJy9eMTI3LjAuMC4xL2QnIC9ldGMvaG9zdHM7IGVjaG8gMTI3LjAuMC4xIGRvY2RiLSRJTlNUQU5DRV9JRC5jbi1ub3J0aHdlc3QtMS50ZXN0LmJ3dHNpLmNuIGRvY2RiLSRJTlNUQU5DRV9JRCBsb2NhbGhvc3QgPj4gL2V0Yy9ob3N0cyIKICMgRGlzayBlbmNyeXB0aW9uIGtleSBmb3IgZXBoZW1lcmFsIGRpc2sgZHJpdmVzLCBzYXZlZCB0byByYW0gZHJpdmUKICMgVGhlIHNlZCBwYXJ0IHJlbW92ZXMgdGhlIChzdGRpbik9IG91dHB1dCBmcm9tIG9wZW5zc2wgZGdzdAogLSAiZWNobyAkSU5TVEFOQ0VfSUQgfCBvcGVuc3NsIGRnc3QgLXNoYTI1NiAtaG1hYyAnZHI2OVpVR1ZtMEVwMUVvL3hCb09UY2VmdUtWeCcgfCBzZWQgJ3MvXi4qPSAvLycgPiAvZGV2L3NobS9lbmNyeXB0ZWQtZGlzay5sdWtzLmtleSAmJiBjaG1vZCA0MDAgL2Rldi9zaG0vZW5jcnlwdGVkLWRpc2subHVrcy5rZXkiCgojIERvbid0IG92ZXJyaWRlIG91ciBhcHQgcmVwb3NpdG9yeSBsaXN0IG9uIGZpcnN0IGJvb3QKYXB0X3ByZXNlcnZlX3NvdXJjZXNfbGlzdDogdHJ1ZQoKIyBEb24ndCBwcmludCB0aGUgbmV3IHNzaCBrZXlzIG9uIHRoZSBjb25zb2xlCm5vX3NzaF9maW5nZXJwcmludHM6IHRydWUKCndyaXRlX2ZpbGVzOgogLSBwYXRoOiAvZXRjL3B1cHBldGxhYnMvcHVwcGV0L3B1cHBldC5jb25mCiAgIG93bmVyOiByb290OnJvb3QKICAgcGVybWlzc2lvbnM6ICcwNDQ0JwogICBjb250ZW50OiB8CiAgICAgW21haW5dCiAgICAgY2VydG5hbWUgPSBiYXNlLnRlc3RpbmcuYnd0c2kuY24KICAgICBlbnZpcm9ubWVudCA9IGNoaW5hcGF5CiAgICAgW2FnZW50XQogICAgIHJ1bmludGVydmFsID0gMTAweQogICAgIHNlcnZlciA9IHB1cHBldC5id3RzaS5jbgogICAgIG5vZGVfbmFtZSA9IGZhY3RlcgogICAgIG5vZGVfbmFtZV9mYWN0ID0gZnFkbgogICAgIHNwbGF5ID0gdHJ1ZQogICAgIHNwbGF5bGltaXQgPSA1bQo=</value>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     </userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: </DescribeInstanceAttributeResponse>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] DEBUG: Request ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ REQUEST POST-SIGN ]-----------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: POST / HTTP/1.1
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Host: ec2.cn-northwest-1.amazonaws.com.cn
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: User-Agent: aws-sdk-go/1.13.32 (go1.9.2; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.7
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Length: 95
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/ec2/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-security-token, Signature=60ac431f06b221bf7fe6d53ee72de1babb1aad5a5a4d17917e4d2f78a7533fef
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: application/x-www-form-urlencoded; charset=utf-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Date: 20180426T110036Z
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Accept-Encoding: gzip
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Action=DescribeInstanceCreditSpecifications&InstanceId.1=i-022a9894321a6d374&Version=2016-11-15
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Response ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 400 Bad Request
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:37 GMT
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <Response><Errors><Error><Code>UnsupportedOperation</Code><Message>The functionality you requested is not available in this region.</Message></Error></Errors><RequestID>53ace3cc-2597-49a0-99b2-3b9f1cb8567d</RequestID></Response>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Validate Response ec2/DescribeInstanceCreditSpecifications failed, not retrying, error UnsupportedOperation: The functionality you requested is not available in this region.
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalApplyPost, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalSequence, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [DEBUG] Uploading remote state to S3: {
  Body: buffer(0xc4203e17d0),
  Bucket: ""bwts-terraform-bucket-chinapay"",
  ContentLength: 20792,
  ContentType: ""application/json"",
  Key: ""cn-northwest-1/riak/terraform.tfstate"",
  ServerSideEncryption: ""AES256""
}
2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Request s3/PutObject Details:
---[ REQUEST POST-SIGN ]-----------------------------
PUT /cn-northwest-1/riak/terraform.tfstate HTTP/1.1
Host: bwts-terraform-bucket-chinapay.s3.cn-northwest-1.amazonaws.com.cn
User-Agent: aws-sdk-go/1.12.75 (go1.10.1; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.6
Content-Length: 20792
Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/s3/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-content-sha256;x-amz-date;x-amz-security-token;x-amz-server-side-encryption, Signature=8aa16110ae06a99b503e1f0546a4d6cf208fdf658ca29420baa2d649cec043e2
Content-Type: application/json
X-Amz-Content-Sha256: 04110e3e4cd97aa3e89cfe2f03487922bfd6b6346ec6dfe3fbe8fad9755e18c2
X-Amz-Date: 20180426T110037Z
X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
X-Amz-Server-Side-Encryption: AES256
Accept-Encoding: gzip

{
    ""version"": 3,
    ""terraform_version"": ""0.11.6"",
    ""serial"": 1,
    ""lineage"": ""b9c3c084-789e-7472-0b18-8698b4afc854"",
    ""modules"": [
        {
            ""path"": [
                ""root""
            ],
            ""outputs"": {},
            ""resources"": {
                ""data.terraform_remote_state.security_groups"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""bastion_host"": ""sg-e29feb8b"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/dev-stack-sgs/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""external_lb_sg_id"": ""sg-a55027cc"",
                            ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                            ""rundeck"": ""sg-b39eeada"",
                            ""stack_it_run_access_sg_id"": ""sg-9d5f28f4"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                },
                ""data.terraform_remote_state.vpc"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/vpc/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                            ""private_subnets"": ""subnet-454c962c,subnet-9722ddec"",
                            ""public_subnets"": ""subnet-5e4d9737,subnet-9022ddeb"",
                            ""vpc_cidr"": ""192.168.0.0/19"",
                            ""vpc_id"": ""vpc-34c61f5d"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""docdb""
            ],
            ""outputs"": {},
            ""resources"": {
                ""aws_instance.riak"": {
                    ""type"": ""aws_instance"",
                    ""depends_on"": [
                        ""data.template_file.cloud-init-riak""
                    ],
                    ""primary"": {
                        ""id"": ""i-022a9894321a6d374"",
                        ""attributes"": {
                            ""ami"": ""ami-6ec1d50c"",
                            ""associate_public_ip_address"": ""false"",
                            ""availability_zone"": ""cn-northwest-1a"",
                            ""disable_api_termination"": ""false"",
                            ""ebs_block_device.#"": ""4"",
                            ""ebs_block_device.3965576335.delete_on_termination"": ""false"",
                            ""ebs_block_device.3965576335.device_name"": ""/dev/xvdd"",
                            ""ebs_block_device.3965576335.encrypted"": ""false"",
                            ""ebs_block_device.3965576335.iops"": ""300"",
                            ""ebs_block_device.3965576335.snapshot_id"": """",
                            ""ebs_block_device.3965576335.volume_id"": ""vol-09cde364159031c5d"",
                            ""ebs_block_device.3965576335.volume_size"": ""100"",
                            ""ebs_block_device.3965576335.volume_type"": ""gp2"",
                            ""ebs_block_device.3986656952.delete_on_termination"": ""false"",
                            ""ebs_block_device.3986656952.device_name"": ""/dev/xvde"",
                            ""ebs_block_device.3986656952.encrypted"": ""false"",
                            ""ebs_block_device.3986656952.iops"": ""300"",
                            ""ebs_block_device.3986656952.snapshot_id"": """",
                            ""ebs_block_device.3986656952.volume_id"": ""vol-09c14e768bdd6dd4b"",
                            ""ebs_block_device.3986656952.volume_size"": ""100"",
                            ""ebs_block_device.3986656952.volume_type"": ""gp2"",
                            ""ebs_block_device.3994770134.delete_on_termination"": ""false"",
                            ""ebs_block_device.3994770134.device_name"": ""/dev/xvdg"",
                            ""ebs_block_device.3994770134.encrypted"": ""false"",
                            ""ebs_block_device.3994770134.iops"": ""300"",
                            ""ebs_block_device.3994770134.snapshot_id"": """",
                            ""ebs_block_device.3994770134.volume_id"": ""vol-0e1b3ff63114f3003"",
                            ""ebs_block_device.3994770134.volume_size"": ""100"",
                            ""ebs_block_device.3994770134.volume_type"": ""gp2"",
                            ""ebs_block_device.4023988449.delete_on_termination"": ""false"",
                            ""ebs_block_device.4023988449.device_name"": ""/dev/xvdf"",
                            ""ebs_block_device.4023988449.encrypted"": ""false"",
                            ""ebs_block_device.4023988449.iops"": ""300"",
                            ""ebs_block_device.4023988449.snapshot_id"": """",
                            ""ebs_block_device.4023988449.volume_id"": ""vol-015467a2fec64cfdd"",
                            ""ebs_block_device.4023988449.volume_size"": ""100"",
                            ""ebs_block_device.4023988449.volume_type"": ""gp2"",
                            ""ebs_optimized"": ""false"",
                            ""ephemeral_block_device.#"": ""0"",
                            ""get_password_data"": ""false"",
                            ""iam_instance_profile"": """",
                            ""id"": ""i-022a9894321a6d374"",
                            ""instance_state"": ""running"",
                            ""instance_type"": ""t2.large"",
                            ""ipv6_addresses.#"": ""0"",
                            ""key_name"": ""pay_china"",
                            ""monitoring"": ""false"",
                            ""network_interface.#"": ""0"",
                            ""network_interface_id"": ""eni-fd55c3a4"",
                            ""placement_group"": """",
                            ""primary_network_interface_id"": ""eni-fd55c3a4"",
                            ""private_dns"": ""ip-192-168-14-135.cn-northwest-1.compute.internal"",
                            ""private_ip"": ""192.168.14.135"",
                            ""public_dns"": """",
                            ""public_ip"": """",
                            ""root_block_device.#"": ""1"",
                            ""root_block_device.0.delete_on_termination"": ""true"",
                            ""root_block_device.0.iops"": ""100"",
                            ""root_block_device.0.volume_id"": ""vol-0884c92d17ea04d83"",
                            ""root_block_device.0.volume_size"": ""20"",
                            ""root_block_device.0.volume_type"": ""gp2"",
                            ""security_groups.#"": ""0"",
                            ""source_dest_check"": ""true"",
                            ""subnet_id"": ""subnet-454c962c"",
                            ""tags.%"": ""9"",
                            ""tags.Decomission_Date"": ""never"",
                            ""tags.Environment"": ""chinapay"",
                            ""tags.Name"": ""docdb.pay.cn-northwest-1.test.bwtsi.cn"",
                            ""tags.Owner"": ""operations"",
                            ""tags.Purpose"": ""Riak instance"",
                            ""tags.Role"": ""docdb"",
                            ""tags.Stackname"": ""pay"",
                            ""tags.Started_By"": ""operations"",
                            ""tags.Warning"": ""Managed by terraform, do not edit"",
                            ""tenancy"": ""default"",
                            ""user_data"": ""f35050bdeefa2a2d9f354c0e699a5f2d7c393365"",
                            ""volume_tags.%"": ""0"",
                            ""vpc_security_group_ids.#"": ""1"",
                            ""vpc_security_group_ids.2301982502"": ""sg-9d5f28f4""
                        },
                        ""meta"": {
                            ""e2bfb730-ecaa-11e6-8f88-34363bc7c4c0"": {
                                ""create"": 600000000000,
                                ""delete"": 1200000000000,
                                ""update"": 600000000000
                            },
                            ""schema_version"": ""1""
                        },
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.aws""
                },
                ""data.template_file.cloud-init-riak"": {
                    ""type"": ""template_file"",
                    ""depends_on"": [],
                    ""primary"": {
                        ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                        ""attributes"": {
                            ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                            ""rendered"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo pay \u003e /etc/tradeshift/stackname\""\n - \""echo docdb-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 docdb-$INSTANCE_ID.cn-northwest-1.test.bwtsi.cn docdb-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac 'dr69ZUGVm0Ep1Eo/xBoOTcefuKVx' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = base.testing.bwtsi.cn\n     environment = chinapay\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""template"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo ${STACK_NAME} \u003e /etc/tradeshift/stackname\""\n - \""echo ${HOSTNAME}-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 ${HOSTNAME}-$INSTANCE_ID.${REGION_DNS} ${HOSTNAME}-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac '${DISK_ENCRYPTION_KEY}' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = ${CERT_NAME}\n     environment = ${ENVIRONMENT}\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""vars.%"": ""6"",
                            ""vars.CERT_NAME"": ""base.testing.bwtsi.cn"",
                            ""vars.DISK_ENCRYPTION_KEY"": ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx"",
                            ""vars.ENVIRONMENT"": ""chinapay"",
                            ""vars.HOSTNAME"": ""docdb"",
                            ""vars.REGION_DNS"": ""cn-northwest-1.test.bwtsi.cn"",
                            ""vars.STACK_NAME"": ""pay""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.template""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""environment-common""
            ],
            ""outputs"": {
                ""cert_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""base.testing.bwtsi.cn""
                },
                ""domain_name_search"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test.bwtsi.cn""
                },
                ""environment_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""chinapay""
                },
                ""environment_shortname"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                },
                ""security_group_name_postfix"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": "".chinapay""
                },
                ""site"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""global-common""
            ],
            ""outputs"": {
                ""all_cidr_eu_west_1"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16,172.25.128.0/21,172.25.120.0/21,172.25.112.0/21,172.31.248.0/21,172.31.240.0/21,172.21.0.0/19,172.19.0.0/19,172.22.0.0/19,172.18.0.0/19""
                },
                ""base_tradeshift_net_account_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""694518486591""
                },
                ""gcsops_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.17.22.143/32""
                },
                ""gcsops_cn_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""54.223.95.7/32,54.223.198.170/32,54.223.211.136/32,52.80.34.103/32""
                },
                ""office_ips"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,178.49.148.100/32,87.243.3.34/32,109.166.189.50/32,78.40.84.83/32,4.53.137.82/32,173.247.199.142/32,58.211.225.90/32,202.181.248.19/32,109.70.48.99/32""
                },
                ""prod_base_tradeshift_net_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""prod.base.tradeshift.net""
                },
                ""prod_base_tradeshift_net_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16""
                },
                ""prod_base_tradeshift_net_vpc_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""vpc-264c9042""
                },
                ""prod_ts_sv_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.50.175.210/32,52.30.44.136/32,52.50.189.21/32""
                },
                ""test_bwtsi_cn_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/19""
                },
                ""test_bwtsi_cn_vpc_private_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.12.0/22,192.168.16.0/22""
                },
                ""test_bwtsi_cn_vpc_public_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/22,192.168.4.0/22""
                },
                ""tradeshift_com_public_zone_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""Z2OX0I8SM94425""
                },
                ""translation_service_clients"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,4.53.137.82/32,173.247.199.142/32,130.185.137.106/32,202.181.248.19/32,52.17.87.187/32,52.30.44.136/32,52.30.58.232/32,52.31.203.95/32,52.49.119.80/32,52.49.49.111/32,52.49.5.171/32,52.50.108.6/32,52.50.175.210/32,52.50.189.21/32,52.50.255.154/32,52.50.91.189/32,54.195.199.108/32,54.78.39.106/32,58.211.225.90/32,89.150.143.118/32,54.222.150.122/32,54.222.194.56/32,109.70.48.99/32""
                },
                ""truebn_org_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""34.253.176.198/32,34.241.59.39/32""
                },
                ""userdata_path"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/modules/eff596488a3055adf7024741dffb9ca1/..""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""regional-common""
            ],
            ""outputs"": {
                ""availability_zones"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1a,cn-northwest-1b""
                },
                ""backend_region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""base_ami_1604"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-6ec1d50c""
                },
                ""base_ami_1604_zfs"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-edf8ec8f""
                },
                ""chinapay_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""key_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""pay_china""
                },
                ""region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""region_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""region_env"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        }
    ]
}

-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go] DEBUG: Response s3/PutObject Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 200 OK
Connection: close
Content-Length: 0
Date: Thu, 26 Apr 2018 11:00:39 GMT
Etag: ""807c608ab629b9b73914da058c923c20""
Server: AmazonS3
X-Amz-Id-2: 5Af+DuU/y0Ngtkb6wCq1R0Oz+ZrOYi4apbPsCZTSlwhSqnqBNB64rFL4HfBG6WB9GETdRmQyKnw=
X-Amz-Request-Id: 7984823D8787C039
X-Amz-Server-Side-Encryption: AES256


-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go]
2018/04/26 19:00:38 [DEBUG] plugin: waiting for all plugin processes to complete...

Error: Error applying plan:

1 error(s) occurred:

* module.docdb.aws_instance.riak: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d

2018-04-26T19:00:38.547+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:38 [ERR] plugin: plugin server: accept unix /var/folders/k0/hk5r4k696x901sk4mh_vwcg40000gn/T/plugin243311916: use of closed network connection
Terraform does not automatically rollback in the face of errors.
Instead, your Terraform state file has been partially updated with
any resources that successfully completed. Please address the error
above and apply again to incrementally change your infrastructure.


2018-04-26T19:00:38.550+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-template_v1.0.0_x4
2018-04-26T19:00:38.551+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-aws_v1.16.0_x4
2018-04-26T19:00:38.555+0800 [DEBUG] plugin: plugin process exited: path=/usr/local/bin/terraform-provider-alicloud

```
# Expected Behavior
can create aws instance in China AWS
# Actual Behavior
I can create aws instance in China AWS with provider.aws v1.15.0
but I can't create aws instance with provider.aws v1.16.0",true\n\nwrite_files:\n,https://github.com/hashicorp/terraform-provider-aws
44,4359,"# Terraform Version

Terraform v0.11.6
provider.aws v1.16.0

# Affected Resource(s)
aws_instance_ec2
# Terraform Configuration Files
module ""docdb"" {
  source = ""../../../../../../tradeshift-puppet/terraform/modules/aws/instances-cn/riak""
  environment = ""${var.pull_request}""
  stackname = ""${var.stackname}""
  role = ""docdb""
  owner = ""${var.owner}""
  decomission_date = ""${var.decomission_date}""
  instance_type = ""t2.large""
  instance_ami = ""${module.regional-common.base_ami_1604}""
  instance_key_name = ""${module.regional-common.key_name}""
  disable_api_termination = false
  ebs_volume_size = ""100""
  ebs_delete_on_termination = ""false""
  ebs_optimized = false
  vpc_security_groups = ""${data.terraform_remote_state.security_groups.stack_it_run_access_sg_id}""
  vpc_subnets = ""${data.terraform_remote_state.vpc.private_subnets}""
  postfix = "".${var.stackname}""
  dns_region_name = ""${module.regional-common.region_dns}""
  disk_encryption_key = ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx""
  count = ""1""
  cert_name = ""${module.environment-common.cert_name}""
}

# Debug Output
```
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 200 OK
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: text/xml;charset=UTF-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:36 GMT
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Vary: Accept-Encoding
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <DescribeInstanceAttributeResponse xmlns=""http://ec2.amazonaws.com/doc/2016-11-15/"">
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <requestId>35e6cd4e-cb70-4016-a250-53f0880cc9be</requestId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <instanceId>i-022a9894321a6d374</instanceId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:         <value>I2Nsb3VkLWNvbmZpZwptb3VudHM6CiAtIFtlcGhlbWVyYWwwLCBudWxsXQoKcHJlc2VydmVfaG9zdG5hbWU6IHRydWUKbWFuYWdlX2V0Y19ob3N0czogZmFsc2UKCmJvb3RjbWQ6CiAtICJlY2hvIHBheSA+IC9ldGMvdHJhZGVzaGlmdC9zdGFja25hbWUiCiAtICJlY2hvIGRvY2RiLSRJTlNUQU5DRV9JRCA+IC9ldGMvaG9zdG5hbWU7IGhvc3RuYW1lIC1GIC9ldGMvaG9zdG5hbWUiCiAtICJzZWQgLWkgLWUgJy9eMTI3LjAuMC4xL2QnIC9ldGMvaG9zdHM7IGVjaG8gMTI3LjAuMC4xIGRvY2RiLSRJTlNUQU5DRV9JRC5jbi1ub3J0aHdlc3QtMS50ZXN0LmJ3dHNpLmNuIGRvY2RiLSRJTlNUQU5DRV9JRCBsb2NhbGhvc3QgPj4gL2V0Yy9ob3N0cyIKICMgRGlzayBlbmNyeXB0aW9uIGtleSBmb3IgZXBoZW1lcmFsIGRpc2sgZHJpdmVzLCBzYXZlZCB0byByYW0gZHJpdmUKICMgVGhlIHNlZCBwYXJ0IHJlbW92ZXMgdGhlIChzdGRpbik9IG91dHB1dCBmcm9tIG9wZW5zc2wgZGdzdAogLSAiZWNobyAkSU5TVEFOQ0VfSUQgfCBvcGVuc3NsIGRnc3QgLXNoYTI1NiAtaG1hYyAnZHI2OVpVR1ZtMEVwMUVvL3hCb09UY2VmdUtWeCcgfCBzZWQgJ3MvXi4qPSAvLycgPiAvZGV2L3NobS9lbmNyeXB0ZWQtZGlzay5sdWtzLmtleSAmJiBjaG1vZCA0MDAgL2Rldi9zaG0vZW5jcnlwdGVkLWRpc2subHVrcy5rZXkiCgojIERvbid0IG92ZXJyaWRlIG91ciBhcHQgcmVwb3NpdG9yeSBsaXN0IG9uIGZpcnN0IGJvb3QKYXB0X3ByZXNlcnZlX3NvdXJjZXNfbGlzdDogdHJ1ZQoKIyBEb24ndCBwcmludCB0aGUgbmV3IHNzaCBrZXlzIG9uIHRoZSBjb25zb2xlCm5vX3NzaF9maW5nZXJwcmludHM6IHRydWUKCndyaXRlX2ZpbGVzOgogLSBwYXRoOiAvZXRjL3B1cHBldGxhYnMvcHVwcGV0L3B1cHBldC5jb25mCiAgIG93bmVyOiByb290OnJvb3QKICAgcGVybWlzc2lvbnM6ICcwNDQ0JwogICBjb250ZW50OiB8CiAgICAgW21haW5dCiAgICAgY2VydG5hbWUgPSBiYXNlLnRlc3RpbmcuYnd0c2kuY24KICAgICBlbnZpcm9ubWVudCA9IGNoaW5hcGF5CiAgICAgW2FnZW50XQogICAgIHJ1bmludGVydmFsID0gMTAweQogICAgIHNlcnZlciA9IHB1cHBldC5id3RzaS5jbgogICAgIG5vZGVfbmFtZSA9IGZhY3RlcgogICAgIG5vZGVfbmFtZV9mYWN0ID0gZnFkbgogICAgIHNwbGF5ID0gdHJ1ZQogICAgIHNwbGF5bGltaXQgPSA1bQo=</value>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     </userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: </DescribeInstanceAttributeResponse>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] DEBUG: Request ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ REQUEST POST-SIGN ]-----------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: POST / HTTP/1.1
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Host: ec2.cn-northwest-1.amazonaws.com.cn
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: User-Agent: aws-sdk-go/1.13.32 (go1.9.2; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.7
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Length: 95
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/ec2/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-security-token, Signature=60ac431f06b221bf7fe6d53ee72de1babb1aad5a5a4d17917e4d2f78a7533fef
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: application/x-www-form-urlencoded; charset=utf-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Date: 20180426T110036Z
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Accept-Encoding: gzip
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Action=DescribeInstanceCreditSpecifications&InstanceId.1=i-022a9894321a6d374&Version=2016-11-15
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Response ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 400 Bad Request
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:37 GMT
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <Response><Errors><Error><Code>UnsupportedOperation</Code><Message>The functionality you requested is not available in this region.</Message></Error></Errors><RequestID>53ace3cc-2597-49a0-99b2-3b9f1cb8567d</RequestID></Response>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Validate Response ec2/DescribeInstanceCreditSpecifications failed, not retrying, error UnsupportedOperation: The functionality you requested is not available in this region.
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalApplyPost, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalSequence, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [DEBUG] Uploading remote state to S3: {
  Body: buffer(0xc4203e17d0),
  Bucket: ""bwts-terraform-bucket-chinapay"",
  ContentLength: 20792,
  ContentType: ""application/json"",
  Key: ""cn-northwest-1/riak/terraform.tfstate"",
  ServerSideEncryption: ""AES256""
}
2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Request s3/PutObject Details:
---[ REQUEST POST-SIGN ]-----------------------------
PUT /cn-northwest-1/riak/terraform.tfstate HTTP/1.1
Host: bwts-terraform-bucket-chinapay.s3.cn-northwest-1.amazonaws.com.cn
User-Agent: aws-sdk-go/1.12.75 (go1.10.1; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.6
Content-Length: 20792
Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/s3/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-content-sha256;x-amz-date;x-amz-security-token;x-amz-server-side-encryption, Signature=8aa16110ae06a99b503e1f0546a4d6cf208fdf658ca29420baa2d649cec043e2
Content-Type: application/json
X-Amz-Content-Sha256: 04110e3e4cd97aa3e89cfe2f03487922bfd6b6346ec6dfe3fbe8fad9755e18c2
X-Amz-Date: 20180426T110037Z
X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
X-Amz-Server-Side-Encryption: AES256
Accept-Encoding: gzip

{
    ""version"": 3,
    ""terraform_version"": ""0.11.6"",
    ""serial"": 1,
    ""lineage"": ""b9c3c084-789e-7472-0b18-8698b4afc854"",
    ""modules"": [
        {
            ""path"": [
                ""root""
            ],
            ""outputs"": {},
            ""resources"": {
                ""data.terraform_remote_state.security_groups"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""bastion_host"": ""sg-e29feb8b"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/dev-stack-sgs/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""external_lb_sg_id"": ""sg-a55027cc"",
                            ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                            ""rundeck"": ""sg-b39eeada"",
                            ""stack_it_run_access_sg_id"": ""sg-9d5f28f4"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                },
                ""data.terraform_remote_state.vpc"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/vpc/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                            ""private_subnets"": ""subnet-454c962c,subnet-9722ddec"",
                            ""public_subnets"": ""subnet-5e4d9737,subnet-9022ddeb"",
                            ""vpc_cidr"": ""192.168.0.0/19"",
                            ""vpc_id"": ""vpc-34c61f5d"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""docdb""
            ],
            ""outputs"": {},
            ""resources"": {
                ""aws_instance.riak"": {
                    ""type"": ""aws_instance"",
                    ""depends_on"": [
                        ""data.template_file.cloud-init-riak""
                    ],
                    ""primary"": {
                        ""id"": ""i-022a9894321a6d374"",
                        ""attributes"": {
                            ""ami"": ""ami-6ec1d50c"",
                            ""associate_public_ip_address"": ""false"",
                            ""availability_zone"": ""cn-northwest-1a"",
                            ""disable_api_termination"": ""false"",
                            ""ebs_block_device.#"": ""4"",
                            ""ebs_block_device.3965576335.delete_on_termination"": ""false"",
                            ""ebs_block_device.3965576335.device_name"": ""/dev/xvdd"",
                            ""ebs_block_device.3965576335.encrypted"": ""false"",
                            ""ebs_block_device.3965576335.iops"": ""300"",
                            ""ebs_block_device.3965576335.snapshot_id"": """",
                            ""ebs_block_device.3965576335.volume_id"": ""vol-09cde364159031c5d"",
                            ""ebs_block_device.3965576335.volume_size"": ""100"",
                            ""ebs_block_device.3965576335.volume_type"": ""gp2"",
                            ""ebs_block_device.3986656952.delete_on_termination"": ""false"",
                            ""ebs_block_device.3986656952.device_name"": ""/dev/xvde"",
                            ""ebs_block_device.3986656952.encrypted"": ""false"",
                            ""ebs_block_device.3986656952.iops"": ""300"",
                            ""ebs_block_device.3986656952.snapshot_id"": """",
                            ""ebs_block_device.3986656952.volume_id"": ""vol-09c14e768bdd6dd4b"",
                            ""ebs_block_device.3986656952.volume_size"": ""100"",
                            ""ebs_block_device.3986656952.volume_type"": ""gp2"",
                            ""ebs_block_device.3994770134.delete_on_termination"": ""false"",
                            ""ebs_block_device.3994770134.device_name"": ""/dev/xvdg"",
                            ""ebs_block_device.3994770134.encrypted"": ""false"",
                            ""ebs_block_device.3994770134.iops"": ""300"",
                            ""ebs_block_device.3994770134.snapshot_id"": """",
                            ""ebs_block_device.3994770134.volume_id"": ""vol-0e1b3ff63114f3003"",
                            ""ebs_block_device.3994770134.volume_size"": ""100"",
                            ""ebs_block_device.3994770134.volume_type"": ""gp2"",
                            ""ebs_block_device.4023988449.delete_on_termination"": ""false"",
                            ""ebs_block_device.4023988449.device_name"": ""/dev/xvdf"",
                            ""ebs_block_device.4023988449.encrypted"": ""false"",
                            ""ebs_block_device.4023988449.iops"": ""300"",
                            ""ebs_block_device.4023988449.snapshot_id"": """",
                            ""ebs_block_device.4023988449.volume_id"": ""vol-015467a2fec64cfdd"",
                            ""ebs_block_device.4023988449.volume_size"": ""100"",
                            ""ebs_block_device.4023988449.volume_type"": ""gp2"",
                            ""ebs_optimized"": ""false"",
                            ""ephemeral_block_device.#"": ""0"",
                            ""get_password_data"": ""false"",
                            ""iam_instance_profile"": """",
                            ""id"": ""i-022a9894321a6d374"",
                            ""instance_state"": ""running"",
                            ""instance_type"": ""t2.large"",
                            ""ipv6_addresses.#"": ""0"",
                            ""key_name"": ""pay_china"",
                            ""monitoring"": ""false"",
                            ""network_interface.#"": ""0"",
                            ""network_interface_id"": ""eni-fd55c3a4"",
                            ""placement_group"": """",
                            ""primary_network_interface_id"": ""eni-fd55c3a4"",
                            ""private_dns"": ""ip-192-168-14-135.cn-northwest-1.compute.internal"",
                            ""private_ip"": ""192.168.14.135"",
                            ""public_dns"": """",
                            ""public_ip"": """",
                            ""root_block_device.#"": ""1"",
                            ""root_block_device.0.delete_on_termination"": ""true"",
                            ""root_block_device.0.iops"": ""100"",
                            ""root_block_device.0.volume_id"": ""vol-0884c92d17ea04d83"",
                            ""root_block_device.0.volume_size"": ""20"",
                            ""root_block_device.0.volume_type"": ""gp2"",
                            ""security_groups.#"": ""0"",
                            ""source_dest_check"": ""true"",
                            ""subnet_id"": ""subnet-454c962c"",
                            ""tags.%"": ""9"",
                            ""tags.Decomission_Date"": ""never"",
                            ""tags.Environment"": ""chinapay"",
                            ""tags.Name"": ""docdb.pay.cn-northwest-1.test.bwtsi.cn"",
                            ""tags.Owner"": ""operations"",
                            ""tags.Purpose"": ""Riak instance"",
                            ""tags.Role"": ""docdb"",
                            ""tags.Stackname"": ""pay"",
                            ""tags.Started_By"": ""operations"",
                            ""tags.Warning"": ""Managed by terraform, do not edit"",
                            ""tenancy"": ""default"",
                            ""user_data"": ""f35050bdeefa2a2d9f354c0e699a5f2d7c393365"",
                            ""volume_tags.%"": ""0"",
                            ""vpc_security_group_ids.#"": ""1"",
                            ""vpc_security_group_ids.2301982502"": ""sg-9d5f28f4""
                        },
                        ""meta"": {
                            ""e2bfb730-ecaa-11e6-8f88-34363bc7c4c0"": {
                                ""create"": 600000000000,
                                ""delete"": 1200000000000,
                                ""update"": 600000000000
                            },
                            ""schema_version"": ""1""
                        },
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.aws""
                },
                ""data.template_file.cloud-init-riak"": {
                    ""type"": ""template_file"",
                    ""depends_on"": [],
                    ""primary"": {
                        ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                        ""attributes"": {
                            ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                            ""rendered"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo pay \u003e /etc/tradeshift/stackname\""\n - \""echo docdb-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 docdb-$INSTANCE_ID.cn-northwest-1.test.bwtsi.cn docdb-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac 'dr69ZUGVm0Ep1Eo/xBoOTcefuKVx' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = base.testing.bwtsi.cn\n     environment = chinapay\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""template"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo ${STACK_NAME} \u003e /etc/tradeshift/stackname\""\n - \""echo ${HOSTNAME}-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 ${HOSTNAME}-$INSTANCE_ID.${REGION_DNS} ${HOSTNAME}-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac '${DISK_ENCRYPTION_KEY}' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = ${CERT_NAME}\n     environment = ${ENVIRONMENT}\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""vars.%"": ""6"",
                            ""vars.CERT_NAME"": ""base.testing.bwtsi.cn"",
                            ""vars.DISK_ENCRYPTION_KEY"": ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx"",
                            ""vars.ENVIRONMENT"": ""chinapay"",
                            ""vars.HOSTNAME"": ""docdb"",
                            ""vars.REGION_DNS"": ""cn-northwest-1.test.bwtsi.cn"",
                            ""vars.STACK_NAME"": ""pay""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.template""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""environment-common""
            ],
            ""outputs"": {
                ""cert_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""base.testing.bwtsi.cn""
                },
                ""domain_name_search"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test.bwtsi.cn""
                },
                ""environment_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""chinapay""
                },
                ""environment_shortname"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                },
                ""security_group_name_postfix"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": "".chinapay""
                },
                ""site"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""global-common""
            ],
            ""outputs"": {
                ""all_cidr_eu_west_1"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16,172.25.128.0/21,172.25.120.0/21,172.25.112.0/21,172.31.248.0/21,172.31.240.0/21,172.21.0.0/19,172.19.0.0/19,172.22.0.0/19,172.18.0.0/19""
                },
                ""base_tradeshift_net_account_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""694518486591""
                },
                ""gcsops_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.17.22.143/32""
                },
                ""gcsops_cn_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""54.223.95.7/32,54.223.198.170/32,54.223.211.136/32,52.80.34.103/32""
                },
                ""office_ips"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,178.49.148.100/32,87.243.3.34/32,109.166.189.50/32,78.40.84.83/32,4.53.137.82/32,173.247.199.142/32,58.211.225.90/32,202.181.248.19/32,109.70.48.99/32""
                },
                ""prod_base_tradeshift_net_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""prod.base.tradeshift.net""
                },
                ""prod_base_tradeshift_net_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16""
                },
                ""prod_base_tradeshift_net_vpc_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""vpc-264c9042""
                },
                ""prod_ts_sv_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.50.175.210/32,52.30.44.136/32,52.50.189.21/32""
                },
                ""test_bwtsi_cn_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/19""
                },
                ""test_bwtsi_cn_vpc_private_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.12.0/22,192.168.16.0/22""
                },
                ""test_bwtsi_cn_vpc_public_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/22,192.168.4.0/22""
                },
                ""tradeshift_com_public_zone_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""Z2OX0I8SM94425""
                },
                ""translation_service_clients"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,4.53.137.82/32,173.247.199.142/32,130.185.137.106/32,202.181.248.19/32,52.17.87.187/32,52.30.44.136/32,52.30.58.232/32,52.31.203.95/32,52.49.119.80/32,52.49.49.111/32,52.49.5.171/32,52.50.108.6/32,52.50.175.210/32,52.50.189.21/32,52.50.255.154/32,52.50.91.189/32,54.195.199.108/32,54.78.39.106/32,58.211.225.90/32,89.150.143.118/32,54.222.150.122/32,54.222.194.56/32,109.70.48.99/32""
                },
                ""truebn_org_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""34.253.176.198/32,34.241.59.39/32""
                },
                ""userdata_path"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/modules/eff596488a3055adf7024741dffb9ca1/..""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""regional-common""
            ],
            ""outputs"": {
                ""availability_zones"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1a,cn-northwest-1b""
                },
                ""backend_region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""base_ami_1604"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-6ec1d50c""
                },
                ""base_ami_1604_zfs"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-edf8ec8f""
                },
                ""chinapay_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""key_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""pay_china""
                },
                ""region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""region_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""region_env"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        }
    ]
}

-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go] DEBUG: Response s3/PutObject Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 200 OK
Connection: close
Content-Length: 0
Date: Thu, 26 Apr 2018 11:00:39 GMT
Etag: ""807c608ab629b9b73914da058c923c20""
Server: AmazonS3
X-Amz-Id-2: 5Af+DuU/y0Ngtkb6wCq1R0Oz+ZrOYi4apbPsCZTSlwhSqnqBNB64rFL4HfBG6WB9GETdRmQyKnw=
X-Amz-Request-Id: 7984823D8787C039
X-Amz-Server-Side-Encryption: AES256


-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go]
2018/04/26 19:00:38 [DEBUG] plugin: waiting for all plugin processes to complete...

Error: Error applying plan:

1 error(s) occurred:

* module.docdb.aws_instance.riak: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d

2018-04-26T19:00:38.547+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:38 [ERR] plugin: plugin server: accept unix /var/folders/k0/hk5r4k696x901sk4mh_vwcg40000gn/T/plugin243311916: use of closed network connection
Terraform does not automatically rollback in the face of errors.
Instead, your Terraform state file has been partially updated with
any resources that successfully completed. Please address the error
above and apply again to incrementally change your infrastructure.


2018-04-26T19:00:38.550+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-template_v1.0.0_x4
2018-04-26T19:00:38.551+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-aws_v1.16.0_x4
2018-04-26T19:00:38.555+0800 [DEBUG] plugin: plugin process exited: path=/usr/local/bin/terraform-provider-alicloud

```
# Expected Behavior
can create aws instance in China AWS
# Actual Behavior
I can create aws instance in China AWS with provider.aws v1.15.0
but I can't create aws instance with provider.aws v1.16.0",Version=2016-11-15,https://github.com/hashicorp/terraform-provider-aws
45,4359,"# Terraform Version

Terraform v0.11.6
provider.aws v1.16.0

# Affected Resource(s)
aws_instance_ec2
# Terraform Configuration Files
module ""docdb"" {
  source = ""../../../../../../tradeshift-puppet/terraform/modules/aws/instances-cn/riak""
  environment = ""${var.pull_request}""
  stackname = ""${var.stackname}""
  role = ""docdb""
  owner = ""${var.owner}""
  decomission_date = ""${var.decomission_date}""
  instance_type = ""t2.large""
  instance_ami = ""${module.regional-common.base_ami_1604}""
  instance_key_name = ""${module.regional-common.key_name}""
  disable_api_termination = false
  ebs_volume_size = ""100""
  ebs_delete_on_termination = ""false""
  ebs_optimized = false
  vpc_security_groups = ""${data.terraform_remote_state.security_groups.stack_it_run_access_sg_id}""
  vpc_subnets = ""${data.terraform_remote_state.vpc.private_subnets}""
  postfix = "".${var.stackname}""
  dns_region_name = ""${module.regional-common.region_dns}""
  disk_encryption_key = ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx""
  count = ""1""
  cert_name = ""${module.environment-common.cert_name}""
}

# Debug Output
```
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 200 OK
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: text/xml;charset=UTF-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:36 GMT
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Vary: Accept-Encoding
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <DescribeInstanceAttributeResponse xmlns=""http://ec2.amazonaws.com/doc/2016-11-15/"">
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <requestId>35e6cd4e-cb70-4016-a250-53f0880cc9be</requestId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <instanceId>i-022a9894321a6d374</instanceId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:         <value>I2Nsb3VkLWNvbmZpZwptb3VudHM6CiAtIFtlcGhlbWVyYWwwLCBudWxsXQoKcHJlc2VydmVfaG9zdG5hbWU6IHRydWUKbWFuYWdlX2V0Y19ob3N0czogZmFsc2UKCmJvb3RjbWQ6CiAtICJlY2hvIHBheSA+IC9ldGMvdHJhZGVzaGlmdC9zdGFja25hbWUiCiAtICJlY2hvIGRvY2RiLSRJTlNUQU5DRV9JRCA+IC9ldGMvaG9zdG5hbWU7IGhvc3RuYW1lIC1GIC9ldGMvaG9zdG5hbWUiCiAtICJzZWQgLWkgLWUgJy9eMTI3LjAuMC4xL2QnIC9ldGMvaG9zdHM7IGVjaG8gMTI3LjAuMC4xIGRvY2RiLSRJTlNUQU5DRV9JRC5jbi1ub3J0aHdlc3QtMS50ZXN0LmJ3dHNpLmNuIGRvY2RiLSRJTlNUQU5DRV9JRCBsb2NhbGhvc3QgPj4gL2V0Yy9ob3N0cyIKICMgRGlzayBlbmNyeXB0aW9uIGtleSBmb3IgZXBoZW1lcmFsIGRpc2sgZHJpdmVzLCBzYXZlZCB0byByYW0gZHJpdmUKICMgVGhlIHNlZCBwYXJ0IHJlbW92ZXMgdGhlIChzdGRpbik9IG91dHB1dCBmcm9tIG9wZW5zc2wgZGdzdAogLSAiZWNobyAkSU5TVEFOQ0VfSUQgfCBvcGVuc3NsIGRnc3QgLXNoYTI1NiAtaG1hYyAnZHI2OVpVR1ZtMEVwMUVvL3hCb09UY2VmdUtWeCcgfCBzZWQgJ3MvXi4qPSAvLycgPiAvZGV2L3NobS9lbmNyeXB0ZWQtZGlzay5sdWtzLmtleSAmJiBjaG1vZCA0MDAgL2Rldi9zaG0vZW5jcnlwdGVkLWRpc2subHVrcy5rZXkiCgojIERvbid0IG92ZXJyaWRlIG91ciBhcHQgcmVwb3NpdG9yeSBsaXN0IG9uIGZpcnN0IGJvb3QKYXB0X3ByZXNlcnZlX3NvdXJjZXNfbGlzdDogdHJ1ZQoKIyBEb24ndCBwcmludCB0aGUgbmV3IHNzaCBrZXlzIG9uIHRoZSBjb25zb2xlCm5vX3NzaF9maW5nZXJwcmludHM6IHRydWUKCndyaXRlX2ZpbGVzOgogLSBwYXRoOiAvZXRjL3B1cHBldGxhYnMvcHVwcGV0L3B1cHBldC5jb25mCiAgIG93bmVyOiByb290OnJvb3QKICAgcGVybWlzc2lvbnM6ICcwNDQ0JwogICBjb250ZW50OiB8CiAgICAgW21haW5dCiAgICAgY2VydG5hbWUgPSBiYXNlLnRlc3RpbmcuYnd0c2kuY24KICAgICBlbnZpcm9ubWVudCA9IGNoaW5hcGF5CiAgICAgW2FnZW50XQogICAgIHJ1bmludGVydmFsID0gMTAweQogICAgIHNlcnZlciA9IHB1cHBldC5id3RzaS5jbgogICAgIG5vZGVfbmFtZSA9IGZhY3RlcgogICAgIG5vZGVfbmFtZV9mYWN0ID0gZnFkbgogICAgIHNwbGF5ID0gdHJ1ZQogICAgIHNwbGF5bGltaXQgPSA1bQo=</value>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     </userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: </DescribeInstanceAttributeResponse>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] DEBUG: Request ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ REQUEST POST-SIGN ]-----------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: POST / HTTP/1.1
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Host: ec2.cn-northwest-1.amazonaws.com.cn
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: User-Agent: aws-sdk-go/1.13.32 (go1.9.2; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.7
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Length: 95
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/ec2/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-security-token, Signature=60ac431f06b221bf7fe6d53ee72de1babb1aad5a5a4d17917e4d2f78a7533fef
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: application/x-www-form-urlencoded; charset=utf-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Date: 20180426T110036Z
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Accept-Encoding: gzip
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Action=DescribeInstanceCreditSpecifications&InstanceId.1=i-022a9894321a6d374&Version=2016-11-15
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Response ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 400 Bad Request
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:37 GMT
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <Response><Errors><Error><Code>UnsupportedOperation</Code><Message>The functionality you requested is not available in this region.</Message></Error></Errors><RequestID>53ace3cc-2597-49a0-99b2-3b9f1cb8567d</RequestID></Response>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Validate Response ec2/DescribeInstanceCreditSpecifications failed, not retrying, error UnsupportedOperation: The functionality you requested is not available in this region.
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalApplyPost, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalSequence, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [DEBUG] Uploading remote state to S3: {
  Body: buffer(0xc4203e17d0),
  Bucket: ""bwts-terraform-bucket-chinapay"",
  ContentLength: 20792,
  ContentType: ""application/json"",
  Key: ""cn-northwest-1/riak/terraform.tfstate"",
  ServerSideEncryption: ""AES256""
}
2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Request s3/PutObject Details:
---[ REQUEST POST-SIGN ]-----------------------------
PUT /cn-northwest-1/riak/terraform.tfstate HTTP/1.1
Host: bwts-terraform-bucket-chinapay.s3.cn-northwest-1.amazonaws.com.cn
User-Agent: aws-sdk-go/1.12.75 (go1.10.1; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.6
Content-Length: 20792
Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/s3/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-content-sha256;x-amz-date;x-amz-security-token;x-amz-server-side-encryption, Signature=8aa16110ae06a99b503e1f0546a4d6cf208fdf658ca29420baa2d649cec043e2
Content-Type: application/json
X-Amz-Content-Sha256: 04110e3e4cd97aa3e89cfe2f03487922bfd6b6346ec6dfe3fbe8fad9755e18c2
X-Amz-Date: 20180426T110037Z
X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
X-Amz-Server-Side-Encryption: AES256
Accept-Encoding: gzip

{
    ""version"": 3,
    ""terraform_version"": ""0.11.6"",
    ""serial"": 1,
    ""lineage"": ""b9c3c084-789e-7472-0b18-8698b4afc854"",
    ""modules"": [
        {
            ""path"": [
                ""root""
            ],
            ""outputs"": {},
            ""resources"": {
                ""data.terraform_remote_state.security_groups"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""bastion_host"": ""sg-e29feb8b"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/dev-stack-sgs/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""external_lb_sg_id"": ""sg-a55027cc"",
                            ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                            ""rundeck"": ""sg-b39eeada"",
                            ""stack_it_run_access_sg_id"": ""sg-9d5f28f4"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                },
                ""data.terraform_remote_state.vpc"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/vpc/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                            ""private_subnets"": ""subnet-454c962c,subnet-9722ddec"",
                            ""public_subnets"": ""subnet-5e4d9737,subnet-9022ddeb"",
                            ""vpc_cidr"": ""192.168.0.0/19"",
                            ""vpc_id"": ""vpc-34c61f5d"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""docdb""
            ],
            ""outputs"": {},
            ""resources"": {
                ""aws_instance.riak"": {
                    ""type"": ""aws_instance"",
                    ""depends_on"": [
                        ""data.template_file.cloud-init-riak""
                    ],
                    ""primary"": {
                        ""id"": ""i-022a9894321a6d374"",
                        ""attributes"": {
                            ""ami"": ""ami-6ec1d50c"",
                            ""associate_public_ip_address"": ""false"",
                            ""availability_zone"": ""cn-northwest-1a"",
                            ""disable_api_termination"": ""false"",
                            ""ebs_block_device.#"": ""4"",
                            ""ebs_block_device.3965576335.delete_on_termination"": ""false"",
                            ""ebs_block_device.3965576335.device_name"": ""/dev/xvdd"",
                            ""ebs_block_device.3965576335.encrypted"": ""false"",
                            ""ebs_block_device.3965576335.iops"": ""300"",
                            ""ebs_block_device.3965576335.snapshot_id"": """",
                            ""ebs_block_device.3965576335.volume_id"": ""vol-09cde364159031c5d"",
                            ""ebs_block_device.3965576335.volume_size"": ""100"",
                            ""ebs_block_device.3965576335.volume_type"": ""gp2"",
                            ""ebs_block_device.3986656952.delete_on_termination"": ""false"",
                            ""ebs_block_device.3986656952.device_name"": ""/dev/xvde"",
                            ""ebs_block_device.3986656952.encrypted"": ""false"",
                            ""ebs_block_device.3986656952.iops"": ""300"",
                            ""ebs_block_device.3986656952.snapshot_id"": """",
                            ""ebs_block_device.3986656952.volume_id"": ""vol-09c14e768bdd6dd4b"",
                            ""ebs_block_device.3986656952.volume_size"": ""100"",
                            ""ebs_block_device.3986656952.volume_type"": ""gp2"",
                            ""ebs_block_device.3994770134.delete_on_termination"": ""false"",
                            ""ebs_block_device.3994770134.device_name"": ""/dev/xvdg"",
                            ""ebs_block_device.3994770134.encrypted"": ""false"",
                            ""ebs_block_device.3994770134.iops"": ""300"",
                            ""ebs_block_device.3994770134.snapshot_id"": """",
                            ""ebs_block_device.3994770134.volume_id"": ""vol-0e1b3ff63114f3003"",
                            ""ebs_block_device.3994770134.volume_size"": ""100"",
                            ""ebs_block_device.3994770134.volume_type"": ""gp2"",
                            ""ebs_block_device.4023988449.delete_on_termination"": ""false"",
                            ""ebs_block_device.4023988449.device_name"": ""/dev/xvdf"",
                            ""ebs_block_device.4023988449.encrypted"": ""false"",
                            ""ebs_block_device.4023988449.iops"": ""300"",
                            ""ebs_block_device.4023988449.snapshot_id"": """",
                            ""ebs_block_device.4023988449.volume_id"": ""vol-015467a2fec64cfdd"",
                            ""ebs_block_device.4023988449.volume_size"": ""100"",
                            ""ebs_block_device.4023988449.volume_type"": ""gp2"",
                            ""ebs_optimized"": ""false"",
                            ""ephemeral_block_device.#"": ""0"",
                            ""get_password_data"": ""false"",
                            ""iam_instance_profile"": """",
                            ""id"": ""i-022a9894321a6d374"",
                            ""instance_state"": ""running"",
                            ""instance_type"": ""t2.large"",
                            ""ipv6_addresses.#"": ""0"",
                            ""key_name"": ""pay_china"",
                            ""monitoring"": ""false"",
                            ""network_interface.#"": ""0"",
                            ""network_interface_id"": ""eni-fd55c3a4"",
                            ""placement_group"": """",
                            ""primary_network_interface_id"": ""eni-fd55c3a4"",
                            ""private_dns"": ""ip-192-168-14-135.cn-northwest-1.compute.internal"",
                            ""private_ip"": ""192.168.14.135"",
                            ""public_dns"": """",
                            ""public_ip"": """",
                            ""root_block_device.#"": ""1"",
                            ""root_block_device.0.delete_on_termination"": ""true"",
                            ""root_block_device.0.iops"": ""100"",
                            ""root_block_device.0.volume_id"": ""vol-0884c92d17ea04d83"",
                            ""root_block_device.0.volume_size"": ""20"",
                            ""root_block_device.0.volume_type"": ""gp2"",
                            ""security_groups.#"": ""0"",
                            ""source_dest_check"": ""true"",
                            ""subnet_id"": ""subnet-454c962c"",
                            ""tags.%"": ""9"",
                            ""tags.Decomission_Date"": ""never"",
                            ""tags.Environment"": ""chinapay"",
                            ""tags.Name"": ""docdb.pay.cn-northwest-1.test.bwtsi.cn"",
                            ""tags.Owner"": ""operations"",
                            ""tags.Purpose"": ""Riak instance"",
                            ""tags.Role"": ""docdb"",
                            ""tags.Stackname"": ""pay"",
                            ""tags.Started_By"": ""operations"",
                            ""tags.Warning"": ""Managed by terraform, do not edit"",
                            ""tenancy"": ""default"",
                            ""user_data"": ""f35050bdeefa2a2d9f354c0e699a5f2d7c393365"",
                            ""volume_tags.%"": ""0"",
                            ""vpc_security_group_ids.#"": ""1"",
                            ""vpc_security_group_ids.2301982502"": ""sg-9d5f28f4""
                        },
                        ""meta"": {
                            ""e2bfb730-ecaa-11e6-8f88-34363bc7c4c0"": {
                                ""create"": 600000000000,
                                ""delete"": 1200000000000,
                                ""update"": 600000000000
                            },
                            ""schema_version"": ""1""
                        },
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.aws""
                },
                ""data.template_file.cloud-init-riak"": {
                    ""type"": ""template_file"",
                    ""depends_on"": [],
                    ""primary"": {
                        ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                        ""attributes"": {
                            ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                            ""rendered"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo pay \u003e /etc/tradeshift/stackname\""\n - \""echo docdb-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 docdb-$INSTANCE_ID.cn-northwest-1.test.bwtsi.cn docdb-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac 'dr69ZUGVm0Ep1Eo/xBoOTcefuKVx' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = base.testing.bwtsi.cn\n     environment = chinapay\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""template"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo ${STACK_NAME} \u003e /etc/tradeshift/stackname\""\n - \""echo ${HOSTNAME}-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 ${HOSTNAME}-$INSTANCE_ID.${REGION_DNS} ${HOSTNAME}-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac '${DISK_ENCRYPTION_KEY}' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = ${CERT_NAME}\n     environment = ${ENVIRONMENT}\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""vars.%"": ""6"",
                            ""vars.CERT_NAME"": ""base.testing.bwtsi.cn"",
                            ""vars.DISK_ENCRYPTION_KEY"": ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx"",
                            ""vars.ENVIRONMENT"": ""chinapay"",
                            ""vars.HOSTNAME"": ""docdb"",
                            ""vars.REGION_DNS"": ""cn-northwest-1.test.bwtsi.cn"",
                            ""vars.STACK_NAME"": ""pay""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.template""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""environment-common""
            ],
            ""outputs"": {
                ""cert_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""base.testing.bwtsi.cn""
                },
                ""domain_name_search"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test.bwtsi.cn""
                },
                ""environment_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""chinapay""
                },
                ""environment_shortname"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                },
                ""security_group_name_postfix"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": "".chinapay""
                },
                ""site"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""global-common""
            ],
            ""outputs"": {
                ""all_cidr_eu_west_1"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16,172.25.128.0/21,172.25.120.0/21,172.25.112.0/21,172.31.248.0/21,172.31.240.0/21,172.21.0.0/19,172.19.0.0/19,172.22.0.0/19,172.18.0.0/19""
                },
                ""base_tradeshift_net_account_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""694518486591""
                },
                ""gcsops_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.17.22.143/32""
                },
                ""gcsops_cn_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""54.223.95.7/32,54.223.198.170/32,54.223.211.136/32,52.80.34.103/32""
                },
                ""office_ips"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,178.49.148.100/32,87.243.3.34/32,109.166.189.50/32,78.40.84.83/32,4.53.137.82/32,173.247.199.142/32,58.211.225.90/32,202.181.248.19/32,109.70.48.99/32""
                },
                ""prod_base_tradeshift_net_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""prod.base.tradeshift.net""
                },
                ""prod_base_tradeshift_net_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16""
                },
                ""prod_base_tradeshift_net_vpc_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""vpc-264c9042""
                },
                ""prod_ts_sv_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.50.175.210/32,52.30.44.136/32,52.50.189.21/32""
                },
                ""test_bwtsi_cn_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/19""
                },
                ""test_bwtsi_cn_vpc_private_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.12.0/22,192.168.16.0/22""
                },
                ""test_bwtsi_cn_vpc_public_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/22,192.168.4.0/22""
                },
                ""tradeshift_com_public_zone_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""Z2OX0I8SM94425""
                },
                ""translation_service_clients"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,4.53.137.82/32,173.247.199.142/32,130.185.137.106/32,202.181.248.19/32,52.17.87.187/32,52.30.44.136/32,52.30.58.232/32,52.31.203.95/32,52.49.119.80/32,52.49.49.111/32,52.49.5.171/32,52.50.108.6/32,52.50.175.210/32,52.50.189.21/32,52.50.255.154/32,52.50.91.189/32,54.195.199.108/32,54.78.39.106/32,58.211.225.90/32,89.150.143.118/32,54.222.150.122/32,54.222.194.56/32,109.70.48.99/32""
                },
                ""truebn_org_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""34.253.176.198/32,34.241.59.39/32""
                },
                ""userdata_path"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/modules/eff596488a3055adf7024741dffb9ca1/..""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""regional-common""
            ],
            ""outputs"": {
                ""availability_zones"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1a,cn-northwest-1b""
                },
                ""backend_region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""base_ami_1604"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-6ec1d50c""
                },
                ""base_ami_1604_zfs"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-edf8ec8f""
                },
                ""chinapay_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""key_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""pay_china""
                },
                ""region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""region_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""region_env"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        }
    ]
}

-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go] DEBUG: Response s3/PutObject Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 200 OK
Connection: close
Content-Length: 0
Date: Thu, 26 Apr 2018 11:00:39 GMT
Etag: ""807c608ab629b9b73914da058c923c20""
Server: AmazonS3
X-Amz-Id-2: 5Af+DuU/y0Ngtkb6wCq1R0Oz+ZrOYi4apbPsCZTSlwhSqnqBNB64rFL4HfBG6WB9GETdRmQyKnw=
X-Amz-Request-Id: 7984823D8787C039
X-Amz-Server-Side-Encryption: AES256


-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go]
2018/04/26 19:00:38 [DEBUG] plugin: waiting for all plugin processes to complete...

Error: Error applying plan:

1 error(s) occurred:

* module.docdb.aws_instance.riak: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d

2018-04-26T19:00:38.547+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:38 [ERR] plugin: plugin server: accept unix /var/folders/k0/hk5r4k696x901sk4mh_vwcg40000gn/T/plugin243311916: use of closed network connection
Terraform does not automatically rollback in the face of errors.
Instead, your Terraform state file has been partially updated with
any resources that successfully completed. Please address the error
above and apply again to incrementally change your infrastructure.


2018-04-26T19:00:38.550+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-template_v1.0.0_x4
2018-04-26T19:00:38.551+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-aws_v1.16.0_x4
2018-04-26T19:00:38.555+0800 [DEBUG] plugin: plugin process exited: path=/usr/local/bin/terraform-provider-alicloud

```
# Expected Behavior
can create aws instance in China AWS
# Actual Behavior
I can create aws instance in China AWS with provider.aws v1.15.0
but I can't create aws instance with provider.aws v1.16.0",SignedHeaders=content-length;content-type;host;x-amz-content-,https://github.com/hashicorp/terraform-provider-aws
46,4359,"# Terraform Version

Terraform v0.11.6
provider.aws v1.16.0

# Affected Resource(s)
aws_instance_ec2
# Terraform Configuration Files
module ""docdb"" {
  source = ""../../../../../../tradeshift-puppet/terraform/modules/aws/instances-cn/riak""
  environment = ""${var.pull_request}""
  stackname = ""${var.stackname}""
  role = ""docdb""
  owner = ""${var.owner}""
  decomission_date = ""${var.decomission_date}""
  instance_type = ""t2.large""
  instance_ami = ""${module.regional-common.base_ami_1604}""
  instance_key_name = ""${module.regional-common.key_name}""
  disable_api_termination = false
  ebs_volume_size = ""100""
  ebs_delete_on_termination = ""false""
  ebs_optimized = false
  vpc_security_groups = ""${data.terraform_remote_state.security_groups.stack_it_run_access_sg_id}""
  vpc_subnets = ""${data.terraform_remote_state.vpc.private_subnets}""
  postfix = "".${var.stackname}""
  dns_region_name = ""${module.regional-common.region_dns}""
  disk_encryption_key = ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx""
  count = ""1""
  cert_name = ""${module.environment-common.cert_name}""
}

# Debug Output
```
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 200 OK
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: text/xml;charset=UTF-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:36 GMT
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Vary: Accept-Encoding
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <DescribeInstanceAttributeResponse xmlns=""http://ec2.amazonaws.com/doc/2016-11-15/"">
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <requestId>35e6cd4e-cb70-4016-a250-53f0880cc9be</requestId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <instanceId>i-022a9894321a6d374</instanceId>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     <userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:         <value>I2Nsb3VkLWNvbmZpZwptb3VudHM6CiAtIFtlcGhlbWVyYWwwLCBudWxsXQoKcHJlc2VydmVfaG9zdG5hbWU6IHRydWUKbWFuYWdlX2V0Y19ob3N0czogZmFsc2UKCmJvb3RjbWQ6CiAtICJlY2hvIHBheSA+IC9ldGMvdHJhZGVzaGlmdC9zdGFja25hbWUiCiAtICJlY2hvIGRvY2RiLSRJTlNUQU5DRV9JRCA+IC9ldGMvaG9zdG5hbWU7IGhvc3RuYW1lIC1GIC9ldGMvaG9zdG5hbWUiCiAtICJzZWQgLWkgLWUgJy9eMTI3LjAuMC4xL2QnIC9ldGMvaG9zdHM7IGVjaG8gMTI3LjAuMC4xIGRvY2RiLSRJTlNUQU5DRV9JRC5jbi1ub3J0aHdlc3QtMS50ZXN0LmJ3dHNpLmNuIGRvY2RiLSRJTlNUQU5DRV9JRCBsb2NhbGhvc3QgPj4gL2V0Yy9ob3N0cyIKICMgRGlzayBlbmNyeXB0aW9uIGtleSBmb3IgZXBoZW1lcmFsIGRpc2sgZHJpdmVzLCBzYXZlZCB0byByYW0gZHJpdmUKICMgVGhlIHNlZCBwYXJ0IHJlbW92ZXMgdGhlIChzdGRpbik9IG91dHB1dCBmcm9tIG9wZW5zc2wgZGdzdAogLSAiZWNobyAkSU5TVEFOQ0VfSUQgfCBvcGVuc3NsIGRnc3QgLXNoYTI1NiAtaG1hYyAnZHI2OVpVR1ZtMEVwMUVvL3hCb09UY2VmdUtWeCcgfCBzZWQgJ3MvXi4qPSAvLycgPiAvZGV2L3NobS9lbmNyeXB0ZWQtZGlzay5sdWtzLmtleSAmJiBjaG1vZCA0MDAgL2Rldi9zaG0vZW5jcnlwdGVkLWRpc2subHVrcy5rZXkiCgojIERvbid0IG92ZXJyaWRlIG91ciBhcHQgcmVwb3NpdG9yeSBsaXN0IG9uIGZpcnN0IGJvb3QKYXB0X3ByZXNlcnZlX3NvdXJjZXNfbGlzdDogdHJ1ZQoKIyBEb24ndCBwcmludCB0aGUgbmV3IHNzaCBrZXlzIG9uIHRoZSBjb25zb2xlCm5vX3NzaF9maW5nZXJwcmludHM6IHRydWUKCndyaXRlX2ZpbGVzOgogLSBwYXRoOiAvZXRjL3B1cHBldGxhYnMvcHVwcGV0L3B1cHBldC5jb25mCiAgIG93bmVyOiByb290OnJvb3QKICAgcGVybWlzc2lvbnM6ICcwNDQ0JwogICBjb250ZW50OiB8CiAgICAgW21haW5dCiAgICAgY2VydG5hbWUgPSBiYXNlLnRlc3RpbmcuYnd0c2kuY24KICAgICBlbnZpcm9ubWVudCA9IGNoaW5hcGF5CiAgICAgW2FnZW50XQogICAgIHJ1bmludGVydmFsID0gMTAweQogICAgIHNlcnZlciA9IHB1cHBldC5id3RzaS5jbgogICAgIG5vZGVfbmFtZSA9IGZhY3RlcgogICAgIG5vZGVfbmFtZV9mYWN0ID0gZnFkbgogICAgIHNwbGF5ID0gdHJ1ZQogICAgIHNwbGF5bGltaXQgPSA1bQo=</value>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:     </userData>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: </DescribeInstanceAttributeResponse>
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:36 [DEBUG] [aws-sdk-go] DEBUG: Request ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ REQUEST POST-SIGN ]-----------------------------
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: POST / HTTP/1.1
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Host: ec2.cn-northwest-1.amazonaws.com.cn
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: User-Agent: aws-sdk-go/1.13.32 (go1.9.2; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.7
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Length: 95
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/ec2/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-security-token, Signature=60ac431f06b221bf7fe6d53ee72de1babb1aad5a5a4d17917e4d2f78a7533fef
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Content-Type: application/x-www-form-urlencoded; charset=utf-8
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Date: 20180426T110036Z
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Accept-Encoding: gzip
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Action=DescribeInstanceCreditSpecifications&InstanceId.1=i-022a9894321a6d374&Version=2016-11-15
2018-04-26T19:00:36.718+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Response ec2/DescribeInstanceCreditSpecifications Details:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: ---[ RESPONSE ]--------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: HTTP/1.1 400 Bad Request
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Connection: close
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Transfer-Encoding: chunked
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Date: Thu, 26 Apr 2018 11:00:37 GMT
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: Server: AmazonEC2
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4:
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: -----------------------------------------------------
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] <?xml version=""1.0"" encoding=""UTF-8""?>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: <Response><Errors><Error><Code>UnsupportedOperation</Code><Message>The functionality you requested is not available in this region.</Message></Error></Errors><RequestID>53ace3cc-2597-49a0-99b2-3b9f1cb8567d</RequestID></Response>
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Validate Response ec2/DescribeInstanceCreditSpecifications failed, not retrying, error UnsupportedOperation: The functionality you requested is not available in this region.
2018-04-26T19:00:37.370+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalApplyPost, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [ERROR] root.docdb: eval: *terraform.EvalSequence, err: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d
2018/04/26 19:00:37 [DEBUG] Uploading remote state to S3: {
  Body: buffer(0xc4203e17d0),
  Bucket: ""bwts-terraform-bucket-chinapay"",
  ContentLength: 20792,
  ContentType: ""application/json"",
  Key: ""cn-northwest-1/riak/terraform.tfstate"",
  ServerSideEncryption: ""AES256""
}
2018/04/26 19:00:37 [DEBUG] [aws-sdk-go] DEBUG: Request s3/PutObject Details:
---[ REQUEST POST-SIGN ]-----------------------------
PUT /cn-northwest-1/riak/terraform.tfstate HTTP/1.1
Host: bwts-terraform-bucket-chinapay.s3.cn-northwest-1.amazonaws.com.cn
User-Agent: aws-sdk-go/1.12.75 (go1.10.1; darwin; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.11.6
Content-Length: 20792
Authorization: AWS4-HMAC-SHA256 Credential=ASIAOS43C3BRNG62F4KQ/20180426/cn-northwest-1/s3/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-content-sha256;x-amz-date;x-amz-security-token;x-amz-server-side-encryption, Signature=8aa16110ae06a99b503e1f0546a4d6cf208fdf658ca29420baa2d649cec043e2
Content-Type: application/json
X-Amz-Content-Sha256: 04110e3e4cd97aa3e89cfe2f03487922bfd6b6346ec6dfe3fbe8fad9755e18c2
X-Amz-Date: 20180426T110037Z
X-Amz-Security-Token: FQoDYXdzECMaDBn0dTR5Adi+yqOKaSKBAunC9koGEWSi+glPaQcXYEBDxkkbz8wEPzhtRgEOofTKazqo1aOGnVCw4KltCP8JviHPrnGes/0BAfN0CSfANVZfkUGRRczLEtMWKj1j9gFkXPELpfxO10DI/iX4lxe3vdzQv2LeY0xFLLKW8PXNq4/nbjrNgr/2VTiL8IYECd9lzDlKsgwYY7W1IdMqA1KcXX41Q1CDifRou5KCBehUg9NE9mqwKcHMtikEcvM76PIZ33CkXWX9OacMjlk+YNf0/Ae1lhcq8qAAXDwPgJdb4X7OQiYyOh1HI/HbHIRw/Ae/V9t6OAFmz1662A2xHLSysyV74zuc17EYgN4t+Hpp9feLKLPVhtcF
X-Amz-Server-Side-Encryption: AES256
Accept-Encoding: gzip

{
    ""version"": 3,
    ""terraform_version"": ""0.11.6"",
    ""serial"": 1,
    ""lineage"": ""b9c3c084-789e-7472-0b18-8698b4afc854"",
    ""modules"": [
        {
            ""path"": [
                ""root""
            ],
            ""outputs"": {},
            ""resources"": {
                ""data.terraform_remote_state.security_groups"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""bastion_host"": ""sg-e29feb8b"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/dev-stack-sgs/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""external_lb_sg_id"": ""sg-a55027cc"",
                            ""id"": ""2018-04-26 11:00:04.859497096 +0000 UTC"",
                            ""rundeck"": ""sg-b39eeada"",
                            ""stack_it_run_access_sg_id"": ""sg-9d5f28f4"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                },
                ""data.terraform_remote_state.vpc"": {
                    ""type"": ""terraform_remote_state"",
                    ""depends_on"": [
                        ""module.regional-common""
                    ],
                    ""primary"": {
                        ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                        ""attributes"": {
                            ""backend"": ""s3"",
                            ""config.%"": ""4"",
                            ""config.bucket"": ""bwts-terraform-bucket-chinapay"",
                            ""config.encrypt"": ""1"",
                            ""config.key"": ""cn-northwest-1/vpc/terraform.tfstate"",
                            ""config.region"": ""cn-northwest-1"",
                            ""environment"": ""default"",
                            ""id"": ""2018-04-26 11:00:04.858615081 +0000 UTC"",
                            ""private_subnets"": ""subnet-454c962c,subnet-9722ddec"",
                            ""public_subnets"": ""subnet-5e4d9737,subnet-9022ddeb"",
                            ""vpc_cidr"": ""192.168.0.0/19"",
                            ""vpc_id"": ""vpc-34c61f5d"",
                            ""workspace"": ""default""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.terraform""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""docdb""
            ],
            ""outputs"": {},
            ""resources"": {
                ""aws_instance.riak"": {
                    ""type"": ""aws_instance"",
                    ""depends_on"": [
                        ""data.template_file.cloud-init-riak""
                    ],
                    ""primary"": {
                        ""id"": ""i-022a9894321a6d374"",
                        ""attributes"": {
                            ""ami"": ""ami-6ec1d50c"",
                            ""associate_public_ip_address"": ""false"",
                            ""availability_zone"": ""cn-northwest-1a"",
                            ""disable_api_termination"": ""false"",
                            ""ebs_block_device.#"": ""4"",
                            ""ebs_block_device.3965576335.delete_on_termination"": ""false"",
                            ""ebs_block_device.3965576335.device_name"": ""/dev/xvdd"",
                            ""ebs_block_device.3965576335.encrypted"": ""false"",
                            ""ebs_block_device.3965576335.iops"": ""300"",
                            ""ebs_block_device.3965576335.snapshot_id"": """",
                            ""ebs_block_device.3965576335.volume_id"": ""vol-09cde364159031c5d"",
                            ""ebs_block_device.3965576335.volume_size"": ""100"",
                            ""ebs_block_device.3965576335.volume_type"": ""gp2"",
                            ""ebs_block_device.3986656952.delete_on_termination"": ""false"",
                            ""ebs_block_device.3986656952.device_name"": ""/dev/xvde"",
                            ""ebs_block_device.3986656952.encrypted"": ""false"",
                            ""ebs_block_device.3986656952.iops"": ""300"",
                            ""ebs_block_device.3986656952.snapshot_id"": """",
                            ""ebs_block_device.3986656952.volume_id"": ""vol-09c14e768bdd6dd4b"",
                            ""ebs_block_device.3986656952.volume_size"": ""100"",
                            ""ebs_block_device.3986656952.volume_type"": ""gp2"",
                            ""ebs_block_device.3994770134.delete_on_termination"": ""false"",
                            ""ebs_block_device.3994770134.device_name"": ""/dev/xvdg"",
                            ""ebs_block_device.3994770134.encrypted"": ""false"",
                            ""ebs_block_device.3994770134.iops"": ""300"",
                            ""ebs_block_device.3994770134.snapshot_id"": """",
                            ""ebs_block_device.3994770134.volume_id"": ""vol-0e1b3ff63114f3003"",
                            ""ebs_block_device.3994770134.volume_size"": ""100"",
                            ""ebs_block_device.3994770134.volume_type"": ""gp2"",
                            ""ebs_block_device.4023988449.delete_on_termination"": ""false"",
                            ""ebs_block_device.4023988449.device_name"": ""/dev/xvdf"",
                            ""ebs_block_device.4023988449.encrypted"": ""false"",
                            ""ebs_block_device.4023988449.iops"": ""300"",
                            ""ebs_block_device.4023988449.snapshot_id"": """",
                            ""ebs_block_device.4023988449.volume_id"": ""vol-015467a2fec64cfdd"",
                            ""ebs_block_device.4023988449.volume_size"": ""100"",
                            ""ebs_block_device.4023988449.volume_type"": ""gp2"",
                            ""ebs_optimized"": ""false"",
                            ""ephemeral_block_device.#"": ""0"",
                            ""get_password_data"": ""false"",
                            ""iam_instance_profile"": """",
                            ""id"": ""i-022a9894321a6d374"",
                            ""instance_state"": ""running"",
                            ""instance_type"": ""t2.large"",
                            ""ipv6_addresses.#"": ""0"",
                            ""key_name"": ""pay_china"",
                            ""monitoring"": ""false"",
                            ""network_interface.#"": ""0"",
                            ""network_interface_id"": ""eni-fd55c3a4"",
                            ""placement_group"": """",
                            ""primary_network_interface_id"": ""eni-fd55c3a4"",
                            ""private_dns"": ""ip-192-168-14-135.cn-northwest-1.compute.internal"",
                            ""private_ip"": ""192.168.14.135"",
                            ""public_dns"": """",
                            ""public_ip"": """",
                            ""root_block_device.#"": ""1"",
                            ""root_block_device.0.delete_on_termination"": ""true"",
                            ""root_block_device.0.iops"": ""100"",
                            ""root_block_device.0.volume_id"": ""vol-0884c92d17ea04d83"",
                            ""root_block_device.0.volume_size"": ""20"",
                            ""root_block_device.0.volume_type"": ""gp2"",
                            ""security_groups.#"": ""0"",
                            ""source_dest_check"": ""true"",
                            ""subnet_id"": ""subnet-454c962c"",
                            ""tags.%"": ""9"",
                            ""tags.Decomission_Date"": ""never"",
                            ""tags.Environment"": ""chinapay"",
                            ""tags.Name"": ""docdb.pay.cn-northwest-1.test.bwtsi.cn"",
                            ""tags.Owner"": ""operations"",
                            ""tags.Purpose"": ""Riak instance"",
                            ""tags.Role"": ""docdb"",
                            ""tags.Stackname"": ""pay"",
                            ""tags.Started_By"": ""operations"",
                            ""tags.Warning"": ""Managed by terraform, do not edit"",
                            ""tenancy"": ""default"",
                            ""user_data"": ""f35050bdeefa2a2d9f354c0e699a5f2d7c393365"",
                            ""volume_tags.%"": ""0"",
                            ""vpc_security_group_ids.#"": ""1"",
                            ""vpc_security_group_ids.2301982502"": ""sg-9d5f28f4""
                        },
                        ""meta"": {
                            ""e2bfb730-ecaa-11e6-8f88-34363bc7c4c0"": {
                                ""create"": 600000000000,
                                ""delete"": 1200000000000,
                                ""update"": 600000000000
                            },
                            ""schema_version"": ""1""
                        },
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.aws""
                },
                ""data.template_file.cloud-init-riak"": {
                    ""type"": ""template_file"",
                    ""depends_on"": [],
                    ""primary"": {
                        ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                        ""attributes"": {
                            ""id"": ""a5f1f2b9d367e2b212c58642fd07eb0b9d6f956c763b7bc5e787b162bc75538d"",
                            ""rendered"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo pay \u003e /etc/tradeshift/stackname\""\n - \""echo docdb-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 docdb-$INSTANCE_ID.cn-northwest-1.test.bwtsi.cn docdb-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac 'dr69ZUGVm0Ep1Eo/xBoOTcefuKVx' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = base.testing.bwtsi.cn\n     environment = chinapay\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""template"": ""#cloud-config\nmounts:\n - [ephemeral0, null]\n\npreserve_hostname: true\nmanage_etc_hosts: false\n\nbootcmd:\n - \""echo ${STACK_NAME} \u003e /etc/tradeshift/stackname\""\n - \""echo ${HOSTNAME}-$INSTANCE_ID \u003e /etc/hostname; hostname -F /etc/hostname\""\n - \""sed -i -e '/^127.0.0.1/d' /etc/hosts; echo 127.0.0.1 ${HOSTNAME}-$INSTANCE_ID.${REGION_DNS} ${HOSTNAME}-$INSTANCE_ID localhost \u003e\u003e /etc/hosts\""\n # Disk encryption key for ephemeral disk drives, saved to ram drive\n # The sed part removes the (stdin)= output from openssl dgst\n - \""echo $INSTANCE_ID | openssl dgst -sha256 -hmac '${DISK_ENCRYPTION_KEY}' | sed 's/^.*= //' \u003e /dev/shm/encrypted-disk.luks.key \u0026\u0026 chmod 400 /dev/shm/encrypted-disk.luks.key\""\n\n# Don't override our apt repository list on first boot\napt_preserve_sources_list: true\n\n# Don't print the new ssh keys on the console\nno_ssh_fingerprints: true\n\nwrite_files:\n - path: /etc/puppetlabs/puppet/puppet.conf\n   owner: root:root\n   permissions: '0444'\n   content: |\n     [main]\n     certname = ${CERT_NAME}\n     environment = ${ENVIRONMENT}\n     [agent]\n     runinterval = 100y\n     server = puppet.bwtsi.cn\n     node_name = facter\n     node_name_fact = fqdn\n     splay = true\n     splaylimit = 5m\n"",
                            ""vars.%"": ""6"",
                            ""vars.CERT_NAME"": ""base.testing.bwtsi.cn"",
                            ""vars.DISK_ENCRYPTION_KEY"": ""dr69ZUGVm0Ep1Eo/xBoOTcefuKVx"",
                            ""vars.ENVIRONMENT"": ""chinapay"",
                            ""vars.HOSTNAME"": ""docdb"",
                            ""vars.REGION_DNS"": ""cn-northwest-1.test.bwtsi.cn"",
                            ""vars.STACK_NAME"": ""pay""
                        },
                        ""meta"": {},
                        ""tainted"": false
                    },
                    ""deposed"": [],
                    ""provider"": ""provider.template""
                }
            },
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""environment-common""
            ],
            ""outputs"": {
                ""cert_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""base.testing.bwtsi.cn""
                },
                ""domain_name_search"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test.bwtsi.cn""
                },
                ""environment_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""chinapay""
                },
                ""environment_shortname"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                },
                ""security_group_name_postfix"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": "".chinapay""
                },
                ""site"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""global-common""
            ],
            ""outputs"": {
                ""all_cidr_eu_west_1"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16,172.25.128.0/21,172.25.120.0/21,172.25.112.0/21,172.31.248.0/21,172.31.240.0/21,172.21.0.0/19,172.19.0.0/19,172.22.0.0/19,172.18.0.0/19""
                },
                ""base_tradeshift_net_account_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""694518486591""
                },
                ""gcsops_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.17.22.143/32""
                },
                ""gcsops_cn_cidr"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""54.223.95.7/32,54.223.198.170/32,54.223.211.136/32,52.80.34.103/32""
                },
                ""office_ips"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,178.49.148.100/32,87.243.3.34/32,109.166.189.50/32,78.40.84.83/32,4.53.137.82/32,173.247.199.142/32,58.211.225.90/32,202.181.248.19/32,109.70.48.99/32""
                },
                ""prod_base_tradeshift_net_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""prod.base.tradeshift.net""
                },
                ""prod_base_tradeshift_net_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""10.88.0.0/16""
                },
                ""prod_base_tradeshift_net_vpc_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""vpc-264c9042""
                },
                ""prod_ts_sv_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""52.50.175.210/32,52.30.44.136/32,52.50.189.21/32""
                },
                ""test_bwtsi_cn_vpc_cdir"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/19""
                },
                ""test_bwtsi_cn_vpc_private_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.12.0/22,192.168.16.0/22""
                },
                ""test_bwtsi_cn_vpc_public_subnets"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""192.168.0.0/22,192.168.4.0/22""
                },
                ""tradeshift_com_public_zone_id"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""Z2OX0I8SM94425""
                },
                ""translation_service_clients"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""5.56.144.196/32,5.56.144.198/32,4.53.137.82/32,173.247.199.142/32,130.185.137.106/32,202.181.248.19/32,52.17.87.187/32,52.30.44.136/32,52.30.58.232/32,52.31.203.95/32,52.49.119.80/32,52.49.49.111/32,52.49.5.171/32,52.50.108.6/32,52.50.175.210/32,52.50.189.21/32,52.50.255.154/32,52.50.91.189/32,54.195.199.108/32,54.78.39.106/32,58.211.225.90/32,89.150.143.118/32,54.222.150.122/32,54.222.194.56/32,109.70.48.99/32""
                },
                ""truebn_org_nat_gateways"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""34.253.176.198/32,34.241.59.39/32""
                },
                ""userdata_path"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/modules/eff596488a3055adf7024741dffb9ca1/..""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        },
        {
            ""path"": [
                ""root"",
                ""regional-common""
            ],
            ""outputs"": {
                ""availability_zones"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1a,cn-northwest-1b""
                },
                ""backend_region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""base_ami_1604"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-6ec1d50c""
                },
                ""base_ami_1604_zfs"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""ami-edf8ec8f""
                },
                ""chinapay_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""key_name"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""pay_china""
                },
                ""region"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1""
                },
                ""region_dns"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test.bwtsi.cn""
                },
                ""region_env"": {
                    ""sensitive"": false,
                    ""type"": ""string"",
                    ""value"": ""cn-northwest-1.test""
                }
            },
            ""resources"": {},
            ""depends_on"": []
        }
    ]
}

-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go] DEBUG: Response s3/PutObject Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 200 OK
Connection: close
Content-Length: 0
Date: Thu, 26 Apr 2018 11:00:39 GMT
Etag: ""807c608ab629b9b73914da058c923c20""
Server: AmazonS3
X-Amz-Id-2: 5Af+DuU/y0Ngtkb6wCq1R0Oz+ZrOYi4apbPsCZTSlwhSqnqBNB64rFL4HfBG6WB9GETdRmQyKnw=
X-Amz-Request-Id: 7984823D8787C039
X-Amz-Server-Side-Encryption: AES256


-----------------------------------------------------
2018/04/26 19:00:38 [DEBUG] [aws-sdk-go]
2018/04/26 19:00:38 [DEBUG] plugin: waiting for all plugin processes to complete...

Error: Error applying plan:

1 error(s) occurred:

* module.docdb.aws_instance.riak: 1 error(s) occurred:

* aws_instance.riak: UnsupportedOperation: The functionality you requested is not available in this region.
	status code: 400, request id: 53ace3cc-2597-49a0-99b2-3b9f1cb8567d

2018-04-26T19:00:38.547+0800 [DEBUG] plugin.terraform-provider-aws_v1.16.0_x4: 2018/04/26 19:00:38 [ERR] plugin: plugin server: accept unix /var/folders/k0/hk5r4k696x901sk4mh_vwcg40000gn/T/plugin243311916: use of closed network connection
Terraform does not automatically rollback in the face of errors.
Instead, your Terraform state file has been partially updated with
any resources that successfully completed. Please address the error
above and apply again to incrementally change your infrastructure.


2018-04-26T19:00:38.550+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-template_v1.0.0_x4
2018-04-26T19:00:38.551+0800 [DEBUG] plugin: plugin process exited: path=/Users/jordanhuang/bwts-orchestration/terraform/bwtsi.cn/china-pay/cn-northwest-1/riak/.terraform/plugins/darwin_amd64/terraform-provider-aws_v1.16.0_x4
2018-04-26T19:00:38.555+0800 [DEBUG] plugin: plugin process exited: path=/usr/local/bin/terraform-provider-alicloud

```
# Expected Behavior
can create aws instance in China AWS
# Actual Behavior
I can create aws instance in China AWS with provider.aws v1.15.0
but I can't create aws instance with provider.aws v1.16.0",f35050bdeefa2a2d9f354c0e699a5f2d7c393365,https://github.com/hashicorp/terraform-provider-aws
47,3383,"When running `terraform apply` the console runs indefinitely if the user has an invalid `aws_session_token` but a valid `aws_access_key_id` and `aws_secret_access_key`. 

### Terraform Version
```
$  terraform -v
Terraform v0.11.3
+ provider.aws v1.9.0
+ provider.external v1.0.0
+ provider.null v1.0.0
+ provider.template v1.0.0
```
### AWS Example Credentials File 
```
$ cat ~/.aws/credentials
[default]
aws_access_key_id     = <VALID> OSIAJO22MN2TVEXAMPLE 
aws_secret_access_key = <VALID> erHSKM98c+afa418tkewJRjsdaJMxuiSgO99Xi7cE
aws_session_token     = <INVALID> FQoDYXdzEH8aDiudh41nfgrZUgNBtSL8AbD/RaUtmT3amBVTPQkjQqgNUXLhVjFGmq3Sn/1sXxL+gn4znkesHnYy3oTi4AsqoFnpZAjK95OC9+Z/7kJbZUmW05u4fGy7xO9ONqEh7eb+tJNjfXS4zwKrigy86HYEqo9omWLvNFsY5/rmHT3IIBtKfduKmbo0UehLCcBWymjlEZBn5xGiac/F4xG52WirAf8cF5JWH6u6b9A3aRdjFq2+Q//tBdcN6D/6OYH9AMMHVSQtaccFqCB8IOoK4+YLbn+qweo26LZOIpsx6XJMb/E+Lw9M4pBLKVCkY0KjemaIjloozWHL9KHO0a0OyFkesammoXDKmA/o4tivxyiz15LUBQ==
``` 

### Debug Output
```
$ terraform apply -var-file desired_cluster_profile.tfvars -var aws_profile=359820441116_Mesosphere-PowerUsers -var state=upgrade
data.external.whoami: Refreshing state...
data.template_file.os-setup: Refreshing state...
data.template_file.aws_ami: Refreshing state...
data.template_file.aws_ami_user: Refreshing state...
data.template_file.os-setup: Refreshing state...
data.template_file.aws_ami: Refreshing state...
data.template_file.aws_ami_user: Refreshing state...
^CInterrupt received.
Please wait for Terraform to exit or data loss may occur.
Gracefully shutting down...
v^CTwo interrupts received. Exiting immediately. Note that data
loss may have occurred.
Error: Error refreshing state: 2 error(s) occurred:

* provider.aws: NoCredentialProviders: no valid providers in chain. Deprecated.
	For verbose messaging see aws.Config.CredentialsChainVerboseErrors
* provider.aws.bursted-vpc: NoCredentialProviders: no valid providers in chain. Deprecated.
	For verbose messaging see aws.Config.CredentialsChainVerboseErrors

```


### Expected Behavior
What should have happened?
Error out asap.

### Actual Behavior
What actually happened?
Runs indefinitely. 

### Steps to Reproduce
Please list the steps required to reproduce the issue, for example:
1. `terraform apply`
",FQoDYXdzEH8aDiudh41nfgrZUgNBtSL8AbD+,https://github.com/hashicorp/terraform-provider-aws
48,3383,"When running `terraform apply` the console runs indefinitely if the user has an invalid `aws_session_token` but a valid `aws_access_key_id` and `aws_secret_access_key`. 

### Terraform Version
```
$  terraform -v
Terraform v0.11.3
+ provider.aws v1.9.0
+ provider.external v1.0.0
+ provider.null v1.0.0
+ provider.template v1.0.0
```
### AWS Example Credentials File 
```
$ cat ~/.aws/credentials
[default]
aws_access_key_id     = <VALID> OSIAJO22MN2TVEXAMPLE 
aws_secret_access_key = <VALID> erHSKM98c+afa418tkewJRjsdaJMxuiSgO99Xi7cE
aws_session_token     = <INVALID> FQoDYXdzEH8aDiudh41nfgrZUgNBtSL8AbD/RaUtmT3amBVTPQkjQqgNUXLhVjFGmq3Sn/1sXxL+gn4znkesHnYy3oTi4AsqoFnpZAjK95OC9+Z/7kJbZUmW05u4fGy7xO9ONqEh7eb+tJNjfXS4zwKrigy86HYEqo9omWLvNFsY5/rmHT3IIBtKfduKmbo0UehLCcBWymjlEZBn5xGiac/F4xG52WirAf8cF5JWH6u6b9A3aRdjFq2+Q//tBdcN6D/6OYH9AMMHVSQtaccFqCB8IOoK4+YLbn+qweo26LZOIpsx6XJMb/E+Lw9M4pBLKVCkY0KjemaIjloozWHL9KHO0a0OyFkesammoXDKmA/o4tivxyiz15LUBQ==
``` 

### Debug Output
```
$ terraform apply -var-file desired_cluster_profile.tfvars -var aws_profile=359820441116_Mesosphere-PowerUsers -var state=upgrade
data.external.whoami: Refreshing state...
data.template_file.os-setup: Refreshing state...
data.template_file.aws_ami: Refreshing state...
data.template_file.aws_ami_user: Refreshing state...
data.template_file.os-setup: Refreshing state...
data.template_file.aws_ami: Refreshing state...
data.template_file.aws_ami_user: Refreshing state...
^CInterrupt received.
Please wait for Terraform to exit or data loss may occur.
Gracefully shutting down...
v^CTwo interrupts received. Exiting immediately. Note that data
loss may have occurred.
Error: Error refreshing state: 2 error(s) occurred:

* provider.aws: NoCredentialProviders: no valid providers in chain. Deprecated.
	For verbose messaging see aws.Config.CredentialsChainVerboseErrors
* provider.aws.bursted-vpc: NoCredentialProviders: no valid providers in chain. Deprecated.
	For verbose messaging see aws.Config.CredentialsChainVerboseErrors

```


### Expected Behavior
What should have happened?
Error out asap.

### Actual Behavior
What actually happened?
Runs indefinitely. 

### Steps to Reproduce
Please list the steps required to reproduce the issue, for example:
1. `terraform apply`
",afa418tkewJRjsdaJMxuiSgO99Xi7cE,https://github.com/hashicorp/terraform-provider-aws
49,3383,"When running `terraform apply` the console runs indefinitely if the user has an invalid `aws_session_token` but a valid `aws_access_key_id` and `aws_secret_access_key`. 

### Terraform Version
```
$  terraform -v
Terraform v0.11.3
+ provider.aws v1.9.0
+ provider.external v1.0.0
+ provider.null v1.0.0
+ provider.template v1.0.0
```
### AWS Example Credentials File 
```
$ cat ~/.aws/credentials
[default]
aws_access_key_id     = <VALID> OSIAJO22MN2TVEXAMPLE 
aws_secret_access_key = <VALID> erHSKM98c+afa418tkewJRjsdaJMxuiSgO99Xi7cE
aws_session_token     = <INVALID> FQoDYXdzEH8aDiudh41nfgrZUgNBtSL8AbD/RaUtmT3amBVTPQkjQqgNUXLhVjFGmq3Sn/1sXxL+gn4znkesHnYy3oTi4AsqoFnpZAjK95OC9+Z/7kJbZUmW05u4fGy7xO9ONqEh7eb+tJNjfXS4zwKrigy86HYEqo9omWLvNFsY5/rmHT3IIBtKfduKmbo0UehLCcBWymjlEZBn5xGiac/F4xG52WirAf8cF5JWH6u6b9A3aRdjFq2+Q//tBdcN6D/6OYH9AMMHVSQtaccFqCB8IOoK4+YLbn+qweo26LZOIpsx6XJMb/E+Lw9M4pBLKVCkY0KjemaIjloozWHL9KHO0a0OyFkesammoXDKmA/o4tivxyiz15LUBQ==
``` 

### Debug Output
```
$ terraform apply -var-file desired_cluster_profile.tfvars -var aws_profile=359820441116_Mesosphere-PowerUsers -var state=upgrade
data.external.whoami: Refreshing state...
data.template_file.os-setup: Refreshing state...
data.template_file.aws_ami: Refreshing state...
data.template_file.aws_ami_user: Refreshing state...
data.template_file.os-setup: Refreshing state...
data.template_file.aws_ami: Refreshing state...
data.template_file.aws_ami_user: Refreshing state...
^CInterrupt received.
Please wait for Terraform to exit or data loss may occur.
Gracefully shutting down...
v^CTwo interrupts received. Exiting immediately. Note that data
loss may have occurred.
Error: Error refreshing state: 2 error(s) occurred:

* provider.aws: NoCredentialProviders: no valid providers in chain. Deprecated.
	For verbose messaging see aws.Config.CredentialsChainVerboseErrors
* provider.aws.bursted-vpc: NoCredentialProviders: no valid providers in chain. Deprecated.
	For verbose messaging see aws.Config.CredentialsChainVerboseErrors

```


### Expected Behavior
What should have happened?
Error out asap.

### Actual Behavior
What actually happened?
Runs indefinitely. 

### Steps to Reproduce
Please list the steps required to reproduce the issue, for example:
1. `terraform apply`
",aws_access_key_id,https://github.com/hashicorp/terraform-provider-aws
50,3383,"When running `terraform apply` the console runs indefinitely if the user has an invalid `aws_session_token` but a valid `aws_access_key_id` and `aws_secret_access_key`. 

### Terraform Version
```
$  terraform -v
Terraform v0.11.3
+ provider.aws v1.9.0
+ provider.external v1.0.0
+ provider.null v1.0.0
+ provider.template v1.0.0
```
### AWS Example Credentials File 
```
$ cat ~/.aws/credentials
[default]
aws_access_key_id     = <VALID> OSIAJO22MN2TVEXAMPLE 
aws_secret_access_key = <VALID> erHSKM98c+afa418tkewJRjsdaJMxuiSgO99Xi7cE
aws_session_token     = <INVALID> FQoDYXdzEH8aDiudh41nfgrZUgNBtSL8AbD/RaUtmT3amBVTPQkjQqgNUXLhVjFGmq3Sn/1sXxL+gn4znkesHnYy3oTi4AsqoFnpZAjK95OC9+Z/7kJbZUmW05u4fGy7xO9ONqEh7eb+tJNjfXS4zwKrigy86HYEqo9omWLvNFsY5/rmHT3IIBtKfduKmbo0UehLCcBWymjlEZBn5xGiac/F4xG52WirAf8cF5JWH6u6b9A3aRdjFq2+Q//tBdcN6D/6OYH9AMMHVSQtaccFqCB8IOoK4+YLbn+qweo26LZOIpsx6XJMb/E+Lw9M4pBLKVCkY0KjemaIjloozWHL9KHO0a0OyFkesammoXDKmA/o4tivxyiz15LUBQ==
``` 

### Debug Output
```
$ terraform apply -var-file desired_cluster_profile.tfvars -var aws_profile=359820441116_Mesosphere-PowerUsers -var state=upgrade
data.external.whoami: Refreshing state...
data.template_file.os-setup: Refreshing state...
data.template_file.aws_ami: Refreshing state...
data.template_file.aws_ami_user: Refreshing state...
data.template_file.os-setup: Refreshing state...
data.template_file.aws_ami: Refreshing state...
data.template_file.aws_ami_user: Refreshing state...
^CInterrupt received.
Please wait for Terraform to exit or data loss may occur.
Gracefully shutting down...
v^CTwo interrupts received. Exiting immediately. Note that data
loss may have occurred.
Error: Error refreshing state: 2 error(s) occurred:

* provider.aws: NoCredentialProviders: no valid providers in chain. Deprecated.
	For verbose messaging see aws.Config.CredentialsChainVerboseErrors
* provider.aws.bursted-vpc: NoCredentialProviders: no valid providers in chain. Deprecated.
	For verbose messaging see aws.Config.CredentialsChainVerboseErrors

```


### Expected Behavior
What should have happened?
Error out asap.

### Actual Behavior
What actually happened?
Runs indefinitely. 

### Steps to Reproduce
Please list the steps required to reproduce the issue, for example:
1. `terraform apply`
",aws_secret_access_key,https://github.com/hashicorp/terraform-provider-aws
51,3383,"When running `terraform apply` the console runs indefinitely if the user has an invalid `aws_session_token` but a valid `aws_access_key_id` and `aws_secret_access_key`. 

### Terraform Version
```
$  terraform -v
Terraform v0.11.3
+ provider.aws v1.9.0
+ provider.external v1.0.0
+ provider.null v1.0.0
+ provider.template v1.0.0
```
### AWS Example Credentials File 
```
$ cat ~/.aws/credentials
[default]
aws_access_key_id     = <VALID> OSIAJO22MN2TVEXAMPLE 
aws_secret_access_key = <VALID> erHSKM98c+afa418tkewJRjsdaJMxuiSgO99Xi7cE
aws_session_token     = <INVALID> FQoDYXdzEH8aDiudh41nfgrZUgNBtSL8AbD/RaUtmT3amBVTPQkjQqgNUXLhVjFGmq3Sn/1sXxL+gn4znkesHnYy3oTi4AsqoFnpZAjK95OC9+Z/7kJbZUmW05u4fGy7xO9ONqEh7eb+tJNjfXS4zwKrigy86HYEqo9omWLvNFsY5/rmHT3IIBtKfduKmbo0UehLCcBWymjlEZBn5xGiac/F4xG52WirAf8cF5JWH6u6b9A3aRdjFq2+Q//tBdcN6D/6OYH9AMMHVSQtaccFqCB8IOoK4+YLbn+qweo26LZOIpsx6XJMb/E+Lw9M4pBLKVCkY0KjemaIjloozWHL9KHO0a0OyFkesammoXDKmA/o4tivxyiz15LUBQ==
``` 

### Debug Output
```
$ terraform apply -var-file desired_cluster_profile.tfvars -var aws_profile=359820441116_Mesosphere-PowerUsers -var state=upgrade
data.external.whoami: Refreshing state...
data.template_file.os-setup: Refreshing state...
data.template_file.aws_ami: Refreshing state...
data.template_file.aws_ami_user: Refreshing state...
data.template_file.os-setup: Refreshing state...
data.template_file.aws_ami: Refreshing state...
data.template_file.aws_ami_user: Refreshing state...
^CInterrupt received.
Please wait for Terraform to exit or data loss may occur.
Gracefully shutting down...
v^CTwo interrupts received. Exiting immediately. Note that data
loss may have occurred.
Error: Error refreshing state: 2 error(s) occurred:

* provider.aws: NoCredentialProviders: no valid providers in chain. Deprecated.
	For verbose messaging see aws.Config.CredentialsChainVerboseErrors
* provider.aws.bursted-vpc: NoCredentialProviders: no valid providers in chain. Deprecated.
	For verbose messaging see aws.Config.CredentialsChainVerboseErrors

```


### Expected Behavior
What should have happened?
Error out asap.

### Actual Behavior
What actually happened?
Runs indefinitely. 

### Steps to Reproduce
Please list the steps required to reproduce the issue, for example:
1. `terraform apply`
",OSIAJO22MN2TVEXAMPLE,https://github.com/hashicorp/terraform-provider-aws
52,1854,"This is to address the following test failure from this morning:

```
=== RUN   TestAccAWSEBSVolume_kmsKey
--- FAIL: TestAccAWSEBSVolume_kmsKey (22.84s)
    testing.go:434: Step 0 error: Error applying: 1 error(s) occurred:
        
        * aws_kms_key.foo: 1 error(s) occurred:
        
        * aws_kms_key.foo: NotFoundException: Key 'arn:aws:kms:us-west-2:*******:key/eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40' does not exist
            status code: 400, request id: f2006223-ad80-11e7-8981-d922c7ad0e59
```

Snippet from related debug log:

```
-----------------------------------------------------
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] DEBUG: Response kms/DescribeKey Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 200 OK
Connection: close
Content-Length: 373
Content-Type: application/x-amz-json-1.1
X-Amzn-Requestid: f1fe8d88-ad80-11e7-a270-333f20b6475c


-----------------------------------------------------
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] {""KeyMetadata"":{""AWSAccountId"":""187416307283"",""Arn"":""arn:aws:kms:us-west-2:187416307283:key/eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40"",""CreationDate"":1.507615498459E9,""Description"":""Terraform acc test 4796457295038973391"",""Enabled"":true,""KeyId"":""eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40"",""KeyManager"":""CUSTOMER"",""KeyState"":""Enabled"",""KeyUsage"":""ENCRYPT_DECRYPT"",""Origin"":""AWS_KMS""}}
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] DEBUG: Request kms/GetKeyPolicy Details:
---[ REQUEST POST-SIGN ]-----------------------------
POST / HTTP/1.1
Host: kms.us-west-2.amazonaws.com
User-Agent: aws-sdk-go/1.12.6 (go1.9; linux; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.10.0-dev
Content-Length: 71
Authorization: AWS4-HMAC-SHA256 Credential=*REDACTED/20171010/us-west-2/kms/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-target, Signature=*REDACTED*
Content-Type: application/x-amz-json-1.1
X-Amz-Date: 20171010T060458Z
X-Amz-Target: TrentService.GetKeyPolicy
Accept-Encoding: gzip

{""KeyId"":""eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40"",""PolicyName"":""default""}
-----------------------------------------------------
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] DEBUG: Response kms/GetKeyPolicy Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 400 Bad Request
Connection: close
Content-Length: 139
Content-Type: application/x-amz-json-1.1
X-Amzn-Requestid: f2006223-ad80-11e7-8981-d922c7ad0e59


-----------------------------------------------------
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] {""__type"":""NotFoundException"",""message"":""Key 'arn:aws:kms:us-west-2:187416307283:key/eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40' does not exist""}
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] DEBUG: Validate Response kms/GetKeyPolicy failed, not retrying, error NotFoundException: Key 'arn:aws:kms:us-west-2:187416307283:key/eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40' does not exist
	status code: 400, request id: f2006223-ad80-11e7-8981-d922c7ad0e59
```

![kitty-whack-a-mole1](https://user-images.githubusercontent.com/287584/31406016-b5c46140-adf7-11e7-8bd5-57357966668c.gif)
",TestAccAWSEBSVolume_kmsKey,https://github.com/hashicorp/terraform-provider-aws
53,1854,"This is to address the following test failure from this morning:

```
=== RUN   TestAccAWSEBSVolume_kmsKey
--- FAIL: TestAccAWSEBSVolume_kmsKey (22.84s)
    testing.go:434: Step 0 error: Error applying: 1 error(s) occurred:
        
        * aws_kms_key.foo: 1 error(s) occurred:
        
        * aws_kms_key.foo: NotFoundException: Key 'arn:aws:kms:us-west-2:*******:key/eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40' does not exist
            status code: 400, request id: f2006223-ad80-11e7-8981-d922c7ad0e59
```

Snippet from related debug log:

```
-----------------------------------------------------
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] DEBUG: Response kms/DescribeKey Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 200 OK
Connection: close
Content-Length: 373
Content-Type: application/x-amz-json-1.1
X-Amzn-Requestid: f1fe8d88-ad80-11e7-a270-333f20b6475c


-----------------------------------------------------
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] {""KeyMetadata"":{""AWSAccountId"":""187416307283"",""Arn"":""arn:aws:kms:us-west-2:187416307283:key/eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40"",""CreationDate"":1.507615498459E9,""Description"":""Terraform acc test 4796457295038973391"",""Enabled"":true,""KeyId"":""eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40"",""KeyManager"":""CUSTOMER"",""KeyState"":""Enabled"",""KeyUsage"":""ENCRYPT_DECRYPT"",""Origin"":""AWS_KMS""}}
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] DEBUG: Request kms/GetKeyPolicy Details:
---[ REQUEST POST-SIGN ]-----------------------------
POST / HTTP/1.1
Host: kms.us-west-2.amazonaws.com
User-Agent: aws-sdk-go/1.12.6 (go1.9; linux; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.10.0-dev
Content-Length: 71
Authorization: AWS4-HMAC-SHA256 Credential=*REDACTED/20171010/us-west-2/kms/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-target, Signature=*REDACTED*
Content-Type: application/x-amz-json-1.1
X-Amz-Date: 20171010T060458Z
X-Amz-Target: TrentService.GetKeyPolicy
Accept-Encoding: gzip

{""KeyId"":""eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40"",""PolicyName"":""default""}
-----------------------------------------------------
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] DEBUG: Response kms/GetKeyPolicy Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 400 Bad Request
Connection: close
Content-Length: 139
Content-Type: application/x-amz-json-1.1
X-Amzn-Requestid: f2006223-ad80-11e7-8981-d922c7ad0e59


-----------------------------------------------------
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] {""__type"":""NotFoundException"",""message"":""Key 'arn:aws:kms:us-west-2:187416307283:key/eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40' does not exist""}
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] DEBUG: Validate Response kms/GetKeyPolicy failed, not retrying, error NotFoundException: Key 'arn:aws:kms:us-west-2:187416307283:key/eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40' does not exist
	status code: 400, request id: f2006223-ad80-11e7-8981-d922c7ad0e59
```

![kitty-whack-a-mole1](https://user-images.githubusercontent.com/287584/31406016-b5c46140-adf7-11e7-8bd5-57357966668c.gif)
",187416307283:key,https://github.com/hashicorp/terraform-provider-aws
54,1854,"This is to address the following test failure from this morning:

```
=== RUN   TestAccAWSEBSVolume_kmsKey
--- FAIL: TestAccAWSEBSVolume_kmsKey (22.84s)
    testing.go:434: Step 0 error: Error applying: 1 error(s) occurred:
        
        * aws_kms_key.foo: 1 error(s) occurred:
        
        * aws_kms_key.foo: NotFoundException: Key 'arn:aws:kms:us-west-2:*******:key/eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40' does not exist
            status code: 400, request id: f2006223-ad80-11e7-8981-d922c7ad0e59
```

Snippet from related debug log:

```
-----------------------------------------------------
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] DEBUG: Response kms/DescribeKey Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 200 OK
Connection: close
Content-Length: 373
Content-Type: application/x-amz-json-1.1
X-Amzn-Requestid: f1fe8d88-ad80-11e7-a270-333f20b6475c


-----------------------------------------------------
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] {""KeyMetadata"":{""AWSAccountId"":""187416307283"",""Arn"":""arn:aws:kms:us-west-2:187416307283:key/eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40"",""CreationDate"":1.507615498459E9,""Description"":""Terraform acc test 4796457295038973391"",""Enabled"":true,""KeyId"":""eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40"",""KeyManager"":""CUSTOMER"",""KeyState"":""Enabled"",""KeyUsage"":""ENCRYPT_DECRYPT"",""Origin"":""AWS_KMS""}}
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] DEBUG: Request kms/GetKeyPolicy Details:
---[ REQUEST POST-SIGN ]-----------------------------
POST / HTTP/1.1
Host: kms.us-west-2.amazonaws.com
User-Agent: aws-sdk-go/1.12.6 (go1.9; linux; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.10.0-dev
Content-Length: 71
Authorization: AWS4-HMAC-SHA256 Credential=*REDACTED/20171010/us-west-2/kms/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-target, Signature=*REDACTED*
Content-Type: application/x-amz-json-1.1
X-Amz-Date: 20171010T060458Z
X-Amz-Target: TrentService.GetKeyPolicy
Accept-Encoding: gzip

{""KeyId"":""eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40"",""PolicyName"":""default""}
-----------------------------------------------------
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] DEBUG: Response kms/GetKeyPolicy Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 400 Bad Request
Connection: close
Content-Length: 139
Content-Type: application/x-amz-json-1.1
X-Amzn-Requestid: f2006223-ad80-11e7-8981-d922c7ad0e59


-----------------------------------------------------
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] {""__type"":""NotFoundException"",""message"":""Key 'arn:aws:kms:us-west-2:187416307283:key/eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40' does not exist""}
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] DEBUG: Validate Response kms/GetKeyPolicy failed, not retrying, error NotFoundException: Key 'arn:aws:kms:us-west-2:187416307283:key/eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40' does not exist
	status code: 400, request id: f2006223-ad80-11e7-8981-d922c7ad0e59
```

![kitty-whack-a-mole1](https://user-images.githubusercontent.com/287584/31406016-b5c46140-adf7-11e7-8bd5-57357966668c.gif)
",west-2:*******:key,https://github.com/hashicorp/terraform-provider-aws
55,1854,"This is to address the following test failure from this morning:

```
=== RUN   TestAccAWSEBSVolume_kmsKey
--- FAIL: TestAccAWSEBSVolume_kmsKey (22.84s)
    testing.go:434: Step 0 error: Error applying: 1 error(s) occurred:
        
        * aws_kms_key.foo: 1 error(s) occurred:
        
        * aws_kms_key.foo: NotFoundException: Key 'arn:aws:kms:us-west-2:*******:key/eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40' does not exist
            status code: 400, request id: f2006223-ad80-11e7-8981-d922c7ad0e59
```

Snippet from related debug log:

```
-----------------------------------------------------
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] DEBUG: Response kms/DescribeKey Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 200 OK
Connection: close
Content-Length: 373
Content-Type: application/x-amz-json-1.1
X-Amzn-Requestid: f1fe8d88-ad80-11e7-a270-333f20b6475c


-----------------------------------------------------
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] {""KeyMetadata"":{""AWSAccountId"":""187416307283"",""Arn"":""arn:aws:kms:us-west-2:187416307283:key/eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40"",""CreationDate"":1.507615498459E9,""Description"":""Terraform acc test 4796457295038973391"",""Enabled"":true,""KeyId"":""eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40"",""KeyManager"":""CUSTOMER"",""KeyState"":""Enabled"",""KeyUsage"":""ENCRYPT_DECRYPT"",""Origin"":""AWS_KMS""}}
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] DEBUG: Request kms/GetKeyPolicy Details:
---[ REQUEST POST-SIGN ]-----------------------------
POST / HTTP/1.1
Host: kms.us-west-2.amazonaws.com
User-Agent: aws-sdk-go/1.12.6 (go1.9; linux; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.10.0-dev
Content-Length: 71
Authorization: AWS4-HMAC-SHA256 Credential=*REDACTED/20171010/us-west-2/kms/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-target, Signature=*REDACTED*
Content-Type: application/x-amz-json-1.1
X-Amz-Date: 20171010T060458Z
X-Amz-Target: TrentService.GetKeyPolicy
Accept-Encoding: gzip

{""KeyId"":""eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40"",""PolicyName"":""default""}
-----------------------------------------------------
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] DEBUG: Response kms/GetKeyPolicy Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 400 Bad Request
Connection: close
Content-Length: 139
Content-Type: application/x-amz-json-1.1
X-Amzn-Requestid: f2006223-ad80-11e7-8981-d922c7ad0e59


-----------------------------------------------------
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] {""__type"":""NotFoundException"",""message"":""Key 'arn:aws:kms:us-west-2:187416307283:key/eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40' does not exist""}
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] DEBUG: Validate Response kms/GetKeyPolicy failed, not retrying, error NotFoundException: Key 'arn:aws:kms:us-west-2:187416307283:key/eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40' does not exist
	status code: 400, request id: f2006223-ad80-11e7-8981-d922c7ad0e59
```

![kitty-whack-a-mole1](https://user-images.githubusercontent.com/287584/31406016-b5c46140-adf7-11e7-8bd5-57357966668c.gif)
","KeyUsage:ENCRYPT_DECRYPT,Origin:AWS_KMS",https://github.com/hashicorp/terraform-provider-aws
56,1854,"This is to address the following test failure from this morning:

```
=== RUN   TestAccAWSEBSVolume_kmsKey
--- FAIL: TestAccAWSEBSVolume_kmsKey (22.84s)
    testing.go:434: Step 0 error: Error applying: 1 error(s) occurred:
        
        * aws_kms_key.foo: 1 error(s) occurred:
        
        * aws_kms_key.foo: NotFoundException: Key 'arn:aws:kms:us-west-2:*******:key/eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40' does not exist
            status code: 400, request id: f2006223-ad80-11e7-8981-d922c7ad0e59
```

Snippet from related debug log:

```
-----------------------------------------------------
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] DEBUG: Response kms/DescribeKey Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 200 OK
Connection: close
Content-Length: 373
Content-Type: application/x-amz-json-1.1
X-Amzn-Requestid: f1fe8d88-ad80-11e7-a270-333f20b6475c


-----------------------------------------------------
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] {""KeyMetadata"":{""AWSAccountId"":""187416307283"",""Arn"":""arn:aws:kms:us-west-2:187416307283:key/eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40"",""CreationDate"":1.507615498459E9,""Description"":""Terraform acc test 4796457295038973391"",""Enabled"":true,""KeyId"":""eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40"",""KeyManager"":""CUSTOMER"",""KeyState"":""Enabled"",""KeyUsage"":""ENCRYPT_DECRYPT"",""Origin"":""AWS_KMS""}}
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] DEBUG: Request kms/GetKeyPolicy Details:
---[ REQUEST POST-SIGN ]-----------------------------
POST / HTTP/1.1
Host: kms.us-west-2.amazonaws.com
User-Agent: aws-sdk-go/1.12.6 (go1.9; linux; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.10.0-dev
Content-Length: 71
Authorization: AWS4-HMAC-SHA256 Credential=*REDACTED/20171010/us-west-2/kms/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-target, Signature=*REDACTED*
Content-Type: application/x-amz-json-1.1
X-Amz-Date: 20171010T060458Z
X-Amz-Target: TrentService.GetKeyPolicy
Accept-Encoding: gzip

{""KeyId"":""eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40"",""PolicyName"":""default""}
-----------------------------------------------------
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] DEBUG: Response kms/GetKeyPolicy Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 400 Bad Request
Connection: close
Content-Length: 139
Content-Type: application/x-amz-json-1.1
X-Amzn-Requestid: f2006223-ad80-11e7-8981-d922c7ad0e59


-----------------------------------------------------
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] {""__type"":""NotFoundException"",""message"":""Key 'arn:aws:kms:us-west-2:187416307283:key/eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40' does not exist""}
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] DEBUG: Validate Response kms/GetKeyPolicy failed, not retrying, error NotFoundException: Key 'arn:aws:kms:us-west-2:187416307283:key/eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40' does not exist
	status code: 400, request id: f2006223-ad80-11e7-8981-d922c7ad0e59
```

![kitty-whack-a-mole1](https://user-images.githubusercontent.com/287584/31406016-b5c46140-adf7-11e7-8bd5-57357966668c.gif)
",PolicyName:default,https://github.com/hashicorp/terraform-provider-aws
57,1854,"This is to address the following test failure from this morning:

```
=== RUN   TestAccAWSEBSVolume_kmsKey
--- FAIL: TestAccAWSEBSVolume_kmsKey (22.84s)
    testing.go:434: Step 0 error: Error applying: 1 error(s) occurred:
        
        * aws_kms_key.foo: 1 error(s) occurred:
        
        * aws_kms_key.foo: NotFoundException: Key 'arn:aws:kms:us-west-2:*******:key/eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40' does not exist
            status code: 400, request id: f2006223-ad80-11e7-8981-d922c7ad0e59
```

Snippet from related debug log:

```
-----------------------------------------------------
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] DEBUG: Response kms/DescribeKey Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 200 OK
Connection: close
Content-Length: 373
Content-Type: application/x-amz-json-1.1
X-Amzn-Requestid: f1fe8d88-ad80-11e7-a270-333f20b6475c


-----------------------------------------------------
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] {""KeyMetadata"":{""AWSAccountId"":""187416307283"",""Arn"":""arn:aws:kms:us-west-2:187416307283:key/eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40"",""CreationDate"":1.507615498459E9,""Description"":""Terraform acc test 4796457295038973391"",""Enabled"":true,""KeyId"":""eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40"",""KeyManager"":""CUSTOMER"",""KeyState"":""Enabled"",""KeyUsage"":""ENCRYPT_DECRYPT"",""Origin"":""AWS_KMS""}}
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] DEBUG: Request kms/GetKeyPolicy Details:
---[ REQUEST POST-SIGN ]-----------------------------
POST / HTTP/1.1
Host: kms.us-west-2.amazonaws.com
User-Agent: aws-sdk-go/1.12.6 (go1.9; linux; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.10.0-dev
Content-Length: 71
Authorization: AWS4-HMAC-SHA256 Credential=*REDACTED/20171010/us-west-2/kms/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-target, Signature=*REDACTED*
Content-Type: application/x-amz-json-1.1
X-Amz-Date: 20171010T060458Z
X-Amz-Target: TrentService.GetKeyPolicy
Accept-Encoding: gzip

{""KeyId"":""eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40"",""PolicyName"":""default""}
-----------------------------------------------------
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] DEBUG: Response kms/GetKeyPolicy Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 400 Bad Request
Connection: close
Content-Length: 139
Content-Type: application/x-amz-json-1.1
X-Amzn-Requestid: f2006223-ad80-11e7-8981-d922c7ad0e59


-----------------------------------------------------
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] {""__type"":""NotFoundException"",""message"":""Key 'arn:aws:kms:us-west-2:187416307283:key/eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40' does not exist""}
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] DEBUG: Validate Response kms/GetKeyPolicy failed, not retrying, error NotFoundException: Key 'arn:aws:kms:us-west-2:187416307283:key/eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40' does not exist
	status code: 400, request id: f2006223-ad80-11e7-8981-d922c7ad0e59
```

![kitty-whack-a-mole1](https://user-images.githubusercontent.com/287584/31406016-b5c46140-adf7-11e7-8bd5-57357966668c.gif)
","arn:aws:kms:us-west-2:187416307283:key,CreationDate:,Description",https://github.com/hashicorp/terraform-provider-aws
58,1854,"This is to address the following test failure from this morning:

```
=== RUN   TestAccAWSEBSVolume_kmsKey
--- FAIL: TestAccAWSEBSVolume_kmsKey (22.84s)
    testing.go:434: Step 0 error: Error applying: 1 error(s) occurred:
        
        * aws_kms_key.foo: 1 error(s) occurred:
        
        * aws_kms_key.foo: NotFoundException: Key 'arn:aws:kms:us-west-2:*******:key/eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40' does not exist
            status code: 400, request id: f2006223-ad80-11e7-8981-d922c7ad0e59
```

Snippet from related debug log:

```
-----------------------------------------------------
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] DEBUG: Response kms/DescribeKey Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 200 OK
Connection: close
Content-Length: 373
Content-Type: application/x-amz-json-1.1
X-Amzn-Requestid: f1fe8d88-ad80-11e7-a270-333f20b6475c


-----------------------------------------------------
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] {""KeyMetadata"":{""AWSAccountId"":""187416307283"",""Arn"":""arn:aws:kms:us-west-2:187416307283:key/eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40"",""CreationDate"":1.507615498459E9,""Description"":""Terraform acc test 4796457295038973391"",""Enabled"":true,""KeyId"":""eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40"",""KeyManager"":""CUSTOMER"",""KeyState"":""Enabled"",""KeyUsage"":""ENCRYPT_DECRYPT"",""Origin"":""AWS_KMS""}}
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] DEBUG: Request kms/GetKeyPolicy Details:
---[ REQUEST POST-SIGN ]-----------------------------
POST / HTTP/1.1
Host: kms.us-west-2.amazonaws.com
User-Agent: aws-sdk-go/1.12.6 (go1.9; linux; amd64) APN/1.0 HashiCorp/1.0 Terraform/0.10.0-dev
Content-Length: 71
Authorization: AWS4-HMAC-SHA256 Credential=*REDACTED/20171010/us-west-2/kms/aws4_request, SignedHeaders=content-length;content-type;host;x-amz-date;x-amz-target, Signature=*REDACTED*
Content-Type: application/x-amz-json-1.1
X-Amz-Date: 20171010T060458Z
X-Amz-Target: TrentService.GetKeyPolicy
Accept-Encoding: gzip

{""KeyId"":""eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40"",""PolicyName"":""default""}
-----------------------------------------------------
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] DEBUG: Response kms/GetKeyPolicy Details:
---[ RESPONSE ]--------------------------------------
HTTP/1.1 400 Bad Request
Connection: close
Content-Length: 139
Content-Type: application/x-amz-json-1.1
X-Amzn-Requestid: f2006223-ad80-11e7-8981-d922c7ad0e59


-----------------------------------------------------
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] {""__type"":""NotFoundException"",""message"":""Key 'arn:aws:kms:us-west-2:187416307283:key/eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40' does not exist""}
2017/10/10 06:04:58 [DEBUG] [aws-sdk-go] DEBUG: Validate Response kms/GetKeyPolicy failed, not retrying, error NotFoundException: Key 'arn:aws:kms:us-west-2:187416307283:key/eb421bb3-2865-4d7d-b7c6-2c2c3a07dc40' does not exist
	status code: 400, request id: f2006223-ad80-11e7-8981-d922c7ad0e59
```

![kitty-whack-a-mole1](https://user-images.githubusercontent.com/287584/31406016-b5c46140-adf7-11e7-8bd5-57357966668c.gif)
",length;content-type;host;x-amz-date;x-amz-target,https://github.com/hashicorp/terraform-provider-aws
59,1086,"### Terraform Version
0.9.11

### Affected Resource(s)
- aws_provider

### Terraform Configuration Files
```hcl
provider ""vault"" {
  address = ""http://111.222.333.444:8200""
  skip_tls_verify = ""true""
}

data ""vault_generic_secret"" ""aws_iam_keys"" {
  path = ""aws/creds/admin""
}

provider ""aws"" {
  region = ""${var.region}""
  access_key = ""${data.vault_generic_secret.aws_iam_keys.data[""access_key""]}""
  secret_key = ""${data.vault_generic_secret.aws_iam_keys.data[""secret_key""]}""
```

### Debug Output
I am watching the traffic between Terraform and Vault with tcpdump, since it's plain text.
I see the AWS keys, generated by Vault, being returned to Terraform in JSON format.

```
GET /v1/aws/creds/admin HTTP/1.1
Host: 111.222.333.444:8200
User-Agent: Go-http-client/1.1
X-Vault-Token: XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
Accept-Encoding: gzip
Connection: close

HTTP/1.1 200 OK
Cache-Control: no-store
Content-Type: application/json
Date: Sat, 08 Jul 2017 00:48:22 GMT
Content-Length: 325
Connection: close

{""request_id"":""3ea862c3-f46b-81e5-d954-e8aefa1a9a66"",""lease_id"":""aws/creds/admin/23abf456-2cc6-1d7d-8eb9-f145fb7a9995"",""renewable"":true,""lease_duration"":60,""data"":{""access_key"":""AKIAJQT5JHHFVO6KZOLQ"",""secret_key"":""XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"",""security_token"":null},""wrap_info"":null,""warnings"":null,""auth"":null}
```

I know the AWS key generator in Vault works fine because I've tested it with the command line, and the keys it returns are working just fine. The keys are generated with admin privileges, for testing, and so they should be able to do anything.

### Expected Behavior
`terraform plan` should succeed.

### Actual Behavior
```
Refreshing Terraform state in-memory prior to plan...
The refreshed state will be used to calculate this plan, but will not be
persisted to local or remote state storage.

data.vault_generic_secret.aws_iam_keys: Refreshing state...
Releasing state lock. This may take a few moments...
Error refreshing state: 1 error(s) occurred:

* provider.aws: InvalidClientTokenId: The security token included in the request is invalid.
	status code: 403, request id: f477482f-6379-11e7-8ecb-85e000cae410
```

### Steps to Reproduce
1. `terraform plan`",AKIAJQT5JHHFVO6KZOLQ,https://github.com/hashicorp/terraform-provider-aws
60,1086,"### Terraform Version
0.9.11

### Affected Resource(s)
- aws_provider

### Terraform Configuration Files
```hcl
provider ""vault"" {
  address = ""http://111.222.333.444:8200""
  skip_tls_verify = ""true""
}

data ""vault_generic_secret"" ""aws_iam_keys"" {
  path = ""aws/creds/admin""
}

provider ""aws"" {
  region = ""${var.region}""
  access_key = ""${data.vault_generic_secret.aws_iam_keys.data[""access_key""]}""
  secret_key = ""${data.vault_generic_secret.aws_iam_keys.data[""secret_key""]}""
```

### Debug Output
I am watching the traffic between Terraform and Vault with tcpdump, since it's plain text.
I see the AWS keys, generated by Vault, being returned to Terraform in JSON format.

```
GET /v1/aws/creds/admin HTTP/1.1
Host: 111.222.333.444:8200
User-Agent: Go-http-client/1.1
X-Vault-Token: XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
Accept-Encoding: gzip
Connection: close

HTTP/1.1 200 OK
Cache-Control: no-store
Content-Type: application/json
Date: Sat, 08 Jul 2017 00:48:22 GMT
Content-Length: 325
Connection: close

{""request_id"":""3ea862c3-f46b-81e5-d954-e8aefa1a9a66"",""lease_id"":""aws/creds/admin/23abf456-2cc6-1d7d-8eb9-f145fb7a9995"",""renewable"":true,""lease_duration"":60,""data"":{""access_key"":""AKIAJQT5JHHFVO6KZOLQ"",""secret_key"":""XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"",""security_token"":null},""wrap_info"":null,""warnings"":null,""auth"":null}
```

I know the AWS key generator in Vault works fine because I've tested it with the command line, and the keys it returns are working just fine. The keys are generated with admin privileges, for testing, and so they should be able to do anything.

### Expected Behavior
`terraform plan` should succeed.

### Actual Behavior
```
Refreshing Terraform state in-memory prior to plan...
The refreshed state will be used to calculate this plan, but will not be
persisted to local or remote state storage.

data.vault_generic_secret.aws_iam_keys: Refreshing state...
Releasing state lock. This may take a few moments...
Error refreshing state: 1 error(s) occurred:

* provider.aws: InvalidClientTokenId: The security token included in the request is invalid.
	status code: 403, request id: f477482f-6379-11e7-8ecb-85e000cae410
```

### Steps to Reproduce
1. `terraform plan`",XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX,https://github.com/hashicorp/terraform-provider-aws
61,1086,"### Terraform Version
0.9.11

### Affected Resource(s)
- aws_provider

### Terraform Configuration Files
```hcl
provider ""vault"" {
  address = ""http://111.222.333.444:8200""
  skip_tls_verify = ""true""
}

data ""vault_generic_secret"" ""aws_iam_keys"" {
  path = ""aws/creds/admin""
}

provider ""aws"" {
  region = ""${var.region}""
  access_key = ""${data.vault_generic_secret.aws_iam_keys.data[""access_key""]}""
  secret_key = ""${data.vault_generic_secret.aws_iam_keys.data[""secret_key""]}""
```

### Debug Output
I am watching the traffic between Terraform and Vault with tcpdump, since it's plain text.
I see the AWS keys, generated by Vault, being returned to Terraform in JSON format.

```
GET /v1/aws/creds/admin HTTP/1.1
Host: 111.222.333.444:8200
User-Agent: Go-http-client/1.1
X-Vault-Token: XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
Accept-Encoding: gzip
Connection: close

HTTP/1.1 200 OK
Cache-Control: no-store
Content-Type: application/json
Date: Sat, 08 Jul 2017 00:48:22 GMT
Content-Length: 325
Connection: close

{""request_id"":""3ea862c3-f46b-81e5-d954-e8aefa1a9a66"",""lease_id"":""aws/creds/admin/23abf456-2cc6-1d7d-8eb9-f145fb7a9995"",""renewable"":true,""lease_duration"":60,""data"":{""access_key"":""AKIAJQT5JHHFVO6KZOLQ"",""secret_key"":""XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"",""security_token"":null},""wrap_info"":null,""warnings"":null,""auth"":null}
```

I know the AWS key generator in Vault works fine because I've tested it with the command line, and the keys it returns are working just fine. The keys are generated with admin privileges, for testing, and so they should be able to do anything.

### Expected Behavior
`terraform plan` should succeed.

### Actual Behavior
```
Refreshing Terraform state in-memory prior to plan...
The refreshed state will be used to calculate this plan, but will not be
persisted to local or remote state storage.

data.vault_generic_secret.aws_iam_keys: Refreshing state...
Releasing state lock. This may take a few moments...
Error refreshing state: 1 error(s) occurred:

* provider.aws: InvalidClientTokenId: The security token included in the request is invalid.
	status code: 403, request id: f477482f-6379-11e7-8ecb-85e000cae410
```

### Steps to Reproduce
1. `terraform plan`","XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX,security_token:null},wrap_info",https://github.com/hashicorp/terraform-provider-aws
